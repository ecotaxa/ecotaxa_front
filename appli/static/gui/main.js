/*! For license information please see main.js.LICENSE.txt */
(()=>{var t,e={1924:(t,e,r)=>{"use strict";var n=r(210),i=r(5559),s=i(n("String.prototype.indexOf"));t.exports=function(t,e){var r=n(t,!!e);return"function"==typeof r&&s(t,".prototype.")>-1?i(r):r}},5559:(t,e,r)=>{"use strict";var n=r(8612),i=r(210),s=i("%Function.prototype.apply%"),o=i("%Function.prototype.call%"),a=i("%Reflect.apply%",!0)||n.call(o,s),l=i("%Object.getOwnPropertyDescriptor%",!0),c=i("%Object.defineProperty%",!0),d=i("%Math.max%");if(c)try{c({},"a",{value:1})}catch(t){c=null}t.exports=function(t){var e=a(n,o,arguments);if(l&&c){var r=l(e,"length");r.configurable&&c(e,"length",{value:1+d(0,t.length-(arguments.length-1))})}return e};var u=function(){return a(n,s,arguments)};c?c(t.exports,"apply",{value:u}):t.exports.apply=u},251:(t,e,r)=>{"use strict";var n=r(2215),i=r(2584),s=r(609),o=r(8420),a=r(2847),l=r(8326),c=r(8923),d=r(3679),u=r(210),p=r(1924),h=r(3483),f=r(3216),m=r(7478),g=r(6430),y=r(3533),v=p("Date.prototype.getTime"),b=Object.getPrototypeOf,w=p("Object.prototype.toString"),S=u("%Set%",!0),x=p("Map.prototype.has",!0),E=p("Map.prototype.get",!0),A=p("Map.prototype.size",!0),O=p("Set.prototype.add",!0),L=p("Set.prototype.delete",!0),T=p("Set.prototype.has",!0),k=p("Set.prototype.size",!0);function I(t,e,r,n){for(var i,s=f(t);(i=s.next())&&!i.done;)if(F(e,i.value,r,n))return L(t,i.value),!0;return!1}function j(t){return void 0===t?null:"object"!=typeof t?"symbol"!=typeof t&&("string"!=typeof t&&"number"!=typeof t||+t==+t):void 0}function C(t,e,r,n,i,s){var o=j(r);if(null!=o)return o;var a=E(e,o),l=y({},i,{strict:!1});return!(void 0===a&&!x(e,o)||!F(n,a,l,s))&&(!x(t,o)&&F(n,a,l,s))}function P(t,e,r){var n=j(r);return null!=n?n:T(e,n)&&!T(t,n)}function _(t,e,r,n,i,s){for(var o,a,l=f(t);(o=l.next())&&!o.done;)if(F(r,a=o.value,i,s)&&F(n,E(e,a),i,s))return L(t,a),!0;return!1}function F(t,e,r,u){var p=r||{};if(p.strict?s(t,e):t===e)return!0;if(d(t)!==d(e))return!1;if(!t||!e||"object"!=typeof t&&"object"!=typeof e)return p.strict?s(t,e):t==e;var m,L=u.has(t),j=u.has(e);if(L&&j){if(u.get(t)===u.get(e))return!0}else m={};return L||u.set(t,m),j||u.set(e,m),function(t,e,r,s){var d,u;if(typeof t!=typeof e)return!1;if(null==t||null==e)return!1;if(w(t)!==w(e))return!1;if(i(t)!==i(e))return!1;var p=l(t),m=l(e);if(p!==m)return!1;var L=t instanceof Error,j=e instanceof Error;if(L!==j)return!1;if((L||j)&&(t.name!==e.name||t.message!==e.message))return!1;var q=o(t),D=o(e);if(q!==D)return!1;if((q||D)&&(t.source!==e.source||a(t)!==a(e)))return!1;var H=c(t),R=c(e);if(H!==R)return!1;if((H||R)&&v(t)!==v(e))return!1;if(r.strict&&b&&b(t)!==b(e))return!1;if(g(t)!==g(e))return!1;var N=M(t),z=M(e);if(N!==z)return!1;if(N||z){if(t.length!==e.length)return!1;for(d=0;d<t.length;d++)if(t[d]!==e[d])return!1;return!0}if(typeof t!=typeof e)return!1;var $=n(t),B=n(e);if($.length!==B.length)return!1;for($.sort(),B.sort(),d=$.length-1;d>=0;d--)if($[d]!=B[d])return!1;for(d=$.length-1;d>=0;d--)if(!F(t[u=$[d]],e[u],r,s))return!1;var U=h(t),W=h(e);if(U!==W)return!1;if("Set"===U||"Set"===W)return function(t,e,r,n){if(k(t)!==k(e))return!1;var i,s,o,a=f(t),l=f(e);for(;(i=a.next())&&!i.done;)if(i.value&&"object"==typeof i.value)o||(o=new S),O(o,i.value);else if(!T(e,i.value)){if(r.strict)return!1;if(!P(t,e,i.value))return!1;o||(o=new S),O(o,i.value)}if(o){for(;(s=l.next())&&!s.done;)if(s.value&&"object"==typeof s.value){if(!I(o,s.value,r.strict,n))return!1}else if(!r.strict&&!T(t,s.value)&&!I(o,s.value,r.strict,n))return!1;return 0===k(o)}return!0}(t,e,r,s);if("Map"===U)return function(t,e,r,n){if(A(t)!==A(e))return!1;var i,s,o,a,l,c,d=f(t),u=f(e);for(;(i=d.next())&&!i.done;)if(a=i.value[0],l=i.value[1],a&&"object"==typeof a)o||(o=new S),O(o,a);else if(void 0===(c=E(e,a))&&!x(e,a)||!F(l,c,r,n)){if(r.strict)return!1;if(!C(t,e,a,l,r,n))return!1;o||(o=new S),O(o,a)}if(o){for(;(s=u.next())&&!s.done;)if(a=s.value[0],c=s.value[1],a&&"object"==typeof a){if(!_(o,t,a,c,r,n))return!1}else if(!(r.strict||t.has(a)&&F(E(t,a),c,r,n)||_(o,t,a,c,y({},r,{strict:!1}),n)))return!1;return 0===k(o)}return!0}(t,e,r,s);return!0}(t,e,p,u)}function M(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&(!(t.length>0&&"number"!=typeof t[0])&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))))}t.exports=function(t,e,r){return F(t,e,r,m())}},8326:t=>{var e={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==e.call(t)}},4289:(t,e,r)=>{"use strict";var n=r(2215),i="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),s=Object.prototype.toString,o=Array.prototype.concat,a=Object.defineProperty,l=r(1044)(),c=a&&l,d=function(t,e,r,n){var i;(!(e in t)||"function"==typeof(i=n)&&"[object Function]"===s.call(i)&&n())&&(c?a(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r)},u=function(t,e){var r=arguments.length>2?arguments[2]:{},s=n(e);i&&(s=o.call(s,Object.getOwnPropertySymbols(e)));for(var a=0;a<s.length;a+=1)d(t,s[a],e[s[a]],r[s[a]])};u.supportsDescriptors=!!c,t.exports=u},7856:function(t){t.exports=function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,r){return e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(t,r)}function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function n(t,i,s){return n=r()?Reflect.construct:function(t,r,n){var i=[null];i.push.apply(i,r);var s=new(Function.bind.apply(t,i));return n&&e(s,n.prototype),s},n.apply(null,arguments)}function i(t){return s(t)||o(t)||a(t)||c()}function s(t){if(Array.isArray(t))return l(t)}function o(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function a(t,e){if(t){if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var d=Object.hasOwnProperty,u=Object.setPrototypeOf,p=Object.isFrozen,h=Object.getPrototypeOf,f=Object.getOwnPropertyDescriptor,m=Object.freeze,g=Object.seal,y=Object.create,v="undefined"!=typeof Reflect&&Reflect,b=v.apply,w=v.construct;b||(b=function(t,e,r){return t.apply(e,r)}),m||(m=function(t){return t}),g||(g=function(t){return t}),w||(w=function(t,e){return n(t,i(e))});var S=C(Array.prototype.forEach),x=C(Array.prototype.pop),E=C(Array.prototype.push),A=C(String.prototype.toLowerCase),O=C(String.prototype.match),L=C(String.prototype.replace),T=C(String.prototype.indexOf),k=C(String.prototype.trim),I=C(RegExp.prototype.test),j=P(TypeError);function C(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return b(t,e,n)}}function P(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return w(t,r)}}function _(t,e,r){r=r||A,u&&u(t,null);for(var n=e.length;n--;){var i=e[n];if("string"==typeof i){var s=r(i);s!==i&&(p(e)||(e[n]=s),i=s)}t[i]=!0}return t}function F(t){var e,r=y(null);for(e in t)b(d,t,[e])&&(r[e]=t[e]);return r}function M(t,e){for(;null!==t;){var r=f(t,e);if(r){if(r.get)return C(r.get);if("function"==typeof r.value)return C(r.value)}t=h(t)}function n(t){return console.warn("fallback value for",t),null}return n}var q=m(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),D=m(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),H=m(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),R=m(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),N=m(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),z=m(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),$=m(["#text"]),B=m(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),U=m(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),W=m(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),V=m(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),G=g(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Y=g(/<%[\w\W]*|[\w\W]*%>/gm),K=g(/^data-[\-\w.\u00B7-\uFFFF]/),J=g(/^aria-[\-\w]+$/),Q=g(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),X=g(/^(?:\w+script|data):/i),Z=g(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),tt=g(/^html$/i),et=function(){return"undefined"==typeof window?null:window},rt=function(e,r){if("object"!==t(e)||"function"!=typeof e.createPolicy)return null;var n=null,i="data-tt-policy-suffix";r.currentScript&&r.currentScript.hasAttribute(i)&&(n=r.currentScript.getAttribute(i));var s="dompurify"+(n?"#"+n:"");try{return e.createPolicy(s,{createHTML:function(t){return t},createScriptURL:function(t){return t}})}catch(t){return console.warn("TrustedTypes policy "+s+" could not be created."),null}};function nt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et(),r=function(t){return nt(t)};if(r.version="2.4.0",r.removed=[],!e||!e.document||9!==e.document.nodeType)return r.isSupported=!1,r;var n=e.document,s=e.document,o=e.DocumentFragment,a=e.HTMLTemplateElement,l=e.Node,c=e.Element,d=e.NodeFilter,u=e.NamedNodeMap,p=void 0===u?e.NamedNodeMap||e.MozNamedAttrMap:u,h=e.HTMLFormElement,f=e.DOMParser,g=e.trustedTypes,y=c.prototype,v=M(y,"cloneNode"),b=M(y,"nextSibling"),w=M(y,"childNodes"),C=M(y,"parentNode");if("function"==typeof a){var P=s.createElement("template");P.content&&P.content.ownerDocument&&(s=P.content.ownerDocument)}var it=rt(g,n),st=it?it.createHTML(""):"",ot=s,at=ot.implementation,lt=ot.createNodeIterator,ct=ot.createDocumentFragment,dt=ot.getElementsByTagName,ut=n.importNode,pt={};try{pt=F(s).documentMode?s.documentMode:{}}catch(t){}var ht={};r.isSupported="function"==typeof C&&at&&void 0!==at.createHTMLDocument&&9!==pt;var ft,mt,gt=G,yt=Y,vt=K,bt=J,wt=X,St=Z,xt=Q,Et=null,At=_({},[].concat(i(q),i(D),i(H),i(N),i($))),Ot=null,Lt=_({},[].concat(i(B),i(U),i(W),i(V))),Tt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),kt=null,It=null,jt=!0,Ct=!0,Pt=!1,_t=!1,Ft=!1,Mt=!1,qt=!1,Dt=!1,Ht=!1,Rt=!1,Nt=!0,zt=!1,$t="user-content-",Bt=!0,Ut=!1,Wt={},Vt=null,Gt=_({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Yt=null,Kt=_({},["audio","video","img","source","image","track"]),Jt=null,Qt=_({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Xt="http://www.w3.org/1998/Math/MathML",Zt="http://www.w3.org/2000/svg",te="http://www.w3.org/1999/xhtml",ee=te,re=!1,ne=["application/xhtml+xml","text/html"],ie="text/html",se=null,oe=s.createElement("form"),ae=function(t){return t instanceof RegExp||t instanceof Function},le=function(e){se&&se===e||(e&&"object"===t(e)||(e={}),e=F(e),ft=ft=-1===ne.indexOf(e.PARSER_MEDIA_TYPE)?ie:e.PARSER_MEDIA_TYPE,mt="application/xhtml+xml"===ft?function(t){return t}:A,Et="ALLOWED_TAGS"in e?_({},e.ALLOWED_TAGS,mt):At,Ot="ALLOWED_ATTR"in e?_({},e.ALLOWED_ATTR,mt):Lt,Jt="ADD_URI_SAFE_ATTR"in e?_(F(Qt),e.ADD_URI_SAFE_ATTR,mt):Qt,Yt="ADD_DATA_URI_TAGS"in e?_(F(Kt),e.ADD_DATA_URI_TAGS,mt):Kt,Vt="FORBID_CONTENTS"in e?_({},e.FORBID_CONTENTS,mt):Gt,kt="FORBID_TAGS"in e?_({},e.FORBID_TAGS,mt):{},It="FORBID_ATTR"in e?_({},e.FORBID_ATTR,mt):{},Wt="USE_PROFILES"in e&&e.USE_PROFILES,jt=!1!==e.ALLOW_ARIA_ATTR,Ct=!1!==e.ALLOW_DATA_ATTR,Pt=e.ALLOW_UNKNOWN_PROTOCOLS||!1,_t=e.SAFE_FOR_TEMPLATES||!1,Ft=e.WHOLE_DOCUMENT||!1,Dt=e.RETURN_DOM||!1,Ht=e.RETURN_DOM_FRAGMENT||!1,Rt=e.RETURN_TRUSTED_TYPE||!1,qt=e.FORCE_BODY||!1,Nt=!1!==e.SANITIZE_DOM,zt=e.SANITIZE_NAMED_PROPS||!1,Bt=!1!==e.KEEP_CONTENT,Ut=e.IN_PLACE||!1,xt=e.ALLOWED_URI_REGEXP||xt,ee=e.NAMESPACE||te,e.CUSTOM_ELEMENT_HANDLING&&ae(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Tt.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&ae(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Tt.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Tt.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),_t&&(Ct=!1),Ht&&(Dt=!0),Wt&&(Et=_({},i($)),Ot=[],!0===Wt.html&&(_(Et,q),_(Ot,B)),!0===Wt.svg&&(_(Et,D),_(Ot,U),_(Ot,V)),!0===Wt.svgFilters&&(_(Et,H),_(Ot,U),_(Ot,V)),!0===Wt.mathMl&&(_(Et,N),_(Ot,W),_(Ot,V))),e.ADD_TAGS&&(Et===At&&(Et=F(Et)),_(Et,e.ADD_TAGS,mt)),e.ADD_ATTR&&(Ot===Lt&&(Ot=F(Ot)),_(Ot,e.ADD_ATTR,mt)),e.ADD_URI_SAFE_ATTR&&_(Jt,e.ADD_URI_SAFE_ATTR,mt),e.FORBID_CONTENTS&&(Vt===Gt&&(Vt=F(Vt)),_(Vt,e.FORBID_CONTENTS,mt)),Bt&&(Et["#text"]=!0),Ft&&_(Et,["html","head","body"]),Et.table&&(_(Et,["tbody"]),delete kt.tbody),m&&m(e),se=e)},ce=_({},["mi","mo","mn","ms","mtext"]),de=_({},["foreignobject","desc","title","annotation-xml"]),ue=_({},["title","style","font","a","script"]),pe=_({},D);_(pe,H),_(pe,R);var he=_({},N);_(he,z);var fe=function(t){var e=C(t);e&&e.tagName||(e={namespaceURI:te,tagName:"template"});var r=A(t.tagName),n=A(e.tagName);return t.namespaceURI===Zt?e.namespaceURI===te?"svg"===r:e.namespaceURI===Xt?"svg"===r&&("annotation-xml"===n||ce[n]):Boolean(pe[r]):t.namespaceURI===Xt?e.namespaceURI===te?"math"===r:e.namespaceURI===Zt?"math"===r&&de[n]:Boolean(he[r]):t.namespaceURI===te&&!(e.namespaceURI===Zt&&!de[n])&&!(e.namespaceURI===Xt&&!ce[n])&&!he[r]&&(ue[r]||!pe[r])},me=function(t){E(r.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){try{t.outerHTML=st}catch(e){t.remove()}}},ge=function(t,e){try{E(r.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){E(r.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!Ot[t])if(Dt||Ht)try{me(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},ye=function(t){var e,r;if(qt)t="<remove></remove>"+t;else{var n=O(t,/^[\r\n\t ]+/);r=n&&n[0]}"application/xhtml+xml"===ft&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var i=it?it.createHTML(t):t;if(ee===te)try{e=(new f).parseFromString(i,ft)}catch(t){}if(!e||!e.documentElement){e=at.createDocument(ee,"template",null);try{e.documentElement.innerHTML=re?"":i}catch(t){}}var o=e.body||e.documentElement;return t&&r&&o.insertBefore(s.createTextNode(r),o.childNodes[0]||null),ee===te?dt.call(e,Ft?"html":"body")[0]:Ft?e.documentElement:o},ve=function(t){return lt.call(t.ownerDocument||t,t,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},be=function(t){return t instanceof h&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof p)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore)},we=function(e){return"object"===t(l)?e instanceof l:e&&"object"===t(e)&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Se=function(t,e,n){ht[t]&&S(ht[t],(function(t){t.call(r,e,n,se)}))},xe=function(t){var e;if(Se("beforeSanitizeElements",t,null),be(t))return me(t),!0;if(I(/[\u0080-\uFFFF]/,t.nodeName))return me(t),!0;var n=mt(t.nodeName);if(Se("uponSanitizeElement",t,{tagName:n,allowedTags:Et}),t.hasChildNodes()&&!we(t.firstElementChild)&&(!we(t.content)||!we(t.content.firstElementChild))&&I(/<[/\w]/g,t.innerHTML)&&I(/<[/\w]/g,t.textContent))return me(t),!0;if("select"===n&&I(/<template/i,t.innerHTML))return me(t),!0;if(!Et[n]||kt[n]){if(!kt[n]&&Ae(n)){if(Tt.tagNameCheck instanceof RegExp&&I(Tt.tagNameCheck,n))return!1;if(Tt.tagNameCheck instanceof Function&&Tt.tagNameCheck(n))return!1}if(Bt&&!Vt[n]){var i=C(t)||t.parentNode,s=w(t)||t.childNodes;if(s&&i)for(var o=s.length-1;o>=0;--o)i.insertBefore(v(s[o],!0),b(t))}return me(t),!0}return t instanceof c&&!fe(t)?(me(t),!0):"noscript"!==n&&"noembed"!==n||!I(/<\/no(script|embed)/i,t.innerHTML)?(_t&&3===t.nodeType&&(e=t.textContent,e=L(e,gt," "),e=L(e,yt," "),t.textContent!==e&&(E(r.removed,{element:t.cloneNode()}),t.textContent=e)),Se("afterSanitizeElements",t,null),!1):(me(t),!0)},Ee=function(t,e,r){if(Nt&&("id"===e||"name"===e)&&(r in s||r in oe))return!1;if(Ct&&!It[e]&&I(vt,e));else if(jt&&I(bt,e));else if(!Ot[e]||It[e]){if(!(Ae(t)&&(Tt.tagNameCheck instanceof RegExp&&I(Tt.tagNameCheck,t)||Tt.tagNameCheck instanceof Function&&Tt.tagNameCheck(t))&&(Tt.attributeNameCheck instanceof RegExp&&I(Tt.attributeNameCheck,e)||Tt.attributeNameCheck instanceof Function&&Tt.attributeNameCheck(e))||"is"===e&&Tt.allowCustomizedBuiltInElements&&(Tt.tagNameCheck instanceof RegExp&&I(Tt.tagNameCheck,r)||Tt.tagNameCheck instanceof Function&&Tt.tagNameCheck(r))))return!1}else if(Jt[e]);else if(I(xt,L(r,St,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==T(r,"data:")||!Yt[t])if(Pt&&!I(wt,L(r,St,"")));else if(r)return!1;return!0},Ae=function(t){return t.indexOf("-")>0},Oe=function(e){var n,i,s,o;Se("beforeSanitizeAttributes",e,null);var a=e.attributes;if(a){var l={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ot};for(o=a.length;o--;){var c=n=a[o],d=c.name,u=c.namespaceURI;if(i="value"===d?n.value:k(n.value),s=mt(d),l.attrName=s,l.attrValue=i,l.keepAttr=!0,l.forceKeepAttr=void 0,Se("uponSanitizeAttribute",e,l),i=l.attrValue,!l.forceKeepAttr&&(ge(d,e),l.keepAttr))if(I(/\/>/i,i))ge(d,e);else{_t&&(i=L(i,gt," "),i=L(i,yt," "));var p=mt(e.nodeName);if(Ee(p,s,i)){if(!zt||"id"!==s&&"name"!==s||(ge(d,e),i=$t+i),it&&"object"===t(g)&&"function"==typeof g.getAttributeType)if(u);else switch(g.getAttributeType(p,s)){case"TrustedHTML":i=it.createHTML(i);break;case"TrustedScriptURL":i=it.createScriptURL(i)}try{u?e.setAttributeNS(u,d,i):e.setAttribute(d,i),x(r.removed)}catch(t){}}}}Se("afterSanitizeAttributes",e,null)}},Le=function t(e){var r,n=ve(e);for(Se("beforeSanitizeShadowDOM",e,null);r=n.nextNode();)Se("uponSanitizeShadowNode",r,null),xe(r)||(r.content instanceof o&&t(r.content),Oe(r));Se("afterSanitizeShadowDOM",e,null)};return r.sanitize=function(i){var s,a,c,d,u,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((re=!i)&&(i="\x3c!--\x3e"),"string"!=typeof i&&!we(i)){if("function"!=typeof i.toString)throw j("toString is not a function");if("string"!=typeof(i=i.toString()))throw j("dirty is not a string, aborting")}if(!r.isSupported){if("object"===t(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof i)return e.toStaticHTML(i);if(we(i))return e.toStaticHTML(i.outerHTML)}return i}if(Mt||le(p),r.removed=[],"string"==typeof i&&(Ut=!1),Ut){if(i.nodeName){var h=mt(i.nodeName);if(!Et[h]||kt[h])throw j("root node is forbidden and cannot be sanitized in-place")}}else if(i instanceof l)1===(a=(s=ye("\x3c!----\x3e")).ownerDocument.importNode(i,!0)).nodeType&&"BODY"===a.nodeName||"HTML"===a.nodeName?s=a:s.appendChild(a);else{if(!Dt&&!_t&&!Ft&&-1===i.indexOf("<"))return it&&Rt?it.createHTML(i):i;if(!(s=ye(i)))return Dt?null:Rt?st:""}s&&qt&&me(s.firstChild);for(var f=ve(Ut?i:s);c=f.nextNode();)3===c.nodeType&&c===d||xe(c)||(c.content instanceof o&&Le(c.content),Oe(c),d=c);if(d=null,Ut)return i;if(Dt){if(Ht)for(u=ct.call(s.ownerDocument);s.firstChild;)u.appendChild(s.firstChild);else u=s;return Ot.shadowroot&&(u=ut.call(n,u,!0)),u}var m=Ft?s.outerHTML:s.innerHTML;return Ft&&Et["!doctype"]&&s.ownerDocument&&s.ownerDocument.doctype&&s.ownerDocument.doctype.name&&I(tt,s.ownerDocument.doctype.name)&&(m="<!DOCTYPE "+s.ownerDocument.doctype.name+">\n"+m),_t&&(m=L(m,gt," "),m=L(m,yt," ")),it&&Rt?it.createHTML(m):m},r.setConfig=function(t){le(t),Mt=!0},r.clearConfig=function(){se=null,Mt=!1},r.isValidAttribute=function(t,e,r){se||le({});var n=mt(t),i=mt(e);return Ee(n,i,r)},r.addHook=function(t,e){"function"==typeof e&&(ht[t]=ht[t]||[],E(ht[t],e))},r.removeHook=function(t){if(ht[t])return x(ht[t])},r.removeHooks=function(t){ht[t]&&(ht[t]=[])},r.removeAllHooks=function(){ht={}},r}return nt()}()},5677:t=>{var e={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==e.call(t)}},4029:(t,e,r)=>{"use strict";var n=r(5320),i=Object.prototype.toString,s=Object.prototype.hasOwnProperty,o=function(t,e,r){for(var n=0,i=t.length;n<i;n++)s.call(t,n)&&(null==r?e(t[n],n,t):e.call(r,t[n],n,t))},a=function(t,e,r){for(var n=0,i=t.length;n<i;n++)null==r?e(t.charAt(n),n,t):e.call(r,t.charAt(n),n,t)},l=function(t,e,r){for(var n in t)s.call(t,n)&&(null==r?e(t[n],n,t):e.call(r,t[n],n,t))};t.exports=function(t,e,r){if(!n(e))throw new TypeError("iterator must be a function");var s;arguments.length>=3&&(s=r),"[object Array]"===i.call(t)?o(t,e,s):"string"==typeof t?a(t,e,s):l(t,e,s)}},7648:t=>{"use strict";var e="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,n=Object.prototype.toString,i="[object Function]";t.exports=function(t){var s=this;if("function"!=typeof s||n.call(s)!==i)throw new TypeError(e+s);for(var o,a=r.call(arguments,1),l=function(){if(this instanceof o){var e=s.apply(this,a.concat(r.call(arguments)));return Object(e)===e?e:this}return s.apply(t,a.concat(r.call(arguments)))},c=Math.max(0,s.length-a.length),d=[],u=0;u<c;u++)d.push("$"+u);if(o=Function("binder","return function ("+d.join(",")+"){ return binder.apply(this,arguments); }")(l),s.prototype){var p=function(){};p.prototype=s.prototype,o.prototype=new p,p.prototype=null}return o}},8612:(t,e,r)=>{"use strict";var n=r(7648);t.exports=Function.prototype.bind||n},5972:t=>{"use strict";var e=function(){return"string"==typeof function(){}.name},r=Object.getOwnPropertyDescriptor;if(r)try{r([],"length")}catch(t){r=null}e.functionsHaveConfigurableNames=function(){if(!e()||!r)return!1;var t=r((function(){}),"name");return!!t&&!!t.configurable};var n=Function.prototype.bind;e.boundFunctionsHaveNames=function(){return e()&&"function"==typeof n&&""!==function(){}.bind().name},t.exports=e},210:(t,e,r)=>{"use strict";var n,i=SyntaxError,s=Function,o=TypeError,a=function(t){try{return s('"use strict"; return ('+t+").constructor;")()}catch(t){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(t){l=null}var c=function(){throw new o},d=l?function(){try{return c}catch(t){try{return l(arguments,"callee").get}catch(t){return c}}}():c,u=r(1405)(),p=Object.getPrototypeOf||function(t){return t.__proto__},h={},f="undefined"==typeof Uint8Array?n:p(Uint8Array),m={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":u?p([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":h,"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":h,"%AsyncIteratorPrototype%":h,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":s,"%GeneratorFunction%":h,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":u?p(p([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&u?p((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&u?p((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":u?p(""[Symbol.iterator]()):n,"%Symbol%":u?Symbol:n,"%SyntaxError%":i,"%ThrowTypeError%":d,"%TypedArray%":f,"%TypeError%":o,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet},g=function t(e){var r;if("%AsyncFunction%"===e)r=a("async function () {}");else if("%GeneratorFunction%"===e)r=a("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=a("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var i=t("%AsyncGenerator%");i&&(r=p(i.prototype))}return m[e]=r,r},y={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},v=r(8612),b=r(7642),w=v.call(Function.call,Array.prototype.concat),S=v.call(Function.apply,Array.prototype.splice),x=v.call(Function.call,String.prototype.replace),E=v.call(Function.call,String.prototype.slice),A=v.call(Function.call,RegExp.prototype.exec),O=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,L=/\\(\\)?/g,T=function(t){var e=E(t,0,1),r=E(t,-1);if("%"===e&&"%"!==r)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new i("invalid intrinsic syntax, expected opening `%`");var n=[];return x(t,O,(function(t,e,r,i){n[n.length]=r?x(i,L,"$1"):e||t})),n},k=function(t,e){var r,n=t;if(b(y,n)&&(n="%"+(r=y[n])[0]+"%"),b(m,n)){var s=m[n];if(s===h&&(s=g(n)),void 0===s&&!e)throw new o("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:s}}throw new i("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new o('"allowMissing" argument must be a boolean');if(null===A(/^%?[^%]*%?$/,t))throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=T(t),n=r.length>0?r[0]:"",s=k("%"+n+"%",e),a=s.name,c=s.value,d=!1,u=s.alias;u&&(n=u[0],S(r,w([0,1],u)));for(var p=1,h=!0;p<r.length;p+=1){var f=r[p],g=E(f,0,1),y=E(f,-1);if(('"'===g||"'"===g||"`"===g||'"'===y||"'"===y||"`"===y)&&g!==y)throw new i("property names with quotes must have matching quotes");if("constructor"!==f&&h||(d=!0),b(m,a="%"+(n+="."+f)+"%"))c=m[a];else if(null!=c){if(!(f in c)){if(!e)throw new o("base intrinsic for "+t+" exists, but the property is not available.");return}if(l&&p+1>=r.length){var v=l(c,f);c=(h=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:c[f]}else h=b(c,f),c=c[f];h&&!d&&(m[a]=c)}}return c}},932:t=>{"use strict";var e="undefined"!=typeof BigInt&&BigInt;t.exports=function(){return"function"==typeof e&&"function"==typeof BigInt&&"bigint"==typeof e(42)&&"bigint"==typeof BigInt(42)}},1044:(t,e,r)=>{"use strict";var n=r(210)("%Object.defineProperty%",!0),i=function(){if(n)try{return n({},"a",{value:1}),!0}catch(t){return!1}return!1};i.hasArrayLengthDefineBug=function(){if(!i())return null;try{return 1!==n([],"length",{value:1}).length}catch(t){return!0}},t.exports=i},1405:(t,e,r)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,i=r(5419);t.exports=function(){return"function"==typeof n&&("function"==typeof Symbol&&("symbol"==typeof n("foo")&&("symbol"==typeof Symbol("bar")&&i())))}},5419:t=>{"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},6410:(t,e,r)=>{"use strict";var n=r(5419);t.exports=function(){return n()&&!!Symbol.toStringTag}},7642:(t,e,r)=>{"use strict";var n=r(8612);t.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},2584:(t,e,r)=>{"use strict";var n=r(6410)(),i=r(1924)("Object.prototype.toString"),s=function(t){return!(n&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===i(t)},o=function(t){return!!s(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==i(t)&&"[object Function]"===i(t.callee)},a=function(){return s(arguments)}();s.isLegacyArguments=o,t.exports=a?s:o},3376:(t,e,r)=>{"use strict";if(r(932)()){var n=BigInt.prototype.valueOf;t.exports=function(t){return null!=t&&"boolean"!=typeof t&&"string"!=typeof t&&"number"!=typeof t&&"symbol"!=typeof t&&"function"!=typeof t&&("bigint"==typeof t||function(t){try{return n.call(t),!0}catch(t){}return!1}(t))}}else t.exports=function(t){return!1}},6814:(t,e,r)=>{"use strict";var n=r(1924),i=n("Boolean.prototype.toString"),s=n("Object.prototype.toString"),o=r(6410)();t.exports=function(t){return"boolean"==typeof t||null!==t&&"object"==typeof t&&(o&&Symbol.toStringTag in t?function(t){try{return i(t),!0}catch(t){return!1}}(t):"[object Boolean]"===s(t))}},5320:t=>{"use strict";var e,r,n=Function.prototype.toString,i="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof i&&"function"==typeof Object.defineProperty)try{e=Object.defineProperty({},"length",{get:function(){throw r}}),r={},i((function(){throw 42}),null,e)}catch(t){t!==r&&(i=null)}else i=null;var s=/^\s*class\b/,o=function(t){try{var e=n.call(t);return s.test(e)}catch(t){return!1}},a=function(t){try{return!o(t)&&(n.call(t),!0)}catch(t){return!1}},l=Object.prototype.toString,c="function"==typeof Symbol&&!!Symbol.toStringTag,d=!(0 in[,]),u=function(){return!1};if("object"==typeof document){var p=document.all;l.call(p)===l.call(document.all)&&(u=function(t){if((d||!t)&&(void 0===t||"object"==typeof t))try{var e=l.call(t);return("[object HTMLAllCollection]"===e||"[object Object]"===e)&&null==t("")}catch(t){}return!1})}t.exports=i?function(t){if(u(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;try{i(t,null,e)}catch(t){if(t!==r)return!1}return!o(t)}:function(t){if(u(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(c)return a(t);if(o(t))return!1;var e=l.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e||a(t)}},8923:(t,e,r)=>{"use strict";var n=Date.prototype.getDay,i=Object.prototype.toString,s=r(6410)();t.exports=function(t){return"object"==typeof t&&null!==t&&(s?function(t){try{return n.call(t),!0}catch(t){return!1}}(t):"[object Date]"===i.call(t))}},8379:t=>{"use strict";var e,r="function"==typeof Map&&Map.prototype?Map:null,n="function"==typeof Set&&Set.prototype?Set:null;r||(e=function(t){return!1});var i=r?Map.prototype.has:null,s=n?Set.prototype.has:null;e||i||(e=function(t){return!1}),t.exports=e||function(t){if(!t||"object"!=typeof t)return!1;try{if(i.call(t),s)try{s.call(t)}catch(t){return!0}return t instanceof r}catch(t){}return!1}},4578:(t,e,r)=>{"use strict";var n=Number.prototype.toString,i=Object.prototype.toString,s=r(6410)();t.exports=function(t){return"number"==typeof t||"object"==typeof t&&(s?function(t){try{return n.call(t),!0}catch(t){return!1}}(t):"[object Number]"===i.call(t))}},8420:(t,e,r)=>{"use strict";var n,i,s,o,a=r(1924),l=r(6410)();if(l){n=a("Object.prototype.hasOwnProperty"),i=a("RegExp.prototype.exec"),s={};var c=function(){throw s};o={toString:c,valueOf:c},"symbol"==typeof Symbol.toPrimitive&&(o[Symbol.toPrimitive]=c)}var d=a("Object.prototype.toString"),u=Object.getOwnPropertyDescriptor;t.exports=l?function(t){if(!t||"object"!=typeof t)return!1;var e=u(t,"lastIndex");if(!(e&&n(e,"value")))return!1;try{i(t,o)}catch(t){return t===s}}:function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===d(t)}},9572:t=>{"use strict";var e,r="function"==typeof Map&&Map.prototype?Map:null,n="function"==typeof Set&&Set.prototype?Set:null;n||(e=function(t){return!1});var i=r?Map.prototype.has:null,s=n?Set.prototype.has:null;e||s||(e=function(t){return!1}),t.exports=e||function(t){if(!t||"object"!=typeof t)return!1;try{if(s.call(t),i)try{i.call(t)}catch(t){return!0}return t instanceof n}catch(t){}return!1}},9981:(t,e,r)=>{"use strict";var n=String.prototype.valueOf,i=Object.prototype.toString,s=r(6410)();t.exports=function(t){return"string"==typeof t||"object"==typeof t&&(s?function(t){try{return n.call(t),!0}catch(t){return!1}}(t):"[object String]"===i.call(t))}},2636:(t,e,r)=>{"use strict";var n=Object.prototype.toString;if(r(1405)()){var i=Symbol.prototype.toString,s=/^Symbol\(.*\)$/;t.exports=function(t){if("symbol"==typeof t)return!0;if("[object Symbol]"!==n.call(t))return!1;try{return function(t){return"symbol"==typeof t.valueOf()&&s.test(i.call(t))}(t)}catch(t){return!1}}}else t.exports=function(t){return!1}},5692:(t,e,r)=>{"use strict";var n=r(4029),i=r(3083),s=r(1924),o=s("Object.prototype.toString"),a=r(6410)(),l="undefined"==typeof globalThis?r.g:globalThis,c=i(),d=s("Array.prototype.indexOf",!0)||function(t,e){for(var r=0;r<t.length;r+=1)if(t[r]===e)return r;return-1},u=s("String.prototype.slice"),p={},h=r(882),f=Object.getPrototypeOf;a&&h&&f&&n(c,(function(t){var e=new l[t];if(Symbol.toStringTag in e){var r=f(e),n=h(r,Symbol.toStringTag);if(!n){var i=f(r);n=h(i,Symbol.toStringTag)}p[t]=n.get}}));t.exports=function(t){if(!t||"object"!=typeof t)return!1;if(!a||!(Symbol.toStringTag in t)){var e=u(o(t),8,-1);return d(c,e)>-1}return!!h&&function(t){var e=!1;return n(p,(function(r,n){if(!e)try{e=r.call(t)===n}catch(t){}})),e}(t)}},1718:t=>{"use strict";var e,r="function"==typeof WeakMap&&WeakMap.prototype?WeakMap:null,n="function"==typeof WeakSet&&WeakSet.prototype?WeakSet:null;r||(e=function(t){return!1});var i=r?r.prototype.has:null,s=n?n.prototype.has:null;e||i||(e=function(t){return!1}),t.exports=e||function(t){if(!t||"object"!=typeof t)return!1;try{if(i.call(t,i),s)try{s.call(t,s)}catch(t){return!0}return t instanceof r}catch(t){}return!1}},5899:(t,e,r)=>{"use strict";var n=r(210),i=r(1924),s=n("%WeakSet%",!0),o=i("WeakSet.prototype.has",!0);if(o){var a=i("WeakMap.prototype.has",!0);t.exports=function(t){if(!t||"object"!=typeof t)return!1;try{if(o(t,o),a)try{a(t,a)}catch(t){return!0}return t instanceof s}catch(t){}return!1}}else t.exports=function(t){return!1}},1655:()=>{},3583:()=>{},631:(t,e,r)=>{var n="function"==typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,s=n&&i&&"function"==typeof i.get?i.get:null,o=n&&Map.prototype.forEach,a="function"==typeof Set&&Set.prototype,l=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=a&&l&&"function"==typeof l.get?l.get:null,d=a&&Set.prototype.forEach,u="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,p="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,h="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,f=Boolean.prototype.valueOf,m=Object.prototype.toString,g=Function.prototype.toString,y=String.prototype.match,v=String.prototype.slice,b=String.prototype.replace,w=String.prototype.toUpperCase,S=String.prototype.toLowerCase,x=RegExp.prototype.test,E=Array.prototype.concat,A=Array.prototype.join,O=Array.prototype.slice,L=Math.floor,T="function"==typeof BigInt?BigInt.prototype.valueOf:null,k=Object.getOwnPropertySymbols,I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,j="function"==typeof Symbol&&"object"==typeof Symbol.iterator,C="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===j||"symbol")?Symbol.toStringTag:null,P=Object.prototype.propertyIsEnumerable,_=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function F(t,e){if(t===1/0||t===-1/0||t!=t||t&&t>-1e3&&t<1e3||x.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof t){var n=t<0?-L(-t):L(t);if(n!==t){var i=String(n),s=v.call(e,i.length+1);return b.call(i,r,"$&_")+"."+b.call(b.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return b.call(e,r,"$&_")}var M=r(4654),q=M.custom,D=$(q)?q:null;function H(t,e,r){var n="double"===(r.quoteStyle||e)?'"':"'";return n+t+n}function R(t){return b.call(String(t),/"/g,"&quot;")}function N(t){return!("[object Array]"!==W(t)||C&&"object"==typeof t&&C in t)}function z(t){return!("[object RegExp]"!==W(t)||C&&"object"==typeof t&&C in t)}function $(t){if(j)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!I)return!1;try{return I.call(t),!0}catch(t){}return!1}t.exports=function t(e,r,n,i){var a=r||{};if(U(a,"quoteStyle")&&"single"!==a.quoteStyle&&"double"!==a.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(U(a,"maxStringLength")&&("number"==typeof a.maxStringLength?a.maxStringLength<0&&a.maxStringLength!==1/0:null!==a.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var l=!U(a,"customInspect")||a.customInspect;if("boolean"!=typeof l&&"symbol"!==l)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(U(a,"indent")&&null!==a.indent&&"\t"!==a.indent&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(U(a,"numericSeparator")&&"boolean"!=typeof a.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var m=a.numericSeparator;if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return G(e,a);if("number"==typeof e){if(0===e)return 1/0/e>0?"0":"-0";var w=String(e);return m?F(e,w):w}if("bigint"==typeof e){var x=String(e)+"n";return m?F(e,x):x}var L=void 0===a.depth?5:a.depth;if(void 0===n&&(n=0),n>=L&&L>0&&"object"==typeof e)return N(e)?"[Array]":"[Object]";var k=function(t,e){var r;if("\t"===t.indent)r="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;r=A.call(Array(t.indent+1)," ")}return{base:r,prev:A.call(Array(e+1),r)}}(a,n);if(void 0===i)i=[];else if(V(i,e)>=0)return"[Circular]";function q(e,r,s){if(r&&(i=O.call(i)).push(r),s){var o={depth:a.depth};return U(a,"quoteStyle")&&(o.quoteStyle=a.quoteStyle),t(e,o,n+1,i)}return t(e,a,n+1,i)}if("function"==typeof e&&!z(e)){var B=function(t){if(t.name)return t.name;var e=y.call(g.call(t),/^function\s*([\w$]+)/);if(e)return e[1];return null}(e),Y=Z(e,q);return"[Function"+(B?": "+B:" (anonymous)")+"]"+(Y.length>0?" { "+A.call(Y,", ")+" }":"")}if($(e)){var tt=j?b.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):I.call(e);return"object"!=typeof e||j?tt:K(tt)}if(function(t){if(!t||"object"!=typeof t)return!1;if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement)return!0;return"string"==typeof t.nodeName&&"function"==typeof t.getAttribute}(e)){for(var et="<"+S.call(String(e.nodeName)),rt=e.attributes||[],nt=0;nt<rt.length;nt++)et+=" "+rt[nt].name+"="+H(R(rt[nt].value),"double",a);return et+=">",e.childNodes&&e.childNodes.length&&(et+="..."),et+="</"+S.call(String(e.nodeName))+">"}if(N(e)){if(0===e.length)return"[]";var it=Z(e,q);return k&&!function(t){for(var e=0;e<t.length;e++)if(V(t[e],"\n")>=0)return!1;return!0}(it)?"["+X(it,k)+"]":"[ "+A.call(it,", ")+" ]"}if(function(t){return!("[object Error]"!==W(t)||C&&"object"==typeof t&&C in t)}(e)){var st=Z(e,q);return"cause"in Error.prototype||!("cause"in e)||P.call(e,"cause")?0===st.length?"["+String(e)+"]":"{ ["+String(e)+"] "+A.call(st,", ")+" }":"{ ["+String(e)+"] "+A.call(E.call("[cause]: "+q(e.cause),st),", ")+" }"}if("object"==typeof e&&l){if(D&&"function"==typeof e[D]&&M)return M(e,{depth:L-n});if("symbol"!==l&&"function"==typeof e.inspect)return e.inspect()}if(function(t){if(!s||!t||"object"!=typeof t)return!1;try{s.call(t);try{c.call(t)}catch(t){return!0}return t instanceof Map}catch(t){}return!1}(e)){var ot=[];return o.call(e,(function(t,r){ot.push(q(r,e,!0)+" => "+q(t,e))})),Q("Map",s.call(e),ot,k)}if(function(t){if(!c||!t||"object"!=typeof t)return!1;try{c.call(t);try{s.call(t)}catch(t){return!0}return t instanceof Set}catch(t){}return!1}(e)){var at=[];return d.call(e,(function(t){at.push(q(t,e))})),Q("Set",c.call(e),at,k)}if(function(t){if(!u||!t||"object"!=typeof t)return!1;try{u.call(t,u);try{p.call(t,p)}catch(t){return!0}return t instanceof WeakMap}catch(t){}return!1}(e))return J("WeakMap");if(function(t){if(!p||!t||"object"!=typeof t)return!1;try{p.call(t,p);try{u.call(t,u)}catch(t){return!0}return t instanceof WeakSet}catch(t){}return!1}(e))return J("WeakSet");if(function(t){if(!h||!t||"object"!=typeof t)return!1;try{return h.call(t),!0}catch(t){}return!1}(e))return J("WeakRef");if(function(t){return!("[object Number]"!==W(t)||C&&"object"==typeof t&&C in t)}(e))return K(q(Number(e)));if(function(t){if(!t||"object"!=typeof t||!T)return!1;try{return T.call(t),!0}catch(t){}return!1}(e))return K(q(T.call(e)));if(function(t){return!("[object Boolean]"!==W(t)||C&&"object"==typeof t&&C in t)}(e))return K(f.call(e));if(function(t){return!("[object String]"!==W(t)||C&&"object"==typeof t&&C in t)}(e))return K(q(String(e)));if(!function(t){return!("[object Date]"!==W(t)||C&&"object"==typeof t&&C in t)}(e)&&!z(e)){var lt=Z(e,q),ct=_?_(e)===Object.prototype:e instanceof Object||e.constructor===Object,dt=e instanceof Object?"":"null prototype",ut=!ct&&C&&Object(e)===e&&C in e?v.call(W(e),8,-1):dt?"Object":"",pt=(ct||"function"!=typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(ut||dt?"["+A.call(E.call([],ut||[],dt||[]),": ")+"] ":"");return 0===lt.length?pt+"{}":k?pt+"{"+X(lt,k)+"}":pt+"{ "+A.call(lt,", ")+" }"}return String(e)};var B=Object.prototype.hasOwnProperty||function(t){return t in this};function U(t,e){return B.call(t,e)}function W(t){return m.call(t)}function V(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function G(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return G(v.call(t,0,e.maxStringLength),e)+n}return H(b.call(b.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Y),"single",e)}function Y(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+w.call(e.toString(16))}function K(t){return"Object("+t+")"}function J(t){return t+" { ? }"}function Q(t,e,r,n){return t+" ("+e+") {"+(n?X(r,n):A.call(r,", "))+"}"}function X(t,e){if(0===t.length)return"";var r="\n"+e.prev+e.base;return r+A.call(t,","+r)+"\n"+e.prev}function Z(t,e){var r=N(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=U(t,i)?e(t[i],t):""}var s,o="function"==typeof k?k(t):[];if(j){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var l in t)U(t,l)&&(r&&String(Number(l))===l&&l<t.length||j&&s["$"+l]instanceof Symbol||(x.call(/[^\w$]/,l)?n.push(e(l,t)+": "+e(t[l],t)):n.push(l+": "+e(t[l],t))));if("function"==typeof k)for(var c=0;c<o.length;c++)P.call(t,o[c])&&n.push("["+e(o[c])+"]: "+e(t[o[c]],t));return n}},4244:t=>{"use strict";var e=function(t){return t!=t};t.exports=function(t,r){return 0===t&&0===r?1/t==1/r:t===r||!(!e(t)||!e(r))}},609:(t,e,r)=>{"use strict";var n=r(4289),i=r(5559),s=r(4244),o=r(5624),a=r(2281),l=i(o(),Object);n(l,{getPolyfill:o,implementation:s,shim:a}),t.exports=l},5624:(t,e,r)=>{"use strict";var n=r(4244);t.exports=function(){return"function"==typeof Object.is?Object.is:n}},2281:(t,e,r)=>{"use strict";var n=r(5624),i=r(4289);t.exports=function(){var t=n();return i(Object,{is:t},{is:function(){return Object.is!==t}}),t}},8987:(t,e,r)=>{"use strict";var n;if(!Object.keys){var i=Object.prototype.hasOwnProperty,s=Object.prototype.toString,o=r(1414),a=Object.prototype.propertyIsEnumerable,l=!a.call({toString:null},"toString"),c=a.call((function(){}),"prototype"),d=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(t){var e=t.constructor;return e&&e.prototype===t},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!p["$"+t]&&i.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{u(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();n=function(t){var e=null!==t&&"object"==typeof t,r="[object Function]"===s.call(t),n=o(t),a=e&&"[object String]"===s.call(t),p=[];if(!e&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var f=c&&r;if(a&&t.length>0&&!i.call(t,0))for(var m=0;m<t.length;++m)p.push(String(m));if(n&&t.length>0)for(var g=0;g<t.length;++g)p.push(String(g));else for(var y in t)f&&"prototype"===y||!i.call(t,y)||p.push(String(y));if(l)for(var v=function(t){if("undefined"==typeof window||!h)return u(t);try{return u(t)}catch(t){return!1}}(t),b=0;b<d.length;++b)v&&"constructor"===d[b]||!i.call(t,d[b])||p.push(d[b]);return p}}t.exports=n},2215:(t,e,r)=>{"use strict";var n=Array.prototype.slice,i=r(1414),s=Object.keys,o=s?function(t){return s(t)}:r(8987),a=Object.keys;o.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return i(t)?a(n.call(t)):a(t)})}else Object.keys=o;return Object.keys||o},t.exports=o},1414:t=>{"use strict";var e=Object.prototype.toString;t.exports=function(t){var r=e.call(t),n="[object Arguments]"===r;return n||(n="[object Array]"!==r&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===e.call(t.callee)),n}},2837:(t,e,r)=>{"use strict";var n=r(2215),i=r(5419)(),s=r(1924),o=Object,a=s("Array.prototype.push"),l=s("Object.prototype.propertyIsEnumerable"),c=i?Object.getOwnPropertySymbols:null;t.exports=function(t,e){if(null==t)throw new TypeError("target must be an object");var r=o(t);if(1===arguments.length)return r;for(var s=1;s<arguments.length;++s){var d=o(arguments[s]),u=n(d),p=i&&(Object.getOwnPropertySymbols||c);if(p)for(var h=p(d),f=0;f<h.length;++f){var m=h[f];l(d,m)&&a(u,m)}for(var g=0;g<u.length;++g){var y=u[g];if(l(d,y)){var v=d[y];r[y]=v}}}return r}},3533:(t,e,r)=>{"use strict";var n=r(4289),i=r(5559),s=r(2837),o=r(8162),a=r(4489),l=i.apply(o()),c=function(t,e){return l(Object,arguments)};n(c,{getPolyfill:o,implementation:s,shim:a}),t.exports=c},8162:(t,e,r)=>{"use strict";var n=r(2837);t.exports=function(){return Object.assign?function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),r={},n=0;n<e.length;++n)r[e[n]]=e[n];var i=Object.assign({},r),s="";for(var o in i)s+=o;return t!==s}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return"y"===t[1]}return!1}()?n:Object.assign:n}},4489:(t,e,r)=>{"use strict";var n=r(4289),i=r(8162);t.exports=function(){var t=i();return n(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t}},3697:(t,e,r)=>{"use strict";var n=r(5972).functionsHaveConfigurableNames(),i=Object,s=TypeError;t.exports=function(){if(null!=this&&this!==i(this))throw new s("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t},n&&Object.defineProperty&&Object.defineProperty(t.exports,"name",{value:"get flags"})},2847:(t,e,r)=>{"use strict";var n=r(4289),i=r(5559),s=r(3697),o=r(1721),a=r(2753),l=i(o());n(l,{getPolyfill:o,implementation:s,shim:a}),t.exports=l},1721:(t,e,r)=>{"use strict";var n=r(3697),i=r(4289).supportsDescriptors,s=Object.getOwnPropertyDescriptor;t.exports=function(){if(i&&"gim"===/a/gim.flags){var t=s(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var e="",r={};if(Object.defineProperty(r,"hasIndices",{get:function(){e+="d"}}),Object.defineProperty(r,"sticky",{get:function(){e+="y"}}),"dy"===e)return t.get}}return n}},2753:(t,e,r)=>{"use strict";var n=r(4289).supportsDescriptors,i=r(1721),s=Object.getOwnPropertyDescriptor,o=Object.defineProperty,a=TypeError,l=Object.getPrototypeOf,c=/a/;t.exports=function(){if(!n||!l)throw new a("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=i(),e=l(c),r=s(e,"flags");return r&&r.get===t||o(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}},7478:(t,e,r)=>{"use strict";var n=r(210),i=r(1924),s=r(631),o=n("%TypeError%"),a=n("%WeakMap%",!0),l=n("%Map%",!0),c=i("WeakMap.prototype.get",!0),d=i("WeakMap.prototype.set",!0),u=i("WeakMap.prototype.has",!0),p=i("Map.prototype.get",!0),h=i("Map.prototype.set",!0),f=i("Map.prototype.has",!0),m=function(t,e){for(var r,n=t;null!==(r=n.next);n=r)if(r.key===e)return n.next=r.next,r.next=t.next,t.next=r,r};t.exports=function(){var t,e,r,n={assert:function(t){if(!n.has(t))throw new o("Side channel does not contain "+s(t))},get:function(n){if(a&&n&&("object"==typeof n||"function"==typeof n)){if(t)return c(t,n)}else if(l){if(e)return p(e,n)}else if(r)return function(t,e){var r=m(t,e);return r&&r.value}(r,n)},has:function(n){if(a&&n&&("object"==typeof n||"function"==typeof n)){if(t)return u(t,n)}else if(l){if(e)return f(e,n)}else if(r)return function(t,e){return!!m(t,e)}(r,n);return!1},set:function(n,i){a&&n&&("object"==typeof n||"function"==typeof n)?(t||(t=new a),d(t,n,i)):l?(e||(e=new l),h(e,n,i)):(r||(r={key:{},next:null}),function(t,e,r){var n=m(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}}(r,n,i))}};return n}},3379:t=>{"use strict";var e=[];function r(t){for(var r=-1,n=0;n<e.length;n++)if(e[n].identifier===t){r=n;break}return r}function n(t,n){for(var s={},o=[],a=0;a<t.length;a++){var l=t[a],c=n.base?l[0]+n.base:l[0],d=s[c]||0,u="".concat(c," ").concat(d);s[c]=d+1;var p=r(u),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)e[p].references++,e[p].updater(h);else{var f=i(h,n);n.byIndex=a,e.splice(a,0,{identifier:u,updater:f,references:1})}o.push(u)}return o}function i(t,e){var r=e.domAPI(e);r.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;r.update(t=e)}else r.remove()}}t.exports=function(t,i){var s=n(t=t||[],i=i||{});return function(t){t=t||[];for(var o=0;o<s.length;o++){var a=r(s[o]);e[a].references--}for(var l=n(t,i),c=0;c<s.length;c++){var d=r(s[c]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}s=l}}},569:t=>{"use strict";var e={};t.exports=function(t,r){var n=function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},9216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},3565:(t,e,r)=>{"use strict";t.exports=function(t){var e=r.nc;e&&t.setAttribute("nonce",e)}},7795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(r){!function(t,e,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var i=void 0!==r.layer;i&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,i&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var s=r.sourceMap;s&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,r)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},4589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},6031:function(t){t.exports=function(){"use strict";function t(t,e){t.split(/\s+/).forEach((t=>{e(t)}))}class e{constructor(){this._events=void 0,this._events={}}on(e,r){t(e,(t=>{const e=this._events[t]||[];e.push(r),this._events[t]=e}))}off(e,r){var n=arguments.length;0!==n?t(e,(t=>{if(1===n)return void delete this._events[t];const e=this._events[t];void 0!==e&&(e.splice(e.indexOf(r),1),this._events[t]=e)})):this._events={}}trigger(e,...r){var n=this;t(e,(t=>{const e=n._events[t];void 0!==e&&e.forEach((t=>{t.apply(n,r)}))}))}}const r=t=>(t=t.filter(Boolean)).length<2?t[0]||"":1==a(t)?"["+t.join("")+"]":"(?:"+t.join("|")+")",n=t=>{if(!s(t))return t.join("");let e="",r=0;const n=()=>{r>1&&(e+="{"+r+"}")};return t.forEach(((i,s)=>{i!==t[s-1]?(n(),e+=i,r=1):r++})),n(),e},i=t=>{let e=c(t);return r(e)},s=t=>new Set(t).size!==t.length,o=t=>(t+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),a=t=>t.reduce(((t,e)=>Math.max(t,l(e))),0),l=t=>c(t).length,c=t=>Array.from(t),d=t=>{if(1===t.length)return[[t]];let e=[];const r=t.substring(1);return d(r).forEach((function(r){let n=r.slice(0);n[0]=t.charAt(0)+n[0],e.push(n),n=r.slice(0),n.unshift(t.charAt(0)),e.push(n)})),e},u=[[0,65535]];let p,h;const f={},m={"/":"⁄∕",0:"߀",a:"ⱥɐɑ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"ƀɓƃ",c:"ꜿƈȼↄ",d:"đɗɖᴅƌꮷԁɦ",e:"ɛǝᴇɇ",f:"ꝼƒ",g:"ǥɠꞡᵹꝿɢ",h:"ħⱨⱶɥ",i:"ɨı",j:"ɉȷ",k:"ƙⱪꝁꝃꝅꞣ",l:"łƚɫⱡꝉꝇꞁɭ",m:"ɱɯϻ",n:"ꞥƞɲꞑᴎлԉ",o:"øǿɔɵꝋꝍᴑ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ƥᵽꝑꝓꝕρ",q:"ꝗꝙɋ",r:"ɍɽꝛꞧꞃ",s:"ßȿꞩꞅʂ",t:"ŧƭʈⱦꞇ",th:"þ",tz:"ꜩ",u:"ʉ",v:"ʋꝟʌ",vy:"ꝡ",w:"ⱳ",y:"ƴɏỿ",z:"ƶȥɀⱬꝣ",hv:"ƕ"};for(let t in m){let e=m[t]||"";for(let r=0;r<e.length;r++){let n=e.substring(r,r+1);f[n]=t}}const g=new RegExp(Object.keys(f).join("|")+"|[̀-ͯ·ʾʼ]","gu"),y=(t,e="NFKD")=>t.normalize(e),v=t=>c(t).reduce(((t,e)=>t+b(e)),""),b=t=>(t=y(t).toLowerCase().replace(g,(t=>f[t]||"")),y(t,"NFC")),w=t=>{const e={},r=(t,r)=>{const n=e[t]||new Set,s=new RegExp("^"+i(n)+"$","iu");r.match(s)||(n.add(o(r)),e[t]=n)};for(let e of function*(t){for(const[e,r]of t)for(let t=e;t<=r;t++){let e=String.fromCharCode(t),r=v(e);r!=e.toLowerCase()&&(r.length>3||0!=r.length&&(yield{folded:r,composed:e,code_point:t}))}}(t))r(e.folded,e.folded),r(e.folded,e.composed);return e},S=t=>{const e=w(t),n={};let s=[];for(let t in e){let r=e[t];r&&(n[t]=i(r)),t.length>1&&s.push(o(t))}s.sort(((t,e)=>e.length-t.length));const a=r(s);return h=new RegExp("^"+a,"u"),n},x=(t,e=1)=>(e=Math.max(e,t.length-1),r(d(t).map((t=>((t,e=1)=>{let r=0;return t=t.map((t=>(p[t]&&(r+=t.length),p[t]||t))),r>=e?n(t):""})(t,e))))),E=(t,e=!0)=>{let i=t.length>1?1:0;return r(t.map((t=>{let r=[];const s=e?t.length():t.length()-1;for(let e=0;e<s;e++)r.push(x(t.substrs[e]||"",i));return n(r)})))},A=(t,e)=>{for(const r of e){if(r.start!=t.start||r.end!=t.end)continue;if(r.substrs.join("")!==t.substrs.join(""))continue;let e=t.parts;const n=t=>{for(const r of e){if(r.start===t.start&&r.substr===t.substr)return!1;if(1!=t.length&&1!=r.length){if(t.start<r.start&&t.end>r.start)return!0;if(r.start<t.start&&r.end>t.start)return!0}}return!1};if(!(r.parts.filter(n).length>0))return!0}return!1};class O{constructor(){this.parts=[],this.substrs=[],this.start=0,this.end=0}add(t){t&&(this.parts.push(t),this.substrs.push(t.substr),this.start=Math.min(t.start,this.start),this.end=Math.max(t.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(t,e){let r=new O,n=JSON.parse(JSON.stringify(this.parts)),i=n.pop();for(const t of n)r.add(t);let s=e.substr.substring(0,t-i.start),o=s.length;return r.add({start:i.start,end:i.start+o,length:o,substr:s}),r}}const L=t=>{var e;void 0===p&&(p=S(e||u)),t=v(t);let r="",n=[new O];for(let e=0;e<t.length;e++){let i=t.substring(e).match(h);const s=t.substring(e,e+1),o=i?i[0]:null;let a=[],l=new Set;for(const t of n){const r=t.last();if(!r||1==r.length||r.end<=e)if(o){const r=o.length;t.add({start:e,end:e+r,length:r,substr:o}),l.add("1")}else t.add({start:e,end:e+1,length:1,substr:s}),l.add("2");else if(o){let n=t.clone(e,r);const i=o.length;n.add({start:e,end:e+i,length:i,substr:o}),a.push(n)}else l.add("3")}if(a.length>0){a=a.sort(((t,e)=>t.length()-e.length()));for(let t of a)A(t,n)||n.push(t)}else if(e>0&&1==l.size&&!l.has("3")){r+=E(n,!1);let t=new O;const e=n[0];e&&t.add(e.last()),n=[t]}}return r+=E(n,!0),r},T=(t,e)=>{if(t)return t[e]},k=(t,e)=>{if(t){for(var r,n=e.split(".");(r=n.shift())&&(t=t[r]););return t}},I=(t,e,r)=>{var n,i;return t?(t+="",null==e.regex||-1===(i=t.search(e.regex))?0:(n=e.string.length/t.length,0===i&&(n+=.5),n*r)):0},j=(t,e)=>{var r=t[e];if("function"==typeof r)return r;r&&!Array.isArray(r)&&(t[e]=[r])},C=(t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var r in t)t.hasOwnProperty(r)&&e(t[r],r)},P=(t,e)=>"number"==typeof t&&"number"==typeof e?t>e?1:t<e?-1:0:(t=v(t+"").toLowerCase())>(e=v(e+"").toLowerCase())?1:e>t?-1:0;class _{constructor(t,e){this.items=void 0,this.settings=void 0,this.items=t,this.settings=e||{diacritics:!0}}tokenize(t,e,r){if(!t||!t.length)return[];const n=[],i=t.split(/\s+/);var s;return r&&(s=new RegExp("^("+Object.keys(r).map(o).join("|")+"):(.*)$")),i.forEach((t=>{let r,i=null,a=null;s&&(r=t.match(s))&&(i=r[1],t=r[2]),t.length>0&&(a=this.settings.diacritics?L(t)||null:o(t),a&&e&&(a="\\b"+a)),n.push({string:t,regex:a?new RegExp(a,"iu"):null,field:i})})),n}getScoreFunction(t,e){var r=this.prepareSearch(t,e);return this._getScoreFunction(r)}_getScoreFunction(t){const e=t.tokens,r=e.length;if(!r)return function(){return 0};const n=t.options.fields,i=t.weights,s=n.length,o=t.getAttrFn;if(!s)return function(){return 1};const a=1===s?function(t,e){const r=n[0].field;return I(o(e,r),t,i[r]||1)}:function(t,e){var r=0;if(t.field){const n=o(e,t.field);!t.regex&&n?r+=1/s:r+=I(n,t,1)}else C(i,((n,i)=>{r+=I(o(e,i),t,n)}));return r/s};return 1===r?function(t){return a(e[0],t)}:"and"===t.options.conjunction?function(t){var n,i=0;for(let r of e){if((n=a(r,t))<=0)return 0;i+=n}return i/r}:function(t){var n=0;return C(e,(e=>{n+=a(e,t)})),n/r}}getSortFunction(t,e){var r=this.prepareSearch(t,e);return this._getSortFunction(r)}_getSortFunction(t){var e,r=[];const n=this,i=t.options,s=!t.query&&i.sort_empty?i.sort_empty:i.sort;if("function"==typeof s)return s.bind(this);const o=function(e,r){return"$score"===e?r.score:t.getAttrFn(n.items[r.id],e)};if(s)for(let e of s)(t.query||"$score"!==e.field)&&r.push(e);if(t.query){e=!0;for(let t of r)if("$score"===t.field){e=!1;break}e&&r.unshift({field:"$score",direction:"desc"})}else r=r.filter((t=>"$score"!==t.field));return r.length?function(t,e){var n,i;for(let s of r)if(i=s.field,n=("desc"===s.direction?-1:1)*P(o(i,t),o(i,e)))return n;return 0}:null}prepareSearch(t,e){const r={};var n=Object.assign({},e);if(j(n,"sort"),j(n,"sort_empty"),n.fields){j(n,"fields");const t=[];n.fields.forEach((e=>{"string"==typeof e&&(e={field:e,weight:1}),t.push(e),r[e.field]="weight"in e?e.weight:1})),n.fields=t}return{options:n,query:t.toLowerCase().trim(),tokens:this.tokenize(t,n.respect_word_boundaries,r),total:0,items:[],weights:r,getAttrFn:n.nesting?k:T}}search(t,e){var r,n,i=this;n=this.prepareSearch(t,e),e=n.options,t=n.query;const s=e.score||i._getScoreFunction(n);t.length?C(i.items,((t,i)=>{r=s(t),(!1===e.filter||r>0)&&n.items.push({score:r,id:i})})):C(i.items,((t,e)=>{n.items.push({score:1,id:e})}));const o=i._getSortFunction(n);return o&&n.items.sort(o),n.total=n.items.length,"number"==typeof e.limit&&(n.items=n.items.slice(0,e.limit)),n}}const F=(t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var r in t)t.hasOwnProperty(r)&&e(t[r],r)},M=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(q(t)){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},q=t=>"string"==typeof t&&t.indexOf("<")>-1,D=(t,e)=>{var r=document.createEvent("HTMLEvents");r.initEvent(e,!0,!1),t.dispatchEvent(r)},H=(t,e)=>{Object.assign(t.style,e)},R=(t,...e)=>{var r=z(e);(t=$(t)).map((t=>{r.map((e=>{t.classList.add(e)}))}))},N=(t,...e)=>{var r=z(e);(t=$(t)).map((t=>{r.map((e=>{t.classList.remove(e)}))}))},z=t=>{var e=[];return F(t,(t=>{"string"==typeof t&&(t=t.trim().split(/[\11\12\14\15\40]/)),Array.isArray(t)&&(e=e.concat(t))})),e.filter(Boolean)},$=t=>(Array.isArray(t)||(t=[t]),t),B=(t,e,r)=>{if(!r||r.contains(t))for(;t&&t.matches;){if(t.matches(e))return t;t=t.parentNode}},U=(t,e=0)=>e>0?t[t.length-1]:t[0],W=(t,e)=>{if(!t)return-1;e=e||t.nodeName;for(var r=0;t=t.previousElementSibling;)t.matches(e)&&r++;return r},V=(t,e)=>{F(e,((e,r)=>{null==e?t.removeAttribute(r):t.setAttribute(r,""+e)}))},G=(t,e)=>{t.parentNode&&t.parentNode.replaceChild(e,t)},Y=(t,e)=>{if(null===e)return;if("string"==typeof e){if(!e.length)return;e=new RegExp(e,"i")}const r=t=>3===t.nodeType?(t=>{var r=t.data.match(e);if(r&&t.data.length>0){var n=document.createElement("span");n.className="highlight";var i=t.splitText(r.index);i.splitText(r[0].length);var s=i.cloneNode(!0);return n.appendChild(s),G(i,n),1}return 0})(t):((t=>{1!==t.nodeType||!t.childNodes||/(script|style)/i.test(t.tagName)||"highlight"===t.className&&"SPAN"===t.tagName||Array.from(t.childNodes).forEach((t=>{r(t)}))})(t),0);r(t)},K="undefined"!=typeof navigator&&/Mac/.test(navigator.userAgent)?"metaKey":"ctrlKey";var J={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(t){return t.length>0},render:{}};const Q=t=>null==t?null:X(t),X=t=>"boolean"==typeof t?t?"1":"0":t+"",Z=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),tt=(t,e)=>{var r;return function(n,i){var s=this;r&&(s.loading=Math.max(s.loading-1,0),clearTimeout(r)),r=setTimeout((function(){r=null,s.loadedSearches[n]=!0,t.call(s,n,i)}),e)}},et=(t,e,r)=>{var n,i=t.trigger,s={};for(n of(t.trigger=function(){var r=arguments[0];if(-1===e.indexOf(r))return i.apply(t,arguments);s[r]=arguments},r.apply(t,[]),t.trigger=i,e))n in s&&i.apply(t,s[n])},rt=(t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())},nt=(t,e,r,n)=>{t.addEventListener(e,r,n)},it=(t,e)=>!!e&&!!e[t]&&1==(e.altKey?1:0)+(e.ctrlKey?1:0)+(e.shiftKey?1:0)+(e.metaKey?1:0),st=(t,e)=>t.getAttribute("id")||(t.setAttribute("id",e),e),ot=t=>t.replace(/[\\"']/g,"\\$&"),at=(t,e)=>{e&&t.append(e)};function lt(t,e){var r=Object.assign({},J,e),n=r.dataAttr,i=r.labelField,s=r.valueField,o=r.disabledField,a=r.optgroupField,l=r.optgroupLabelField,c=r.optgroupValueField,d=t.tagName.toLowerCase(),u=t.getAttribute("placeholder")||t.getAttribute("data-placeholder");if(!u&&!r.allowEmptyOption){let e=t.querySelector('option[value=""]');e&&(u=e.textContent)}var p,h,f,m,g,y,v={placeholder:u,options:[],optgroups:[],items:[],maxItems:null};return"select"===d?(h=v.options,f={},m=1,g=t=>{var e=Object.assign({},t.dataset),r=n&&e[n];return"string"==typeof r&&r.length&&(e=Object.assign(e,JSON.parse(r))),e},y=(t,e)=>{var n=Q(t.value);if(null!=n&&(n||r.allowEmptyOption)){if(f.hasOwnProperty(n)){if(e){var l=f[n][a];l?Array.isArray(l)?l.push(e):f[n][a]=[l,e]:f[n][a]=e}}else{var c=g(t);c[i]=c[i]||t.textContent,c[s]=c[s]||n,c[o]=c[o]||t.disabled,c[a]=c[a]||e,c.$option=t,f[n]=c,h.push(c)}t.selected&&v.items.push(n)}},v.maxItems=t.hasAttribute("multiple")?null:1,F(t.children,(t=>{var e,r,n;"optgroup"===(p=t.tagName.toLowerCase())?((n=g(e=t))[l]=n[l]||e.getAttribute("label")||"",n[c]=n[c]||m++,n[o]=n[o]||e.disabled,v.optgroups.push(n),r=n[c],F(e.children,(t=>{y(t,r)}))):"option"===p&&y(t)}))):(()=>{const e=t.getAttribute(n);if(e)v.options=JSON.parse(e),F(v.options,(t=>{v.items.push(t[s])}));else{var o=t.value.trim()||"";if(!r.allowEmptyOption&&!o.length)return;const e=o.split(r.delimiter);F(e,(t=>{const e={};e[i]=t,e[s]=t,v.options.push(e)})),v.items=e}})(),Object.assign({},J,v,e)}var ct=0;class dt extends(function(t){return t.plugins={},class extends t{constructor(...t){super(...t),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(e,r){t.plugins[e]={name:e,fn:r}}initializePlugins(t){var e,r;const n=this,i=[];if(Array.isArray(t))t.forEach((t=>{"string"==typeof t?i.push(t):(n.plugins.settings[t.name]=t.options,i.push(t.name))}));else if(t)for(e in t)t.hasOwnProperty(e)&&(n.plugins.settings[e]=t[e],i.push(e));for(;r=i.shift();)n.require(r)}loadPlugin(e){var r=this,n=r.plugins,i=t.plugins[e];if(!t.plugins.hasOwnProperty(e))throw new Error('Unable to find "'+e+'" plugin');n.requested[e]=!0,n.loaded[e]=i.fn.apply(r,[r.plugins.settings[e]||{}]),n.names.push(e)}require(t){var e=this,r=e.plugins;if(!e.plugins.loaded.hasOwnProperty(t)){if(r.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');e.loadPlugin(t)}return r.loaded[t]}}}(e)){constructor(t,e){var r;super(),this.control_input=void 0,this.wrapper=void 0,this.dropdown=void 0,this.control=void 0,this.dropdown_content=void 0,this.focus_node=void 0,this.order=0,this.settings=void 0,this.input=void 0,this.tabIndex=void 0,this.is_select_tag=void 0,this.rtl=void 0,this.inputId=void 0,this._destroy=void 0,this.sifter=void 0,this.isOpen=!1,this.isDisabled=!1,this.isRequired=void 0,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.currentResults=void 0,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],ct++;var n=M(t);if(n.tomselect)throw new Error("Tom Select already initialized on this element");n.tomselect=this,r=(window.getComputedStyle&&window.getComputedStyle(n,null)).getPropertyValue("direction");const i=lt(n,e);this.settings=i,this.input=n,this.tabIndex=n.tabIndex||0,this.is_select_tag="select"===n.tagName.toLowerCase(),this.rtl=/rtl/i.test(r),this.inputId=st(n,"tomselect-"+ct),this.isRequired=n.required,this.sifter=new _(this.options,{diacritics:i.diacritics}),i.mode=i.mode||(1===i.maxItems?"single":"multi"),"boolean"!=typeof i.hideSelected&&(i.hideSelected="multi"===i.mode),"boolean"!=typeof i.hidePlaceholder&&(i.hidePlaceholder="multi"!==i.mode);var s=i.createFilter;"function"!=typeof s&&("string"==typeof s&&(s=new RegExp(s)),s instanceof RegExp?i.createFilter=t=>s.test(t):i.createFilter=t=>this.settings.duplicates||!this.options[t]),this.initializePlugins(i.plugins),this.setupCallbacks(),this.setupTemplates();const o=M("<div>"),a=M("<div>"),l=this._render("dropdown"),c=M('<div role="listbox" tabindex="-1">'),d=this.input.getAttribute("class")||"",u=i.mode;var p;R(o,i.wrapperClass,d,u),R(a,i.controlClass),at(o,a),R(l,i.dropdownClass,u),i.copyClassesToDropdown&&R(l,d),R(c,i.dropdownContentClass),at(l,c),M(i.dropdownParent||o).appendChild(l),q(i.controlInput)?(p=M(i.controlInput),C(["autocorrect","autocapitalize","autocomplete"],(t=>{n.getAttribute(t)&&V(p,{[t]:n.getAttribute(t)})})),p.tabIndex=-1,a.appendChild(p),this.focus_node=p):i.controlInput?(p=M(i.controlInput),this.focus_node=p):(p=M("<input/>"),this.focus_node=a),this.wrapper=o,this.dropdown=l,this.dropdown_content=c,this.control=a,this.control_input=p,this.setup()}setup(){const t=this,e=t.settings,r=t.control_input,n=t.dropdown,i=t.dropdown_content,s=t.wrapper,a=t.control,l=t.input,c=t.focus_node,d={passive:!0},u=t.inputId+"-ts-dropdown";V(i,{id:u}),V(c,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":u});const p=st(c,t.inputId+"-ts-control"),h="label[for='"+(t=>t.replace(/['"\\]/g,"\\$&"))(t.inputId)+"']",f=document.querySelector(h),m=t.focus.bind(t);if(f){nt(f,"click",m),V(f,{for:p});const e=st(f,t.inputId+"-ts-label");V(c,{"aria-labelledby":e}),V(i,{"aria-labelledby":e})}if(s.style.width=l.style.width,t.plugins.names.length){const e="plugin-"+t.plugins.names.join(" plugin-");R([s,n],e)}(null===e.maxItems||e.maxItems>1)&&t.is_select_tag&&V(l,{multiple:"multiple"}),e.placeholder&&V(r,{placeholder:e.placeholder}),!e.splitOn&&e.delimiter&&(e.splitOn=new RegExp("\\s*"+o(e.delimiter)+"+\\s*")),e.load&&e.loadThrottle&&(e.load=tt(e.load,e.loadThrottle)),t.control_input.type=l.type,nt(n,"mousemove",(()=>{t.ignoreHover=!1})),nt(n,"mouseenter",(e=>{var r=B(e.target,"[data-selectable]",n);r&&t.onOptionHover(e,r)}),{capture:!0}),nt(n,"click",(e=>{const r=B(e.target,"[data-selectable]");r&&(t.onOptionSelect(e,r),rt(e,!0))})),nt(a,"click",(e=>{var n=B(e.target,"[data-ts-item]",a);n&&t.onItemSelect(e,n)?rt(e,!0):""==r.value&&(t.onClick(),rt(e,!0))})),nt(c,"keydown",(e=>t.onKeyDown(e))),nt(r,"keypress",(e=>t.onKeyPress(e))),nt(r,"input",(e=>t.onInput(e))),nt(c,"blur",(e=>t.onBlur(e))),nt(c,"focus",(e=>t.onFocus(e))),nt(r,"paste",(e=>t.onPaste(e)));const g=e=>{const i=e.composedPath()[0];if(!s.contains(i)&&!n.contains(i))return t.isFocused&&t.blur(),void t.inputState();i==r&&t.isOpen?e.stopPropagation():rt(e,!0)},y=()=>{t.isOpen&&t.positionDropdown()};nt(document,"mousedown",g),nt(window,"scroll",y,d),nt(window,"resize",y,d),this._destroy=()=>{document.removeEventListener("mousedown",g),window.removeEventListener("scroll",y),window.removeEventListener("resize",y),f&&f.removeEventListener("click",m)},this.revertSettings={innerHTML:l.innerHTML,tabIndex:l.tabIndex},l.tabIndex=-1,l.insertAdjacentElement("afterend",t.wrapper),t.sync(!1),e.items=[],delete e.optgroups,delete e.options,nt(l,"invalid",(()=>{t.isValid&&(t.isValid=!1,t.isInvalid=!0,t.refreshState())})),t.updateOriginalInput(),t.refreshItems(),t.close(!1),t.inputState(),t.isSetup=!0,l.disabled?t.disable():t.enable(),t.on("change",this.onChange),R(l,"tomselected","ts-hidden-accessible"),t.trigger("initialize"),!0===e.preload&&t.preload()}setupOptions(t=[],e=[]){this.addOptions(t),C(e,(t=>{this.registerOptionGroup(t)}))}setupTemplates(){var t=this,e=t.settings.labelField,r=t.settings.optgroupLabelField,n={optgroup:t=>{let e=document.createElement("div");return e.className="optgroup",e.appendChild(t.options),e},optgroup_header:(t,e)=>'<div class="optgroup-header">'+e(t[r])+"</div>",option:(t,r)=>"<div>"+r(t[e])+"</div>",item:(t,r)=>"<div>"+r(t[e])+"</div>",option_create:(t,e)=>'<div class="create">Add <strong>'+e(t.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};t.settings.render=Object.assign({},n,t.settings.render)}setupCallbacks(){var t,e,r={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in r)(e=this.settings[r[t]])&&this.on(t,e)}sync(t=!0){const e=this,r=t?lt(e.input,{delimiter:e.settings.delimiter}):e.settings;e.setupOptions(r.options,r.optgroups),e.setValue(r.items||[],!0),e.lastQuery=null}onClick(){var t=this;if(t.activeItems.length>0)return t.clearActiveItems(),void t.focus();t.isFocused&&t.isOpen?t.blur():t.focus()}onMouseDown(){}onChange(){D(this.input,"input"),D(this.input,"change")}onPaste(t){var e=this;e.isInputHidden||e.isLocked?rt(t):e.settings.splitOn&&setTimeout((()=>{var t=e.inputValue();if(t.match(e.settings.splitOn)){var r=t.trim().split(e.settings.splitOn);C(r,(t=>{Q(t)&&(this.options[t]?e.addItem(t):e.createItem(t))}))}}),0)}onKeyPress(t){var e=this;if(!e.isLocked){var r=String.fromCharCode(t.keyCode||t.which);return e.settings.create&&"multi"===e.settings.mode&&r===e.settings.delimiter?(e.createItem(),void rt(t)):void 0}rt(t)}onKeyDown(t){var e=this;if(e.ignoreHover=!0,e.isLocked)9!==t.keyCode&&rt(t);else{switch(t.keyCode){case 65:if(it(K,t)&&""==e.control_input.value)return rt(t),void e.selectAll();break;case 27:return e.isOpen&&(rt(t,!0),e.close()),void e.clearActiveItems();case 40:if(!e.isOpen&&e.hasOptions)e.open();else if(e.activeOption){let t=e.getAdjacent(e.activeOption,1);t&&e.setActiveOption(t)}return void rt(t);case 38:if(e.activeOption){let t=e.getAdjacent(e.activeOption,-1);t&&e.setActiveOption(t)}return void rt(t);case 13:return void(e.canSelect(e.activeOption)?(e.onOptionSelect(t,e.activeOption),rt(t)):(e.settings.create&&e.createItem()||document.activeElement==e.control_input&&e.isOpen)&&rt(t));case 37:return void e.advanceSelection(-1,t);case 39:return void e.advanceSelection(1,t);case 9:return void(e.settings.selectOnTab&&(e.canSelect(e.activeOption)&&(e.onOptionSelect(t,e.activeOption),rt(t)),e.settings.create&&e.createItem()&&rt(t)));case 8:case 46:return void e.deleteSelection(t)}e.isInputHidden&&!it(K,t)&&rt(t)}}onInput(t){var e=this;if(!e.isLocked){var r=e.inputValue();e.lastValue!==r&&(e.lastValue=r,e.settings.shouldLoad.call(e,r)&&e.load(r),e.refreshOptions(),e.trigger("type",r))}}onOptionHover(t,e){this.ignoreHover||this.setActiveOption(e,!1)}onFocus(t){var e=this,r=e.isFocused;if(e.isDisabled)return e.blur(),void rt(t);e.ignoreFocus||(e.isFocused=!0,"focus"===e.settings.preload&&e.preload(),r||e.trigger("focus"),e.activeItems.length||(e.showInput(),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState())}onBlur(t){if(!1!==document.hasFocus()){var e=this;if(e.isFocused){e.isFocused=!1,e.ignoreFocus=!1;var r=()=>{e.close(),e.setActiveItem(),e.setCaret(e.items.length),e.trigger("blur")};e.settings.create&&e.settings.createOnBlur?e.createItem(null,r):r()}}}onOptionSelect(t,e){var r,n=this;e.parentElement&&e.parentElement.matches("[data-disabled]")||(e.classList.contains("create")?n.createItem(null,(()=>{n.settings.closeAfterSelect&&n.close()})):void 0!==(r=e.dataset.value)&&(n.lastQuery=null,n.addItem(r),n.settings.closeAfterSelect&&n.close(),!n.settings.hideSelected&&t.type&&/click/.test(t.type)&&n.setActiveOption(e)))}canSelect(t){return!!(this.isOpen&&t&&this.dropdown_content.contains(t))}onItemSelect(t,e){var r=this;return!r.isLocked&&"multi"===r.settings.mode&&(rt(t),r.setActiveItem(e,t),!0)}canLoad(t){return!!this.settings.load&&!this.loadedSearches.hasOwnProperty(t)}load(t){const e=this;if(!e.canLoad(t))return;R(e.wrapper,e.settings.loadingClass),e.loading++;const r=e.loadCallback.bind(e);e.settings.load.call(e,t,r)}loadCallback(t,e){const r=this;r.loading=Math.max(r.loading-1,0),r.lastQuery=null,r.clearActiveOption(),r.setupOptions(t,e),r.refreshOptions(r.isFocused&&!r.isInputHidden),r.loading||N(r.wrapper,r.settings.loadingClass),r.trigger("load",t,e)}preload(){var t=this.wrapper.classList;t.contains("preloaded")||(t.add("preloaded"),this.load(""))}setTextboxValue(t=""){var e=this.control_input;e.value!==t&&(e.value=t,D(e,"update"),this.lastValue=t)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(t,e){et(this,e?[]:["change"],(()=>{this.clear(e),this.addItems(t,e)}))}setMaxItems(t){0===t&&(t=null),this.settings.maxItems=t,this.refreshState()}setActiveItem(t,e){var r,n,i,s,o,a,l=this;if("single"!==l.settings.mode){if(!t)return l.clearActiveItems(),void(l.isFocused&&l.showInput());if("click"===(r=e&&e.type.toLowerCase())&&it("shiftKey",e)&&l.activeItems.length){for(a=l.getLastActive(),(i=Array.prototype.indexOf.call(l.control.children,a))>(s=Array.prototype.indexOf.call(l.control.children,t))&&(o=i,i=s,s=o),n=i;n<=s;n++)t=l.control.children[n],-1===l.activeItems.indexOf(t)&&l.setActiveItemClass(t);rt(e)}else"click"===r&&it(K,e)||"keydown"===r&&it("shiftKey",e)?t.classList.contains("active")?l.removeActiveItem(t):l.setActiveItemClass(t):(l.clearActiveItems(),l.setActiveItemClass(t));l.hideInput(),l.isFocused||l.focus()}}setActiveItemClass(t){const e=this,r=e.control.querySelector(".last-active");r&&N(r,"last-active"),R(t,"active last-active"),e.trigger("item_select",t),-1==e.activeItems.indexOf(t)&&e.activeItems.push(t)}removeActiveItem(t){var e=this.activeItems.indexOf(t);this.activeItems.splice(e,1),N(t,"active")}clearActiveItems(){N(this.activeItems,"active"),this.activeItems=[]}setActiveOption(t,e=!0){t!==this.activeOption&&(this.clearActiveOption(),t&&(this.activeOption=t,V(this.focus_node,{"aria-activedescendant":t.getAttribute("id")}),V(t,{"aria-selected":"true"}),R(t,"active"),e&&this.scrollToOption(t)))}scrollToOption(t,e){if(!t)return;const r=this.dropdown_content,n=r.clientHeight,i=r.scrollTop||0,s=t.offsetHeight,o=t.getBoundingClientRect().top-r.getBoundingClientRect().top+i;o+s>n+i?this.scroll(o-n+s,e):o<i&&this.scroll(o,e)}scroll(t,e){const r=this.dropdown_content;e&&(r.style.scrollBehavior=e),r.scrollTop=t,r.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(N(this.activeOption,"active"),V(this.activeOption,{"aria-selected":null})),this.activeOption=null,V(this.focus_node,{"aria-activedescendant":null})}selectAll(){const t=this;if("single"===t.settings.mode)return;const e=t.controlChildren();e.length&&(t.hideInput(),t.close(),t.activeItems=e,C(e,(e=>{t.setActiveItemClass(e)})))}inputState(){var t=this;t.control.contains(t.control_input)&&(V(t.control_input,{placeholder:t.settings.placeholder}),t.activeItems.length>0||!t.isFocused&&t.settings.hidePlaceholder&&t.items.length>0?(t.setTextboxValue(),t.isInputHidden=!0):(t.settings.hidePlaceholder&&t.items.length>0&&V(t.control_input,{placeholder:""}),t.isInputHidden=!1),t.wrapper.classList.toggle("input-hidden",t.isInputHidden))}hideInput(){this.inputState()}showInput(){this.inputState()}inputValue(){return this.control_input.value.trim()}focus(){var t=this;t.isDisabled||(t.ignoreFocus=!0,t.control_input.offsetWidth?t.control_input.focus():t.focus_node.focus(),setTimeout((()=>{t.ignoreFocus=!1,t.onFocus()}),0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())}getSearchOptions(){var t=this.settings,e=t.sortField;return"string"==typeof t.sortField&&(e=[{field:t.sortField}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e,nesting:t.nesting}}search(t){var e,r,n=this,i=this.getSearchOptions();if(n.settings.score&&"function"!=typeof(r=n.settings.score.call(n,t)))throw new Error('Tom Select "score" setting must be a function that returns a function');return t!==n.lastQuery?(n.lastQuery=t,e=n.sifter.search(t,Object.assign(i,{score:r})),n.currentResults=e):e=Object.assign({},n.currentResults),n.settings.hideSelected&&(e.items=e.items.filter((t=>{let e=Q(t.id);return!(e&&-1!==n.items.indexOf(e))}))),e}refreshOptions(t=!0){var e,r,n,i,s,o,a,l,c,d;const u={},p=[];var h=this,f=h.inputValue();const m=f===h.lastQuery||""==f&&null==h.lastQuery;var g,y=h.search(f),v=null,b=h.settings.shouldOpen||!1,w=h.dropdown_content;for(m&&(v=h.activeOption)&&(c=v.closest("[data-group]")),i=y.items.length,"number"==typeof h.settings.maxOptions&&(i=Math.min(i,h.settings.maxOptions)),i>0&&(b=!0),e=0;e<i;e++){let t=y.items[e];if(!t)continue;let i=t.id,a=h.options[i];if(void 0===a)continue;let l=X(i),d=h.getOption(l,!0);for(h.settings.hideSelected||d.classList.toggle("selected",h.items.includes(l)),s=a[h.settings.optgroupField]||"",r=0,n=(o=Array.isArray(s)?s:[s])&&o.length;r<n;r++){s=o[r],h.optgroups.hasOwnProperty(s)||(s="");let t=u[s];void 0===t&&(t=document.createDocumentFragment(),p.push(s)),r>0&&(d=d.cloneNode(!0),V(d,{id:a.$id+"-clone-"+r,"aria-selected":null}),d.classList.add("ts-cloned"),N(d,"active"),h.activeOption&&h.activeOption.dataset.value==i&&c&&c.dataset.group===s.toString()&&(v=d)),t.appendChild(d),u[s]=t}}h.settings.lockOptgroupOrder&&p.sort(((t,e)=>{const r=h.optgroups[t],n=h.optgroups[e];return(r&&r.$order||0)-(n&&n.$order||0)})),a=document.createDocumentFragment(),C(p,(t=>{let e=u[t];if(!e||!e.children.length)return;let r=h.optgroups[t];if(void 0!==r){let t=document.createDocumentFragment(),n=h.render("optgroup_header",r);at(t,n),at(t,e);let i=h.render("optgroup",{group:r,options:t});at(a,i)}else at(a,e)})),w.innerHTML="",at(w,a),h.settings.highlight&&(g=w.querySelectorAll("span.highlight"),Array.prototype.forEach.call(g,(function(t){var e=t.parentNode;e.replaceChild(t.firstChild,t),e.normalize()})),y.query.length&&y.tokens.length&&C(y.tokens,(t=>{Y(w,t.regex)})));var S=t=>{let e=h.render(t,{input:f});return e&&(b=!0,w.insertBefore(e,w.firstChild)),e};if(h.loading?S("loading"):h.settings.shouldLoad.call(h,f)?0===y.items.length&&S("no_results"):S("not_loading"),(l=h.canCreate(f))&&(d=S("option_create")),h.hasOptions=y.items.length>0||l,b){if(y.items.length>0){if(v||"single"!==h.settings.mode||null==h.items[0]||(v=h.getOption(h.items[0])),!w.contains(v)){let t=0;d&&!h.settings.addPrecedence&&(t=1),v=h.selectable()[t]}}else d&&(v=d);t&&!h.isOpen&&(h.open(),h.scrollToOption(v,"auto")),h.setActiveOption(v)}else h.clearActiveOption(),t&&h.isOpen&&h.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(t,e=!1){const r=this;if(Array.isArray(t))return r.addOptions(t,e),!1;const n=Q(t[r.settings.valueField]);return null!==n&&!r.options.hasOwnProperty(n)&&(t.$order=t.$order||++r.order,t.$id=r.inputId+"-opt-"+t.$order,r.options[n]=t,r.lastQuery=null,e&&(r.userOptions[n]=e,r.trigger("option_add",n,t)),n)}addOptions(t,e=!1){C(t,(t=>{this.addOption(t,e)}))}registerOption(t){return this.addOption(t)}registerOptionGroup(t){var e=Q(t[this.settings.optgroupValueField]);return null!==e&&(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)}addOptionGroup(t,e){var r;e[this.settings.optgroupValueField]=t,(r=this.registerOptionGroup(e))&&this.trigger("optgroup_add",r,e)}removeOptionGroup(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.clearCache(),this.trigger("optgroup_remove",t))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(t,e){const r=this;var n,i;const s=Q(t),o=Q(e[r.settings.valueField]);if(null===s)return;const a=r.options[s];if(null==a)return;if("string"!=typeof o)throw new Error("Value must be set in option data");const l=r.getOption(s),c=r.getItem(s);if(e.$order=e.$order||a.$order,delete r.options[s],r.uncacheValue(o),r.options[o]=e,l){if(r.dropdown_content.contains(l)){const t=r._render("option",e);G(l,t),r.activeOption===l&&r.setActiveOption(t)}l.remove()}c&&(-1!==(i=r.items.indexOf(s))&&r.items.splice(i,1,o),n=r._render("item",e),c.classList.contains("active")&&R(n,"active"),G(c,n)),r.lastQuery=null}removeOption(t,e){const r=this;t=X(t),r.uncacheValue(t),delete r.userOptions[t],delete r.options[t],r.lastQuery=null,r.trigger("option_remove",t),r.removeItem(t,e)}clearOptions(t){const e=(t||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();const r={};C(this.options,((t,n)=>{e(t,n)&&(r[n]=t)})),this.options=this.sifter.items=r,this.lastQuery=null,this.trigger("option_clear")}clearFilter(t,e){return this.items.indexOf(e)>=0}getOption(t,e=!1){const r=Q(t);if(null===r)return null;const n=this.options[r];if(null!=n){if(n.$div)return n.$div;if(e)return this._render("option",n)}return null}getAdjacent(t,e,r="option"){var n;if(!t)return null;n="item"==r?this.controlChildren():this.dropdown_content.querySelectorAll("[data-selectable]");for(let r=0;r<n.length;r++)if(n[r]==t)return e>0?n[r+1]:n[r-1];return null}getItem(t){if("object"==typeof t)return t;var e=Q(t);return null!==e?this.control.querySelector(`[data-value="${ot(e)}"]`):null}addItems(t,e){var r=this,n=Array.isArray(t)?t:[t];const i=(n=n.filter((t=>-1===r.items.indexOf(t))))[n.length-1];n.forEach((t=>{r.isPending=t!==i,r.addItem(t,e)}))}addItem(t,e){et(this,e?[]:["change","dropdown_close"],(()=>{var r,n;const i=this,s=i.settings.mode,o=Q(t);if((!o||-1===i.items.indexOf(o)||("single"===s&&i.close(),"single"!==s&&i.settings.duplicates))&&null!==o&&i.options.hasOwnProperty(o)&&("single"===s&&i.clear(e),"multi"!==s||!i.isFull())){if(r=i._render("item",i.options[o]),i.control.contains(r)&&(r=r.cloneNode(!0)),n=i.isFull(),i.items.splice(i.caretPos,0,o),i.insertAtCaret(r),i.isSetup){if(!i.isPending&&i.settings.hideSelected){let t=i.getOption(o),e=i.getAdjacent(t,1);e&&i.setActiveOption(e)}i.isPending||i.settings.closeAfterSelect||i.refreshOptions(i.isFocused&&"single"!==s),0!=i.settings.closeAfterSelect&&i.isFull()?i.close():i.isPending||i.positionDropdown(),i.trigger("item_add",o,r),i.isPending||i.updateOriginalInput({silent:e})}(!i.isPending||!n&&i.isFull())&&(i.inputState(),i.refreshState())}}))}removeItem(t=null,e){const r=this;if(!(t=r.getItem(t)))return;var n,i;const s=t.dataset.value;n=W(t),t.remove(),t.classList.contains("active")&&(i=r.activeItems.indexOf(t),r.activeItems.splice(i,1),N(t,"active")),r.items.splice(n,1),r.lastQuery=null,!r.settings.persist&&r.userOptions.hasOwnProperty(s)&&r.removeOption(s,e),n<r.caretPos&&r.setCaret(r.caretPos-1),r.updateOriginalInput({silent:e}),r.refreshState(),r.positionDropdown(),r.trigger("item_remove",s,t)}createItem(t=null,e=(()=>{})){3===arguments.length&&(e=arguments[2]),"function"!=typeof e&&(e=()=>{});var r,n=this,i=n.caretPos;if(t=t||n.inputValue(),!n.canCreate(t))return e(),!1;n.lock();var s=!1,o=t=>{if(n.unlock(),!t||"object"!=typeof t)return e();var r=Q(t[n.settings.valueField]);if("string"!=typeof r)return e();n.setTextboxValue(),n.addOption(t,!0),n.setCaret(i),n.addItem(r),e(t),s=!0};return r="function"==typeof n.settings.create?n.settings.create.call(this,t,o):{[n.settings.labelField]:t,[n.settings.valueField]:t},s||o(r),!0}refreshItems(){var t=this;t.lastQuery=null,t.isSetup&&t.addItems(t.items),t.updateOriginalInput(),t.refreshState()}refreshState(){const t=this;t.refreshValidityState();const e=t.isFull(),r=t.isLocked;t.wrapper.classList.toggle("rtl",t.rtl);const n=t.wrapper.classList;var i;n.toggle("focus",t.isFocused),n.toggle("disabled",t.isDisabled),n.toggle("required",t.isRequired),n.toggle("invalid",!t.isValid),n.toggle("locked",r),n.toggle("full",e),n.toggle("input-active",t.isFocused&&!t.isInputHidden),n.toggle("dropdown-active",t.isOpen),n.toggle("has-options",(i=t.options,0===Object.keys(i).length)),n.toggle("has-items",t.items.length>0)}refreshValidityState(){var t=this;t.input.validity&&(t.isValid=t.input.validity.valid,t.isInvalid=!t.isValid)}isFull(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems}updateOriginalInput(t={}){const e=this;var r,n;const i=e.input.querySelector('option[value=""]');if(e.is_select_tag){const s=[],o=e.input.querySelectorAll("option:checked").length;function a(t,r,n){return t||(t=M('<option value="'+Z(r)+'">'+Z(n)+"</option>")),t!=i&&e.input.append(t),s.push(t),(t!=i||o>0)&&(t.selected=!0),t}e.input.querySelectorAll("option:checked").forEach((t=>{t.selected=!1})),0==e.items.length&&"single"==e.settings.mode?a(i,"",""):e.items.forEach((t=>{r=e.options[t],n=r[e.settings.labelField]||"",s.includes(r.$option)?a(e.input.querySelector(`option[value="${ot(t)}"]:not(:checked)`),t,n):r.$option=a(r.$option,t,n)}))}else e.input.value=e.getValue();e.isSetup&&(t.silent||e.trigger("change",e.getValue()))}open(){var t=this;t.isLocked||t.isOpen||"multi"===t.settings.mode&&t.isFull()||(t.isOpen=!0,V(t.focus_node,{"aria-expanded":"true"}),t.refreshState(),H(t.dropdown,{visibility:"hidden",display:"block"}),t.positionDropdown(),H(t.dropdown,{visibility:"visible",display:"block"}),t.focus(),t.trigger("dropdown_open",t.dropdown))}close(t=!0){var e=this,r=e.isOpen;t&&(e.setTextboxValue(),"single"===e.settings.mode&&e.items.length&&e.hideInput()),e.isOpen=!1,V(e.focus_node,{"aria-expanded":"false"}),H(e.dropdown,{display:"none"}),e.settings.hideSelected&&e.clearActiveOption(),e.refreshState(),r&&e.trigger("dropdown_close",e.dropdown)}positionDropdown(){if("body"===this.settings.dropdownParent){var t=this.control,e=t.getBoundingClientRect(),r=t.offsetHeight+e.top+window.scrollY,n=e.left+window.scrollX;H(this.dropdown,{width:e.width+"px",top:r+"px",left:n+"px"})}}clear(t){var e=this;if(e.items.length){var r=e.controlChildren();C(r,(t=>{e.removeItem(t,!0)})),e.showInput(),t||e.updateOriginalInput(),e.trigger("clear")}}insertAtCaret(t){const e=this,r=e.caretPos,n=e.control;n.insertBefore(t,n.children[r]||null),e.setCaret(r+1)}deleteSelection(t){var e,r,n,i,s,o=this;e=t&&8===t.keyCode?-1:1,r={start:(s=o.control_input).selectionStart||0,length:(s.selectionEnd||0)-(s.selectionStart||0)};const a=[];if(o.activeItems.length)i=U(o.activeItems,e),n=W(i),e>0&&n++,C(o.activeItems,(t=>a.push(t)));else if((o.isFocused||"single"===o.settings.mode)&&o.items.length){const t=o.controlChildren();let n;e<0&&0===r.start&&0===r.length?n=t[o.caretPos-1]:e>0&&r.start===o.inputValue().length&&(n=t[o.caretPos]),void 0!==n&&a.push(n)}if(!o.shouldDelete(a,t))return!1;for(rt(t,!0),void 0!==n&&o.setCaret(n);a.length;)o.removeItem(a.pop());return o.showInput(),o.positionDropdown(),o.refreshOptions(!1),!0}shouldDelete(t,e){const r=t.map((t=>t.dataset.value));return!(!r.length||"function"==typeof this.settings.onDelete&&!1===this.settings.onDelete(r,e))}advanceSelection(t,e){var r,n,i=this;i.rtl&&(t*=-1),i.inputValue().length||(it(K,e)||it("shiftKey",e)?(n=(r=i.getLastActive(t))?r.classList.contains("active")?i.getAdjacent(r,t,"item"):r:t>0?i.control_input.nextElementSibling:i.control_input.previousElementSibling)&&(n.classList.contains("active")&&i.removeActiveItem(r),i.setActiveItemClass(n)):i.moveCaret(t))}moveCaret(t){}getLastActive(t){let e=this.control.querySelector(".last-active");if(e)return e;var r=this.control.querySelectorAll(".active");return r?U(r,t):void 0}setCaret(t){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.isLocked=!0,this.refreshState()}unlock(){this.isLocked=!1,this.refreshState()}disable(){var t=this;t.input.disabled=!0,t.control_input.disabled=!0,t.focus_node.tabIndex=-1,t.isDisabled=!0,this.close(),t.lock()}enable(){var t=this;t.input.disabled=!1,t.control_input.disabled=!1,t.focus_node.tabIndex=t.tabIndex,t.isDisabled=!1,t.unlock()}destroy(){var t=this,e=t.revertSettings;t.trigger("destroy"),t.off(),t.wrapper.remove(),t.dropdown.remove(),t.input.innerHTML=e.innerHTML,t.input.tabIndex=e.tabIndex,N(t.input,"tomselected","ts-hidden-accessible"),t._destroy(),delete t.input.tomselect}render(t,e){var r,n;const i=this;if("function"!=typeof this.settings.render[t])return null;if(!(n=i.settings.render[t].call(this,e,Z)))return null;if(n=M(n),"option"===t||"option_create"===t?e[i.settings.disabledField]?V(n,{"aria-disabled":"true"}):V(n,{"data-selectable":""}):"optgroup"===t&&(r=e.group[i.settings.optgroupValueField],V(n,{"data-group":r}),e.group[i.settings.disabledField]&&V(n,{"data-disabled":""})),"option"===t||"item"===t){const r=X(e[i.settings.valueField]);V(n,{"data-value":r}),"item"===t?(R(n,i.settings.itemClass),V(n,{"data-ts-item":""})):(R(n,i.settings.optionClass),V(n,{role:"option",id:e.$id}),e.$div=n,i.options[r]=e)}return n}_render(t,e){const r=this.render(t,e);if(null==r)throw"HTMLElement expected";return r}clearCache(){C(this.options,(t=>{t.$div&&(t.$div.remove(),delete t.$div)}))}uncacheValue(t){const e=this.getOption(t);e&&e.remove()}canCreate(t){return this.settings.create&&t.length>0&&this.settings.createFilter.call(this,t)}hook(t,e,r){var n=this,i=n[e];n[e]=function(){var e,s;return"after"===t&&(e=i.apply(n,arguments)),s=r.apply(n,arguments),"instead"===t?s:("before"===t&&(e=i.apply(n,arguments)),e)}}}return dt}()},3679:(t,e,r)=>{"use strict";var n=r(9981),i=r(4578),s=r(6814),o=r(2636),a=r(3376);t.exports=function(t){return null==t||"object"!=typeof t&&"function"!=typeof t?null:n(t)?"String":i(t)?"Number":s(t)?"Boolean":o(t)?"Symbol":a(t)?"BigInt":void 0}},6430:(t,e,r)=>{"use strict";var n=r(4029),i=r(3083),s=r(1924),o=s("Object.prototype.toString"),a=r(6410)(),l="undefined"==typeof globalThis?r.g:globalThis,c=i(),d=s("String.prototype.slice"),u={},p=r(882),h=Object.getPrototypeOf;a&&p&&h&&n(c,(function(t){if("function"==typeof l[t]){var e=new l[t];if(Symbol.toStringTag in e){var r=h(e),n=p(r,Symbol.toStringTag);if(!n){var i=h(r);n=p(i,Symbol.toStringTag)}u[t]=n.get}}}));var f=r(5692);t.exports=function(t){return!!f(t)&&(a&&Symbol.toStringTag in t?function(t){var e=!1;return n(u,(function(r,n){if(!e)try{var i=r.call(t);i===n&&(e=i)}catch(t){}})),e}(t):d(o(t),8,-1))}},4654:()=>{},3083:(t,e,r)=>{"use strict";var n=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],i="undefined"==typeof globalThis?r.g:globalThis;t.exports=function(){for(var t=[],e=0;e<n.length;e++)"function"==typeof i[n[e]]&&(t[t.length]=n[e]);return t}},882:(t,e,r)=>{"use strict";var n=r(210)("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch(t){n=null}t.exports=n},3216:(t,e,r)=>{"use strict";var n=r(2584);if(r(1405)()||r(5419)()){var i=Symbol.iterator;t.exports=function(t){return null!=t&&void 0!==t[i]?t[i]():n(t)?Array.prototype[i].call(t):void 0}}else{var s=r(5677),o=r(9981),a=r(210),l=a("%Map%",!0),c=a("%Set%",!0),d=r(1924),u=d("Array.prototype.push"),p=d("String.prototype.charCodeAt"),h=d("String.prototype.slice"),f=function(t){var e=0;return{next:function(){var r,n=e>=t.length;return n||(r=t[e],e+=1),{done:n,value:r}}}},m=function(t,e){if(s(t)||n(t))return f(t);if(o(t)){var r=0;return{next:function(){var e=function(t,e){if(e+1>=t.length)return e+1;var r=p(t,e);if(r<55296||r>56319)return e+1;var n=p(t,e+1);return n<56320||n>57343?e+1:e+2}(t,r),n=h(t,r,e);return r=e,{done:e>t.length,value:n}}}}return e&&void 0!==t["_es6-shim iterator_"]?t["_es6-shim iterator_"]():void 0};if(l||c){var g=r(8379),y=r(9572),v=d("Map.prototype.forEach",!0),b=d("Set.prototype.forEach",!0);if("undefined"==typeof process||!process.versions||!process.versions.node)var w=d("Map.prototype.iterator",!0),S=d("Set.prototype.iterator",!0),x=function(t){var e=!1;return{next:function(){try{return{done:e,value:e?void 0:t.next()}}catch(t){return e=!0,{done:!0,value:void 0}}}}};var E=d("Map.prototype.@@iterator",!0)||d("Map.prototype._es6-shim iterator_",!0),A=d("Set.prototype.@@iterator",!0)||d("Set.prototype._es6-shim iterator_",!0);t.exports=function(t){return function(t){if(g(t)){if(w)return x(w(t));if(E)return E(t);if(v){var e=[];return v(t,(function(t,r){u(e,[r,t])})),f(e)}}if(y(t)){if(S)return x(S(t));if(A)return A(t);if(b){var r=[];return b(t,(function(t){u(r,t)})),f(r)}}}(t)||m(t)}}else t.exports=function(t){if(null!=t)return m(t,!0)}}},3483:(t,e,r)=>{"use strict";var n=r(8379),i=r(9572),s=r(1718),o=r(5899);t.exports=function(t){if(t&&"object"==typeof t){if(n(t))return"Map";if(i(t))return"Set";if(s(t))return"WeakMap";if(o(t))return"WeakSet"}return!1}}},r={};function n(t){var i=r[t];if(void 0!==i)return i.exports;var s=r[t]={exports:{}};return e[t].call(s.exports,s,s.exports,n),s.exports}n.m=e,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,r)=>(n.f[r](t,e),e)),[])),n.u=t=>"./"+t+".main.js",n.miniCssF=t=>{},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},n.l=(e,r,i,s)=>{if(t[e])t[e].push(r);else{var o,a;if(void 0!==i)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==e){o=d;break}}o||(a=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.src=e),t[e]=[r];var u=(r,n)=>{o.onerror=o.onload=null,clearTimeout(p);var i=t[e];if(delete t[e],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((t=>t(n))),r)return r(n)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),a&&document.head.appendChild(o)}},n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="",(()=>{var t={179:0};n.f.j=(e,r)=>{var i=n.o(t,e)?t[e]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((r,n)=>i=t[e]=[r,n]));r.push(i[2]=s);var o=n.p+n.u(e),a=new Error;n.l(o,(r=>{if(n.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+e+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+e,e)}};var e=(e,r)=>{var i,s,[o,a,l]=r,c=0;if(o.some((e=>0!==t[e]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(e&&e(r);c<o.length;c++)s=o[c],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0},r=self.webpackChunk=self.webpackChunk||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})(),n.nc=void 0,(()=>{"use strict";var t=n(3379),e=n.n(t),r=n(7795),i=n.n(r),s=n(569),o=n.n(s),a=n(3565),l=n.n(a),c=n(9216),d=n.n(c),u=n(4589),p=n.n(u),h=n(1655),f=n.n(h),m={};m.styleTagTransform=p(),m.setAttributes=l(),m.insert=o().bind(null,"head"),m.domAPI=i(),m.insertStyleElement=d();e()(f(),m);f()&&f().locals&&f().locals;var g=n(7856),y=n.n(g);const v=t=>((t=t||{}).headers=t.headers||{},t.headers["X-Requested-With"]="XMLHttpRequest",t.credentials||(t.credentials="same-origin"),t),b=t=>(t+"").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),w=(t,e=!1)=>{const r={"CC0 1.0":["ca","https://creativecommons.org/publicdomain/zero/1.0/"],"CC BY 4.0":["cb","https://creativecommons.org/licenses/by/4.0/"],"CC BY-NC 4.0":["cbn","https://creativecommons.org/licenses/by-nc/4.0/"]};if(r[t])return e?`<a href="${r[t][1]}" target="creative-commons" class="relative"><span class="cc" data-title="${t}">${r[t][0]}</span></a>`:`<span class="cc" data-title="${t}">${r[t][0]}</span>`;switch(t){case"Copyright":return`<span class="txcc"  data-title="${t}">&copy;</span>`;case"not choosen":return`<span data-title="${t}"></span>`}return t},S=(t,e,r=!1)=>{const n=document.createElement("a");n.href=t,n.innerHTML="downloadfilezip",n.download=e,document.body.appendChild(n),n.click()},x="user",E="projid",A="project",O="contact",L="instr",T="taxo",k="taxotree",I="settings",j="help",C="privileges",P="fields",_={danger:"danger",info:"info",warning:"warning",dismiss_selector:"[data-dismiss]",selector:".alert",confirm_selector:".alert-confirm"},F={taxo:T,privileges:C,settings:I},M={hide:"hide",right:"align-right",input:"form-input",selected:"selected",active:"active",modal:"modal",peerchecked:"peer-checked",hidevscroll:"hidevscroll",component:{tabs:{name:"js-tabs"},autocomplete:{tomselected:"tomselected"}}},q={close:".close",projid:"projid",component:{tabs:{ident:"js-tabs",tab:".tab",tabcontent:".tab-content",tabcontrol:".tab-control"},modal:{ident:"js-modal",help:".modal-help",mainhelp:"#main-help",modaltitle:".modal-title",modalimportzone:".modal-title",modalcontent:".modal-content",modalcontainer:".modal-container",popup:".modal-popup"},tomselect:{ident:"js-autocomplete",item:".item",tsdelet:".ts-delet"},import:{zoneimport:".zone-import"}}},D="Please wait...",H="Manage",R={managers:H,viewers:"View",annotators:"Annotate"},N={images:"png,jpeg,jpg,gif",tsv:"txt,tsv"};let z=null;class ${constructor(t=document){return z||(this.init(t),z=this),z}init(t){t.querySelectorAll(_.selector).forEach((t=>{t.dataset;t.classList.contains("js-alerts")?this.build(t.dataset):this.createFrom(t,t.dataset)}))}createFrom(t,e){e.duration?setTimeout((()=>{this.dismissAlert(t.id)}),e.duration):e.dismissible&&this.dismissListener(t.id);return"confirm"!==(e.type?e.type:"warning")||this.waitForAnswer(t.id)}build(t={type:"warning"}){const e=t.codeid&&t.message?document.querySelector(_.selector+'[data-message="'+t.message+'"]'):t.id?document.getElementById(id):null;if(e)return void this.refreshAlert(e.id);let r=t.parent&&t.parent instanceof HTMLElement?t.parent:document.querySelector(t.parent);r=r||document.body,t=Object.assign({title:"",duration:null,buttons:null,dismissible:!1,extra:null,inverse:!0,insertafter:!1,callback:null,replaceparent:!1,template_url:"/gui/alertbox",buttons:{ok:".is-ok",cancel:".is-cancel"}},t),Object.freeze(t);const n=new URLSearchParams;n.append("type",t.type),n.append("title",y().sanitize(void 0===t.title||""===t.title?"":": "+t.title)),n.append("message",y().sanitize(t.message)),n.append("num",r.querySelectorAll(_.selector).length),n.append("inverse",t.inverse),n.append("dismissible",t.dismissible),t.codeid&&n.append("codeid",t.codeid),fetch(t.template_url,v({method:"POST",body:n})).then((t=>t.text())).then((e=>{let n;e=y().sanitize(e);return e=(e=(new DOMParser).parseFromString(e,"text/html")).querySelector(_.selector),!0===t.insertafter?n=r.parentElement.insertBefore(e,r.nextElementSibling):(n=e,r.prepend(n)),this.createFrom(n,t)})).catch((t=>{console.log("err",t)}))}getBoxById(t){return document.getElementById(t)?document.getElementById(t):document.querySelector('[data-message="'+t+'"]')}refreshAlert(t){const e=this.getBoxById(t);if(!e||!e.classList.contains(_.selector.substr(1)))return;const r=window.getComputedStyle(e);e.animate([{transform:"scale(1), scale(1.05)",background:r.color,color:r["background-color"]},{transform:"scale(1.05) scale(1)",background:r["background-color"],color:r.color}],{duration:400,easing:"ease-out",iterations:1})}dismissAlert(t){const e=this.getBoxById(t);e&&e.classList.contains(_.selector.substr(1))&&(e.animate([{transform:"translateY(0), translateY(-100%)"}],{duration:1e3,easing:"ease-out",iterations:1}),setTimeout((()=>{e.remove()}),1e3))}dismissListener(t){const e=this.getBoxById(t);if(!e||!e.classList.contains(_.selector.substr(1)))return;const r=e.querySelector('[data-dismiss="'+_.selector.substr(1)+'"]');r&&r.addEventListener("click",(e=>{this.dismissAlert(t)}))}waitForAnswer(t){const e=this.getBoxById(t);if(!e||!e.classList.contains(css.alert))return;const r=e.querySelector(this.buttons.cancel),n=e.querySelector(this.buttons.ok);return new Promise(((e,i)=>{r.addEventListener("click",(r=>{e(!1),this.dismissAlert(t)}),{once:!0}),n.addEventListener("click",(r=>{e(!0),null!==this.options.callback&&this.options.callback(),this.dismissAlert(t)}),{once:!0})}))}}const B=t=>"[object Object]"===Object.prototype.toString.call(t),U=(t,e)=>{const r=document.createElement(t);if(e&&"object"==typeof e)for(const t in e)"html"===t?r.innerHTML=e[t]:r.setAttribute(t,e[t]);return r},W=t=>{t instanceof NodeList?t.forEach((t=>W(t))):t.innerHTML=""},V=(t,e,r)=>U("li",{class:t,html:`<a href="#" data-page="${e}">${r}</a>`}),G=(t,e)=>{let r,n;1===e?(r=0,n=t.length):-1===e&&(r=t.length-1,n=-1);for(let i=!0;i;){i=!1;for(let s=r;s!=n;s+=e)if(t[s+e]&&t[s].value>t[s+e].value){const r=t[s],n=t[s+e],o=r;t[s]=n,t[s+e]=o,i=!0}}return t};class Y{constructor(t,e){return this.dt=t,this.rows=e,this}build(t){const e=U("tr");let r=this.dt.headings;return r.length||(r=t.map((()=>""))),r.forEach(((r,n)=>{const i=U("td");t[n]&&t[n].length||(t[n]=""),i.innerHTML=t[n],i.data=t[n],e.appendChild(i)})),e}render(t){return t}add(t){if(Array.isArray(t)){const e=this.dt;Array.isArray(t[0])?t.forEach((t=>{e.data.push(this.build(t))})):e.data.push(this.build(t)),e.data.length&&(e.hasRows=!0),this.update(),e.columns().rebuild()}}remove(t){const e=this.dt;Array.isArray(t)?(t.sort(((t,e)=>e-t)),t.forEach((t=>{e.data.splice(t,1)}))):"all"==t?e.data=[]:e.data.splice(t,1),e.data.length||(e.hasRows=!1),this.update(),e.columns().rebuild()}update(){this.dt.data.forEach(((t,e)=>{t.dataIndex=e}))}findRowIndex(t,e){return this.dt.data.findIndex((r=>r.children[t].innerText.toLowerCase().includes(String(e).toLowerCase())))}findRow(t,e){const r=this.findRowIndex(t,e);if(r<0)return{index:-1,row:null,cols:[]};const n=this.dt.data[r];return{index:r,row:n,cols:[...n.cells].map((t=>t.innerHTML))}}updateRow(t,e){const r=this.build(e);this.dt.data.splice(t,1,r),this.update(),this.dt.columns().rebuild()}}class K{constructor(t){return this.dt=t,this}swap(t){if(t.length&&2===t.length){const e=[];this.dt.headings.forEach(((t,r)=>{e.push(r)}));const r=t[0],n=t[1],i=e[n];e[n]=e[r],e[r]=i,this.order(e)}}order(t){let e,r,n,i,s,o,a;const l=[[],[],[],[]],c=this.dt;t.forEach(((t,n)=>{s=c.headings[t],o="false"!==s.getAttribute("data-sortable"),e=s.cloneNode(!0),e.originalCellIndex=n,e.sortable=o,l[0].push(e),c.hiddenColumns.includes(t)||(r=s.cloneNode(!0),r.originalCellIndex=n,r.sortable=o,l[1].push(r))})),c.data.forEach(((e,r)=>{n=e.cloneNode(!1),i=e.cloneNode(!1),n.dataIndex=i.dataIndex=r,null!==e.searchIndex&&void 0!==e.searchIndex&&(n.searchIndex=i.searchIndex=e.searchIndex),t.forEach((t=>{a=e.cells[t].cloneNode(!0),a.data=e.cells[t].data,n.appendChild(a),c.hiddenColumns.includes(t)||(a=e.cells[t].cloneNode(!0),a.data=e.cells[t].data,i.appendChild(a))})),l[2].push(n),l[3].push(i)})),c.headings=l[0],c.activeHeadings=l[1],c.data=l[2],c.activeRows=l[3],c.update()}hide(t){if(t.length){const e=this.dt;t.forEach((t=>{e.hiddenColumns.includes(t)||e.hiddenColumns.push(t)})),this.rebuild()}}show(t){if(t.length){let e;const r=this.dt;t.forEach((t=>{e=r.hiddenColumns.indexOf(t),e>-1&&r.hiddenColumns.splice(e,1)})),this.rebuild()}}visible(t){let e;const r=this.dt;return t=t||r.headings.map((t=>t.originalCellIndex)),isNaN(t)?Array.isArray(t)&&(e=[],t.forEach((t=>{e.push(!r.hiddenColumns.includes(t))}))):e=!r.hiddenColumns.includes(t),e}add(t){let e;const r=document.createElement("th");if(!this.dt.headings.length)return this.dt.insert({headings:[t.heading],data:t.data.map((t=>[t]))}),void this.rebuild();this.dt.hiddenHeader?r.innerHTML="":t.heading.nodeName?r.appendChild(t.heading):r.innerHTML=t.heading,this.dt.headings.push(r),this.dt.data.forEach(((r,n)=>{t.data[n]&&(e=document.createElement("td"),t.data[n].nodeName?e.appendChild(t.data[n]):e.innerHTML=t.data[n],e.data=e.innerHTML,t.render&&(e.innerHTML=t.render.call(this,e.data,e,r)),r.appendChild(e))})),t.type&&r.setAttribute("data-type",t.type),t.format&&r.setAttribute("data-format",t.format),t.hasOwnProperty("sortable")&&(r.sortable=t.sortable,r.setAttribute("data-sortable",!0===t.sortable?"true":"false")),this.rebuild(),this.dt.renderHeader()}remove(t){Array.isArray(t)?(t.sort(((t,e)=>e-t)),t.forEach((t=>this.remove(t)))):(this.dt.headings.splice(t,1),this.dt.data.forEach((e=>{e.removeChild(e.cells[t])}))),this.rebuild()}filter(t,e,r,n){const i=this.dt;if(i.filterState||(i.filterState={originalData:i.data}),!i.filterState[t]){const e=[...n,()=>!0];i.filterState[t]=function(){let t=0;return()=>e[t++%e.length]}()}const s=i.filterState[t](),o=Array.from(i.filterState.originalData).filter((e=>{const r=e.cells[t],n=r.hasAttribute("data-content")?r.getAttribute("data-content"):r.innerText;return"function"==typeof s?s(n):n===s}));i.data=o,i.data.length?(this.rebuild(),i.update()):(i.clear(),i.hasRows=!1,i.setMessage(i.options.labels.noRows)),r||i.emit("datatable.sort",t,e)}sort(t,e,r){const i=this.dt;if(i.hasHeadings&&(t<0||t>i.headings.length))return!1;const s=i.options.filters&&i.options.filters[i.headings[t].textContent];if(s&&0!==s.length)return void this.filter(t,e,r,s);i.sorting=!0,r||i.emit("datatable.sorting",t,e);let o=i.data;const a=[],l=[];let c=0,d=0;const u=i.headings[t],p=[];if("date"===u.getAttribute("data-type")){let t=!1;u.hasAttribute("data-format")&&(t=u.getAttribute("data-format")),p.push(n.e(568).then(n.bind(n,9568)).then((({parseDate:e})=>r=>e(r,t))))}Promise.all(p).then((n=>{const s=n[0];let p,h;Array.from(o).forEach((e=>{const r=e.cells[t],n=r.hasAttribute("data-content")?r.getAttribute("data-content"):r.innerText;let i;i=s?s(n):"string"==typeof n?n.replace(/(\$|,|\s|%)/g,""):n,parseFloat(i)==i?l[d++]={value:Number(i),row:e}:a[c++]={value:"string"==typeof n?n.toLowerCase():n,row:e}})),e||(e=u.classList.contains("asc")?"desc":"asc"),"desc"==e?(p=G(a,-1),h=G(l,-1),u.classList.remove("asc"),u.classList.add("desc")):(p=G(l,1),h=G(a,1),u.classList.remove("desc"),u.classList.add("asc")),i.lastTh&&u!=i.lastTh&&(i.lastTh.classList.remove("desc"),i.lastTh.classList.remove("asc")),i.lastTh=u,o=p.concat(h),i.data=[];const f=[];o.forEach(((t,e)=>{i.data.push(t.row),null!==t.row.searchIndex&&void 0!==t.row.searchIndex&&f.push(e)})),i.searchData=f,this.rebuild(),i.update(),r||i.emit("datatable.sort",t,e)}))}rebuild(){let t,e,r,n;const i=this.dt,s=[];i.activeRows=[],i.activeHeadings=[],i.headings.forEach(((t,e)=>{t.originalCellIndex=e,t.sortable="false"!==t.getAttribute("data-sortable"),i.hiddenColumns.includes(e)||i.activeHeadings.push(t)})),i.data.forEach(((o,a)=>{t=o.cloneNode(!1),e=o.cloneNode(!1),t.dataIndex=e.dataIndex=a,null!==o.searchIndex&&void 0!==o.searchIndex&&(t.searchIndex=e.searchIndex=o.searchIndex),Array.from(o.cells).forEach((s=>{r=s.cloneNode(!0),r.data=s.data,t.appendChild(r),i.hiddenColumns.includes(r.cellIndex)||(n=r.cloneNode(!0),n.data=r.data,e.appendChild(n))})),s.push(t),i.activeRows.push(e)})),i.data=s,i.update()}}const J=function(t){let e=!1,r=!1;if((t=t||this.options.data).headings){e=U("thead");const r=U("tr");t.headings.forEach((t=>{const e=U("th",{html:t});r.appendChild(e)})),e.appendChild(r)}t.data&&t.data.length&&(r=U("tbody"),t.data.forEach((e=>{if(t.headings&&t.headings.length!==e.length)throw new Error("The number of rows do not match the number of headings.");const n=U("tr");e.forEach((t=>{const e=U("td",{html:t});n.appendChild(e)})),r.appendChild(n)}))),e&&(null!==this.dom.tHead&&this.dom.removeChild(this.dom.tHead),this.dom.appendChild(e)),r&&(this.dom.tBodies.length&&this.dom.removeChild(this.dom.tBodies[0]),this.dom.appendChild(r))},Q={sortable:!0,searchable:!0,paging:!0,perPage:10,perPageSelect:[5,10,15,20,25],nextPrev:!0,firstLast:!1,prevText:"&lsaquo;",nextText:"&rsaquo;",firstText:"&laquo;",lastText:"&raquo;",ellipsisText:"&hellip;",ascText:"▴",descText:"▾",truncatePager:!0,pagerDelta:2,scrollY:"",fixedColumns:!0,fixedHeight:!1,header:!0,hiddenHeader:!1,footer:!1,labels:{placeholder:"Search...",perPage:"{select} entries per page",noRows:"No entries found",noResults:"No results match your search query",info:"Showing {start} to {end} of {rows} entries"},layout:{top:"{select}{search}",bottom:"{info}{pager}"}};class X{constructor(t,e={}){const r="string"==typeof t?document.querySelector(t):t;if(this.options={...Q,...e,layout:{...Q.layout,...e.layout},labels:{...Q.labels,...e.labels}},this.initialized=!1,this.initialLayout=r.innerHTML,this.initialSortable=this.options.sortable,this.options.header||(this.options.sortable=!1),null===r.tHead&&(!this.options.data||this.options.data&&!this.options.data.headings)&&(this.options.sortable=!1),r.tBodies.length&&!r.tBodies[0].rows.length&&this.options.data&&!this.options.data.data)throw new Error("You seem to be using the data option, but you've not defined any rows.");this.dom=r,this.table=this.dom,this.listeners={onResize:t=>this.onResize(t)},this.init()}static extend(t,e){"function"==typeof e?X.prototype[t]=e:X[t]=e}init(t){if(this.initialized||this.dom.classList.contains("dataTable-table"))return!1;Object.assign(this.options,t||{}),this.currentPage=1,this.onFirstPage=!0,this.hiddenColumns=[],this.columnRenderers=[],this.selectedColumns=[],this.render(),setTimeout((()=>{this.emit("datatable.init"),this.initialized=!0,this.options.plugins&&Object.entries(this.options.plugins).forEach((([t,e])=>{this[t]&&"function"==typeof this[t]&&(this[t]=this[t](e,{createElement:U}),e.enabled&&this[t].init&&"function"==typeof this[t].init&&this[t].init())}))}),10)}render(t){if(t){switch(t){case"page":this.renderPage();break;case"pager":this.renderPager();break;case"header":this.renderHeader()}return!1}const e=this.options;let r="";if(e.data&&J.call(this),this.body=this.dom.tBodies[0],this.head=this.dom.tHead,this.foot=this.dom.tFoot,this.body||(this.body=U("tbody"),this.dom.appendChild(this.body)),this.hasRows=this.body.rows.length>0,!this.head){const t=U("thead"),r=U("tr");this.hasRows&&(Array.from(this.body.rows[0].cells).forEach((()=>{r.appendChild(U("th"))})),t.appendChild(r)),this.head=t,this.dom.insertBefore(this.head,this.body),this.hiddenHeader=e.hiddenHeader}if(this.headings=[],this.hasHeadings=this.head.rows.length>0,this.hasHeadings&&(this.header=this.head.rows[0],this.headings=[].slice.call(this.header.cells)),e.header||this.head&&this.dom.removeChild(this.dom.tHead),e.footer?this.head&&!this.foot&&(this.foot=U("tfoot",{html:this.head.innerHTML}),this.dom.appendChild(this.foot)):this.foot&&this.dom.removeChild(this.dom.tFoot),this.wrapper=U("div",{class:"dataTable-wrapper dataTable-loading"}),r+="<div class='dataTable-top'>",r+=e.layout.top,r+="</div>",e.scrollY.length?r+=`<div class='dataTable-container' style='height: ${e.scrollY}; overflow-Y: auto;'></div>`:r+="<div class='dataTable-container'></div>",r+="<div class='dataTable-bottom'>",r+=e.layout.bottom,r+="</div>",r=r.replace("{info}",e.paging?"<div class='dataTable-info'></div>":""),e.paging&&e.perPageSelect){let t="<div class='dataTable-dropdown'><label>";t+=e.labels.perPage,t+="</label></div>";const n=U("select",{class:"dataTable-selector"});e.perPageSelect.forEach((t=>{const r=t===e.perPage,i=new Option(t,t,r,r);n.add(i)})),t=t.replace("{select}",n.outerHTML),r=r.replace("{select}",t)}else r=r.replace("{select}","");if(e.searchable){const t=`<div class='dataTable-search'><input class='dataTable-input' placeholder='${e.labels.placeholder}' type='text'></div>`;r=r.replace("{search}",t)}else r=r.replace("{search}","");this.hasHeadings&&this.render("header"),this.dom.classList.add("dataTable-table");const n=U("nav",{class:"dataTable-pagination"}),i=U("ul",{class:"dataTable-pagination-list"});n.appendChild(i),r=r.replace(/\{pager\}/g,n.outerHTML),this.wrapper.innerHTML=r,this.container=this.wrapper.querySelector(".dataTable-container"),this.pagers=this.wrapper.querySelectorAll(".dataTable-pagination-list"),this.label=this.wrapper.querySelector(".dataTable-info"),this.dom.parentNode.replaceChild(this.wrapper,this.dom),this.container.appendChild(this.dom),this.rect=this.dom.getBoundingClientRect(),this.data=Array.from(this.body.rows),this.activeRows=this.data.slice(),this.activeHeadings=this.headings.slice(),this.update(),this.setColumns(),this.fixHeight(),this.fixColumns(),e.header||this.wrapper.classList.add("no-header"),e.footer||this.wrapper.classList.add("no-footer"),e.sortable&&this.wrapper.classList.add("sortable"),e.searchable&&this.wrapper.classList.add("searchable"),e.fixedHeight&&this.wrapper.classList.add("fixed-height"),e.fixedColumns&&this.wrapper.classList.add("fixed-columns"),this.bindEvents()}renderPage(){if(this.hasHeadings&&(W(this.header),this.activeHeadings.forEach((t=>this.header.appendChild(t)))),this.hasRows&&this.totalPages){this.currentPage>this.totalPages&&(this.currentPage=1);const t=this.currentPage-1,e=document.createDocumentFragment();this.pages[t].forEach((t=>e.appendChild(this.rows().render(t)))),this.clear(e),this.onFirstPage=1===this.currentPage,this.onLastPage=this.currentPage===this.lastPage}else this.setMessage(this.options.labels.noRows);let t,e=0,r=0,n=0;if(this.totalPages&&(e=this.currentPage-1,r=e*this.options.perPage,n=r+this.pages[e].length,r+=1,t=this.searching?this.searchData.length:this.data.length),this.label&&this.options.labels.info.length){const e=this.options.labels.info.replace("{start}",r).replace("{end}",n).replace("{page}",this.currentPage).replace("{pages}",this.totalPages).replace("{rows}",t);this.label.innerHTML=t?e:""}1==this.currentPage&&this.fixHeight()}renderPager(){if(W(this.pagers),this.totalPages>1){const t="pager",e=document.createDocumentFragment(),r=this.onFirstPage?1:this.currentPage-1,n=this.onLastPage?this.totalPages:this.currentPage+1;this.options.firstLast&&e.appendChild(V(t,1,this.options.firstText)),this.options.nextPrev&&!this.onFirstPage&&e.appendChild(V(t,r,this.options.prevText));let i=this.links;this.options.truncatePager&&(i=((t,e,r,n,i)=>{let s;const o=2*(n=n||2);let a=e-n,l=e+n;const c=[],d=[];e<4-n+o?l=3+o:e>r-(3-n+o)&&(a=r-(2+o));for(let e=1;e<=r;e++)if(1==e||e==r||e>=a&&e<=l){const r=t[e-1];r.classList.remove("active"),c.push(r)}return c.forEach((e=>{const r=e.children[0].getAttribute("data-page");if(s){const e=s.children[0].getAttribute("data-page");if(r-e==2)d.push(t[e]);else if(r-e!=1){const t=U("li",{class:"ellipsis",html:`<a href="#">${i}</a>`});d.push(t)}}d.push(e),s=e})),d})(this.links,this.currentPage,this.pages.length,this.options.pagerDelta,this.options.ellipsisText)),this.links[this.currentPage-1].classList.add("active"),i.forEach((t=>{t.classList.remove("active"),e.appendChild(t)})),this.links[this.currentPage-1].classList.add("active"),this.options.nextPrev&&!this.onLastPage&&e.appendChild(V(t,n,this.options.nextText)),this.options.firstLast&&e.appendChild(V(t,this.totalPages,this.options.lastText)),this.pagers.forEach((t=>{t.appendChild(e.cloneNode(!0))}))}}renderHeader(){this.labels=[],this.headings&&this.headings.length&&this.headings.forEach(((t,e)=>{if(this.labels[e]=t.textContent,t.firstElementChild&&t.firstElementChild.classList.contains("dataTable-sorter")&&(t.innerHTML=t.firstElementChild.innerHTML),t.sortable="false"!==t.getAttribute("data-sortable"),t.originalCellIndex=e,this.options.sortable&&t.sortable){const e=U("a",{href:"#",class:"dataTable-sorter",html:t.innerHTML});t.innerHTML="",t.setAttribute("data-sortable",""),t.appendChild(e)}})),this.fixColumns()}bindEvents(){const t=this.options;if(t.perPageSelect){const e=this.wrapper.querySelector(".dataTable-selector");e&&e.addEventListener("change",(()=>{t.perPage=parseInt(e.value,10),this.update(),this.fixHeight(),this.emit("datatable.perpage",t.perPage)}),!1)}t.searchable&&(this.input=this.wrapper.querySelector(".dataTable-input"),this.input&&this.input.addEventListener("keyup",(()=>this.search(this.input.value)),!1)),this.wrapper.addEventListener("click",(e=>{const r=e.target.closest("a");r&&"a"===r.nodeName.toLowerCase()&&(r.hasAttribute("data-page")?(this.page(r.getAttribute("data-page")),e.preventDefault()):t.sortable&&r.classList.contains("dataTable-sorter")&&"false"!=r.parentNode.getAttribute("data-sortable")&&(this.columns().sort(this.headings.indexOf(r.parentNode)),e.preventDefault()))}),!1),window.addEventListener("resize",this.listeners.onResize)}onResize(){this.rect=this.container.getBoundingClientRect(),this.rect.width&&this.fixColumns()}setColumns(t){t||this.data.forEach((t=>{Array.from(t.cells).forEach((t=>{t.data=t.innerHTML}))})),this.options.columns&&this.headings.length&&this.options.columns.forEach((t=>{Array.isArray(t.select)||(t.select=[t.select]),t.hasOwnProperty("render")&&"function"==typeof t.render&&(this.selectedColumns=this.selectedColumns.concat(t.select),this.columnRenderers.push({columns:t.select,renderer:t.render})),t.select.forEach((e=>{const r=this.headings[e];r&&(t.type&&r.setAttribute("data-type",t.type),t.format&&r.setAttribute("data-format",t.format),t.hasOwnProperty("sortable")&&r.setAttribute("data-sortable",t.sortable),t.hasOwnProperty("hidden")&&!1!==t.hidden&&this.columns().hide([e]),t.hasOwnProperty("sort")&&1===t.select.length&&this.columns().sort(t.select[0],t.sort,!0))}))})),this.hasRows&&(this.data.forEach(((t,e)=>{t.dataIndex=e,Array.from(t.cells).forEach((t=>{t.data=t.innerHTML}))})),this.selectedColumns.length&&this.data.forEach((t=>{Array.from(t.cells).forEach(((e,r)=>{this.selectedColumns.includes(r)&&this.columnRenderers.forEach((n=>{n.columns.includes(r)&&(e.innerHTML=n.renderer.call(this,e.data,e,t))}))}))})),this.columns().rebuild()),this.render("header")}destroy(){this.dom.innerHTML=this.initialLayout,this.dom.classList.remove("dataTable-table"),this.wrapper.parentNode.replaceChild(this.dom,this.wrapper),this.initialized=!1,window.removeEventListener("resize",this.listeners.onResize)}update(){this.wrapper.classList.remove("dataTable-empty"),this.paginate(this),this.render("page"),this.links=[];let t=this.pages.length;for(;t--;){const e=t+1;this.links[t]=V(0===t?"active":"",e,e)}this.sorting=!1,this.render("pager"),this.rows().update(),this.emit("datatable.update")}paginate(){const t=this.options.perPage;let e=this.activeRows;return this.searching&&(e=[],this.searchData.forEach((t=>e.push(this.activeRows[t])))),this.options.paging?this.pages=e.map(((r,n)=>n%t==0?e.slice(n,n+t):null)).filter((t=>t)):this.pages=[e],this.totalPages=this.lastPage=this.pages.length,this.totalPages}fixColumns(){if((this.options.scrollY.length||this.options.fixedColumns)&&this.activeHeadings&&this.activeHeadings.length){let t,e=!1;if(this.columnWidths=[],this.dom.tHead){this.options.scrollY.length&&(e=U("thead"),e.appendChild(U("tr")),e.style.height="0px",this.headerTable&&(this.dom.tHead=this.headerTable.tHead)),this.activeHeadings.forEach((t=>{t.style.width=""}));const t=this.activeHeadings.reduce(((t,e)=>t+e.offsetWidth),0);if(this.activeHeadings.forEach(((r,n)=>{const i=r.offsetWidth,s=i/t*100;if(r.style.width=`${s}%`,this.columnWidths[n]=i,this.options.scrollY.length){const t=U("th");e.firstElementChild.appendChild(t),t.style.width=`${s}%`,t.style.paddingTop="0",t.style.paddingBottom="0",t.style.border="0"}})),this.options.scrollY.length){const t=this.dom.parentElement;if(!this.headerTable){this.headerTable=U("table",{class:"dataTable-table"});const e=U("div",{class:"dataTable-headercontainer"});e.appendChild(this.headerTable),t.parentElement.insertBefore(e,t)}const r=this.dom.tHead;this.dom.replaceChild(e,r),this.headerTable.tHead=r,this.headerTable.parentElement.style.paddingRight=`${this.headerTable.clientWidth-this.dom.clientWidth+parseInt(this.headerTable.parentElement.style.paddingRight||"0",10)}px`,t.scrollHeight>t.clientHeight&&(t.style.overflowY="scroll")}}else{t=[],e=U("thead");const r=U("tr");Array.from(this.dom.tBodies[0].rows[0].cells).forEach((()=>{const e=U("th");r.appendChild(e),t.push(e)})),e.appendChild(r),this.dom.insertBefore(e,this.body);const n=[];t.forEach(((t,e)=>{const r=t.offsetWidth,i=r/this.rect.width*100;n.push(i),this.columnWidths[e]=r})),this.data.forEach((t=>{Array.from(t.cells).forEach(((t,e)=>{this.columns(t.cellIndex).visible()&&(t.style.width=`${n[e]}%`)}))})),this.dom.removeChild(e)}}}fixHeight(){this.options.fixedHeight&&(this.container.style.height=null,this.rect=this.container.getBoundingClientRect(),this.container.style.height=`${this.rect.height}px`)}search(t){return!!this.hasRows&&(t=t.toLowerCase(),this.currentPage=1,this.searching=!0,this.searchData=[],t.length?(this.clear(),this.data.forEach(((e,r)=>{const n=this.searchData.includes(e),i=t.split(" ").reduce(((t,r)=>{let n=!1,i=null,s=null;for(let t=0;t<e.cells.length;t++)if(i=e.cells[t],s=i.hasAttribute("data-content")?i.getAttribute("data-content"):i.textContent,s.toLowerCase().includes(r)&&this.columns(i.cellIndex).visible()){n=!0;break}return t&&n}),!0);i&&!n?(e.searchIndex=r,this.searchData.push(r)):e.searchIndex=null})),this.wrapper.classList.add("search-results"),this.searchData.length?this.update():(this.wrapper.classList.remove("search-results"),this.setMessage(this.options.labels.noResults)),void this.emit("datatable.search",t,this.searchData)):(this.searching=!1,this.update(),this.emit("datatable.search",t,this.searchData),this.wrapper.classList.remove("search-results"),!1))}page(t){return t!=this.currentPage&&(isNaN(t)||(this.currentPage=parseInt(t,10)),!(t>this.pages.length||t<0)&&(this.render("page"),this.render("pager"),void this.emit("datatable.page",t)))}sortColumn(t,e){this.columns().sort(t,e)}insert(t){let e=[];if(B(t)){if(t.headings&&!this.hasHeadings&&!this.hasRows){const e=U("tr");t.headings.forEach((t=>{const r=U("th",{html:t});e.appendChild(r)})),this.head.appendChild(e),this.header=e,this.headings=[].slice.call(e.cells),this.hasHeadings=!0,this.options.sortable=this.initialSortable,this.render("header"),this.activeHeadings=this.headings.slice()}t.data&&Array.isArray(t.data)&&(e=t.data)}else Array.isArray(t)&&t.forEach((t=>{const r=[];Object.entries(t).forEach((([t,e])=>{const n=this.labels.indexOf(t);n>-1&&(r[n]=e)})),e.push(r)}));e.length&&(this.rows().add(e),this.hasRows=!0),this.update(),this.setColumns(),this.fixColumns()}refresh(){this.options.searchable&&(this.input.value="",this.searching=!1),this.currentPage=1,this.onFirstPage=!0,this.update(),this.emit("datatable.refresh")}clear(t){this.body&&W(this.body);let e=this.body;if(this.body||(e=this.dom),t){if("string"==typeof t){document.createDocumentFragment().innerHTML=t}e.appendChild(t)}}export(t){if(!this.hasHeadings&&!this.hasRows)return!1;const e=this.activeHeadings;let r=[];const n=[];let i,s,o,a;if(!B(t))return!1;const l={download:!0,skipColumn:[],lineDelimiter:"\n",columnDelimiter:",",tableName:"myTable",replacer:null,space:4,...t};if(l.type){if("txt"!==l.type&&"csv"!==l.type||(r[0]=this.header),l.selection)if(isNaN(l.selection)){if(Array.isArray(l.selection))for(i=0;i<l.selection.length;i++)r=r.concat(this.pages[l.selection[i]-1])}else r=r.concat(this.pages[l.selection-1]);else r=r.concat(this.activeRows);if(r.length){if("txt"===l.type||"csv"===l.type){for(o="",i=0;i<r.length;i++){for(s=0;s<r[i].cells.length;s++)if(!l.skipColumn.includes(e[s].originalCellIndex)&&this.columns(e[s].originalCellIndex).visible()){let t=r[i].cells[s].textContent;t=t.trim(),t=t.replace(/\s{2,}/g," "),t=t.replace(/\n/g,"  "),t=t.replace(/"/g,'""'),t=t.replace(/#/g,"%23"),t.includes(",")&&(t=`"${t}"`),o+=t+l.columnDelimiter}o=o.trim().substring(0,o.length-1),o+=l.lineDelimiter}o=o.trim().substring(0,o.length-1),l.download&&(o=`data:text/csv;charset=utf-8,${o}`)}else if("sql"===l.type){for(o=`INSERT INTO \`${l.tableName}\` (`,i=0;i<e.length;i++)!l.skipColumn.includes(e[i].originalCellIndex)&&this.columns(e[i].originalCellIndex).visible()&&(o+=`\`${e[i].textContent}\`,`);for(o=o.trim().substring(0,o.length-1),o+=") VALUES ",i=0;i<r.length;i++){for(o+="(",s=0;s<r[i].cells.length;s++)!l.skipColumn.includes(e[s].originalCellIndex)&&this.columns(e[s].originalCellIndex).visible()&&(o+=`"${r[i].cells[s].textContent}",`);o=o.trim().substring(0,o.length-1),o+="),"}o=o.trim().substring(0,o.length-1),o+=";",l.download&&(o=`data:application/sql;charset=utf-8,${o}`)}else if("json"===l.type){for(s=0;s<r.length;s++)for(n[s]=n[s]||{},i=0;i<e.length;i++)!l.skipColumn.includes(e[i].originalCellIndex)&&this.columns(e[i].originalCellIndex).visible()&&(n[s][e[i].textContent]=r[s].cells[i].textContent);o=JSON.stringify(n,l.replacer,l.space),l.download&&(o=`data:application/json;charset=utf-8,${o}`)}return l.download&&(l.filename=l.filename||"datatable_export",l.filename+=`.${l.type}`,o=encodeURI(o),a=document.createElement("a"),a.href=o,a.download=l.filename,document.body.appendChild(a),a.click(),document.body.removeChild(a)),o}}return!1}import(t){let e=!1;if(!B(t))return!1;const r={lineDelimiter:"\n",columnDelimiter:",",removeDoubleQuotes:!1,...t};if(r.data.length||B(r.data)){if("csv"===r.type){e={data:[]};const t=r.data.split(r.lineDelimiter);t.length&&(r.headings&&(e.headings=t[0].split(r.columnDelimiter),r.removeDoubleQuotes&&(e.headings=e.headings.map((t=>t.trim().replace(/(^"|"$)/g,"")))),t.shift()),t.forEach(((t,n)=>{e.data[n]=[];const i=t.split(r.columnDelimiter);i.length&&i.forEach((t=>{r.removeDoubleQuotes&&(t=t.trim().replace(/(^"|"$)/g,"")),e.data[n].push(t)}))})))}else if("json"===r.type){const t=(t=>{let e=!1;try{e=JSON.parse(t)}catch(t){return!1}return!(null===e||!Array.isArray(e)&&!B(e))&&e})(r.data);t&&(e={headings:[],data:[]},t.forEach(((t,r)=>{e.data[r]=[],Object.entries(t).forEach((([t,n])=>{e.headings.includes(t)||e.headings.push(t),e.data[r].push(n)}))})))}B(r.data)&&(e=r.data),e&&this.insert(e)}return!1}print(){const t=this.activeHeadings,e=this.activeRows,r=U("table"),n=U("thead"),i=U("tbody"),s=U("tr");t.forEach((t=>{s.appendChild(U("th",{html:t.textContent}))})),n.appendChild(s),e.forEach((t=>{const e=U("tr");Array.from(t.cells).forEach((t=>{e.appendChild(U("td",{html:t.textContent}))})),i.appendChild(e)})),r.appendChild(n),r.appendChild(i);const o=window.open();o.document.body.appendChild(r),o.print()}setMessage(t){let e=1;this.hasRows?e=this.data[0].cells.length:this.activeHeadings.length&&(e=this.activeHeadings.length),this.wrapper.classList.add("dataTable-empty"),this.label&&(this.label.innerHTML=""),this.totalPages=0,this.render("pager"),this.clear(U("tr",{html:`<td class="dataTables-empty" colspan="${e}">${t}</td>`}))}columns(t){return new K(this,t)}rows(t){return new Y(this,t)}on(t,e){this.events=this.events||{},this.events[t]=this.events[t]||[],this.events[t].push(e)}off(t,e){this.events=this.events||{},t in this.events!=!1&&this.events[t].splice(this.events[t].indexOf(e),1)}emit(t){if(this.events=this.events||{},t in this.events!=!1)for(let e=0;e<this.events[t].length;e++)this.events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}}var Z=n(251),tt=n.n(Z);let et=null;class rt{current=null;constructor(t,e,r={}){if(null===et){const n={istable:!0,over:!1,waitdiv:null};this.options=Object.assign(n,r),Object.freeze(this.options),this.wrapper=e,this.detail=t,this.init(),et=this}return et}init(){if(this.detail instanceof HTMLElement)return;const t=document.createElement("div");t.id=this.detail,t.classList.add(M.hide),this.options.waitdiv&&(this.options.waitdiv.textContent=this.options.waitdiv.dataset.wait?this.options.waitdiv.dataset.wait:D,t.append(this.options.waitdiv)),t.append(document.createElement("div")),this.detail=t,this.wrapper.classList.add("relative"),this.wrapper.append(this.detail)}expandDetail(t,e=null){this.current&&this.current!==t&&this.shrinkDetail(this.current),this.current=t,this.options.waitdiv&&this.options.waitdiv.classList.add(M.hide),null!==e&&(this.detail.lastElementChild.innerHTML=y().sanitize(e));const r=this.options.istable?t.closest("td"):t,n=this.options.istable?parseInt(this.wrapper.querySelector("table").offsetTop):0,i=parseInt(r.offsetHeight)+parseInt(this.detail.offsetHeight)+6,s=parseInt(this.wrapper.offsetWidth);this.detail.style.minWidth=this.detail.style.width=s+"px",r.style.overflow=t.style.overflowX="visible",this.detail.style.top=n+parseInt(r.offsetTop)+parseInt(t.offsetHeight)+6+"px",r.style.minHeight=r.style.height=i+"px"}shrinkDetail(t){const e=this.options.istable?t.closest("td"):t,r=t.closest(".overflow");r&&(r.classList.remove("overflow"),r.style.maxWidth=r.dataset.maxw),e.style.minHeight="none",e.style.height="auto",e.style.overflow=t.style.overflowX=t.parentElement.style.overflowX="hidden",this.detail.classList.add(M.hide),this.wrapper.append(this.detail),this.current=null}activeDetail(t,e=!1){!0===t?(this.detail.lastElementChild.innerHTML="",this.detail.classList.remove(M.hide),this.options.waitdiv&&this.options.waitdiv.classList.remove(M.hide)):(this.detail.classList.add(M.hide),this.options.waitdiv&&this.options.waitdiv.classList.add(M.hide),this.current&&this.shrinkDetail(this.current),!0===e&&(this.detail.lastElementChild.innerHTML=""),this.current=null)}}class nt{constructor(t,e=null,r=null,n=null,i={},s=null){if(this.el=t,this.summary=s?s instanceof HTMLElement?s:t.querySelector(s):t.querySelector("summary")?t.querySelector("summary"):t,!this.summary)return;if(this.content=n?n instanceof HTMLElement?n:t.querySelector(n):t.nextElementSibling,!this.content)return;this.options=Object.assign({shrink:{opacity:[100,0],scaleY:[1,0]},expand:{opacity:[0,100],scaleY:[0,1]}},i),Object.freeze(this.options),this.animation=null,this.isClosing=!1,this.isExpanding=!1,this.summary.addEventListener("click",(t=>this.onClick(t))),this.callbackopen=e,this.callbackclose=r}onClick(t){t.preventDefault(),this.isClosing||!this.el.open?this.callbackopen?this.callbackopen(this.el,(()=>{this.open()})):this.open():(this.isExpanding||this.el.open)&&this.shrink()}shrink(){this.isClosing=!0,this.animation&&this.animation.cancel(),this.animation=this.content.animate(this.options.shrink,{duration:400,easing:"ease-out"}),this.animation.onfinish=()=>this.onAnimationFinish(!1),this.animation.oncancel=()=>this.isClosing=!1,this.callbackclose&&this.callbackclose(this.el)}open(){this.el.open=!0,window.requestAnimationFrame((()=>this.expand()))}expand(){this.isExpanding=!0,this.animation&&this.animation.cancel(),this.animation=this.content.animate(this.options.expand,{duration:400,easing:"ease-out"}),this.animation.onfinish=()=>this.onAnimationFinish(!0),this.animation.oncancel=()=>this.isExpanding=!1}onAnimationFinish(t){this.el.open=t,this.animation=null,this.isClosing=!1,this.isExpanding=!1}}var it=n(6031),st=n.n(it),ot=n(3583),at=n.n(ot),lt={};lt.styleTagTransform=p(),lt.setAttributes=l(),lt.insert=o().bind(null,"head"),lt.domAPI=i(),lt.insertStyleElement=d();e()(at(),lt);at()&&at().locals&&at().locals;let ct={};class dt{applyTo(t,e=null){const r=t.getAttribute("id"),n=t.hasAttribute("multiple"),i=t.dataset.type;let s={url:"",settings:{}},o=e=>{e.addEventListener("click",(e=>{const r=e.currentTarget.closest(q.component.tomselect.item).dataset.value;r&&(e.stopImmediatePropagation(),t.tomselect.removeItem(r))}))};switch(i){case A:s.url="/gui/prjlist/",s.settings={valueField:"id",searchField:"text",labelField:"text",openOnFocus:!1,maxItems:1,allowEmptyOption:!1,onItemAdd:function(e){if(console.log("e",e),e!=t.dataset.value){let t=window.location.href.split("/");t.pop(),t=t.join("/")+"/"+e,window.open(t,"_blank").focus()}this.removeItem(e)}};break;case x:s.url="/api/users/search?by_name=",s.settings={valueField:"id",searchField:"name",labelField:"name",onInitialize:function(){t.tomselect.items.forEach((t=>{ct[t]=!0}))},onItemAdd:function(e){if(ct[e]){if(!this.revertSettings||this.revertSettings.tabIndex<0||!t.querySelectorAll("option"))return;const r=t.querySelectorAll("option")[this.revertSettings.tabIndex].value;this.removeOption(e),this.addItem(r),ct[e]=!1}else ct[e]=!0},onItemRemove:function(e){if(ct[e]&&delete ct[e],!this.revertSettings||this.revertSettings.tabIndex<0)return;const r=t.querySelectorAll("option")[this.revertSettings.tabIndex].value;void 0!==ct[r]&&delete ct[r]}};break;case L:s.url="/search/instruments",s.settings={valueField:"id",labelField:"text",searchField:"id",maxItems:1,preload:!0};break;case T:st().define("no_close",(()=>{this.close=()=>{}})),s.url="/search/taxo",s.settings={valueField:"id",labelField:"text",searchField:"text",onInitialize:()=>{const t=document.getElementById(r).nextElementSibling;if(!t.classList.contains("ts-wrapper"))return;t.querySelectorAll(q.component.tomselect.tsdelet).forEach((t=>{o(t)}))}}}const a={create:!1,maxOptions:null,preload:!1,hideSelected:!0,duplicates:!1,allowEmptyOption:!0,closeAfterSelect:!0,placeholder:t.placeholder?t.placeholder:t.dataset.placeholder?t.dataset.placeholder:"",onDropdownClose:function(){},shouldLoad:function(t){return t.length>2},load:function(t,e){t=y().sanitize(t);if(this.loading>10)return void e();let r="";switch(i){case x:r=s.url+encodeURIComponent("%"+t+"%");break;case L:case T:r=s.url,t&&(r+="?q="+encodeURIComponent(t));break;case A:r=s.url,t&&(r+="?filt_title="+encodeURIComponent(t))}null!==r&&fetch(r,v()).then((t=>t.json())).then((t=>(i===A&&(t.data&&t.data.length&&(t=t.data.map((t=>({id:t[1],text:t[3][0]})))),console.log("json",t)),i===L&&t.length&&(t=t.reduce(((t,e,r)=>{let n={id:e=y().sanitize(e),text:e};return t.push(n),t}),[])),t.length&&"object"==typeof t&&(t=Object.entries(t)),e(t)))).catch((t=>{console.log("tomselect-err",t)}))},render:{option:function(t,e){if(null==t)return"";const r=t.optgroup?`data-optgroup=${t.optgroup}`:"";return`<div class="py-2 flex  ${n?"inline-flex":""} " ${r} data-value="${t[s.settings.valueField]}">${e(t[this.settings.labelField])}</div>`},item:function(t,e){if(null==t)return"";const r=t.optgroup?`item-${t.optgroup}`:"",i=n?`<i class="${q.component.tomselect.tsdelet.substr(1)}"></i>`:"";return y().sanitize('<div class="'+(n?"flex inline-flex ":"")+` ${r}" data-value="${t[this.settings.valueField]}">${e(t[this.settings.labelField])} ${i}</div>`)},no_results:function(e,r){return y().sanitize('<div class="no-results">'+(t.dataset.noresults?t.dataset.noresults:"No result found for ")+r(e.input)+"</div>")}}};if(s.settings=Object.assign(a,s.settings),null!==r){const e=new(st())("#"+r,s.settings);switch(e.wrapper.classList.remove(q.component.tomselect.ident),e.wrapper.classList.remove("js"),e.wrapper.setAttribute("data-component","tom-select"),i){case"taxo":e.on("item_add",((t,e)=>{null!==e&&e.classList.add("new"),null!==(e=e.querySelector(".ts-delet"))&&o(e)}));break;case"user":t.dataset.priv&&e.on("item_add",(function(t,e){null!==(e=e.querySelector(q.component.tomselect.tsdelet))&&o(e)}))}return e}console.log("noid")}}let ut=null;class pt{handlers=[];form=null;listener=null;constructor(t,e={}){if(!ut){if(!t)return;const r={};this.options=Object.assign(r,e),this.form=t instanceof HTMLElement?t:document.querySelector(t),this.validateFields(!0),ut=this}return ut}validateField(t){const e=t=>{let e="invalid";return t.required&&(e=t.dataset.required?t.dataset.required:this.form.dataset.required?this.form.dataset.required:"invalid"),"invalid"===e&&(e=t.dataset.invalid?t.dataset.invalid:this.form.dataset.invalid?this.form.dataset.invalid:"invalid input"),e},r=t.checkValidity(),n=t.closest(".form-box")?t.closest(".form-box").querySelector("label"):null;return r&&n?n.classList.remove("invalid"):r||n&&(n.dataset.invalid=e(t),n.classList.add("invalid")),t.classList.contains("tomselected")&&t.nextElementSibling?t.nextElementSibling.classList.add("input-validate"):t.classList.add("input-validate"),r}validateFields(t=!1){let e=!0;return this.form.querySelectorAll("input,textarea, select").forEach((r=>{if(!0===t)r.dataset.listen||(["change","blur"].forEach((t=>{r.addEventListener(t,(t=>{this.validateField(t.currentTarget)}))})),r.dataset.listen=!0);else{const t=this.validateField(r);e=e&&t}})),e}addHandler(t){this.handlers.push(t)}async submitHandler(){if(!this.validateFields())return!1;if(0===this.handlers.length)return!0;let t=!0;return await Promise.all(this.handlers.map((async e=>{const r=await e();t=t&&r}))),!0===t&&(this.handlers=[]),t}}const ht={oneatleast:"oneatleast",nomanager:"nomanager",nocontact:"nocontact",uhasnopriv:"uhasnopriv",importpriverror:"importpriverror",emptyname:"emptyname"};let ft=null;class mt{options;alertBox;current_uid;fieldset;fieldset_alert_zone;constructor(t={}){if(!ft){const e={groupid:"#section-privileges",separ:".new-privilege",addbtn:'[data-add="block"]',target:"member",ident:"member",privilege:"privilege",delet:"delet",contact:"contact",contactfieldname:"contact_user_id"};if(this.options=Object.assign({},e,t),this.fieldset=document.querySelector(this.options.groupid),!this.fieldset)return;this.fieldset_alert_zone=this.fieldset.querySelector(".tab-content")?this.fieldset.querySelector(".tab-content"):this.fieldset,this.options.separ=this.options.separ instanceof HTMLElement?this.options.separ:document.querySelector(this.options.separ)?document.querySelector(this.options.separ):null,this.options.addbtn=this.options.addbtn instanceof HTMLElement?this.options.addbtn:document.querySelector(this.options.addbtn),this.options.addbtn&&this.addListener();const r=this.fieldset.querySelectorAll('[data-block="'+this.options.target+'"]');this.current_uid=this.fieldset.dataset.u,this.alertBox=new $,r.forEach((t=>{this.activateEvents(t)}));const n=this.fieldset.closest("form"),i=async()=>await this.cleanPrivileges();new pt(n).addHandler(i),ft=this}return ft}newLine(t=!1,e=0){let r;if(e>0&&(r=this.getLinePrivilege(e),r))return r;const n=this.fieldset.querySelectorAll('[data-block="'+this.options.target+'"]');if(0===n.length)return;const i=n.length-1;return r=n[i],null!==r&&(r=this.clearLine(r.cloneNode(!0),i,this.options.separ?this.options.separ:r),this.activateEvents(r)),!0===t?r:void 0}addListener(){this.options.target=this.options.addbtn.dataset.target?this.options.addbtn.dataset.target:this.options.target,this.options.addbtn.addEventListener("click",(async t=>{t.preventDefault(),this.newLine()}))}clearLine(t,e,r=null){let n=null;t.dataset.mod="",t.disabled=!1;if(t.querySelectorAll("[data-elem]").forEach((t=>{t.querySelectorAll("[data-component]").forEach((t=>{if("tom-select"===t.dataset.component)t.remove()}));t.querySelectorAll("input, select, label").forEach((t=>{if(t.disabled=!1,r){["id","for","aria-controls","name"].forEach((r=>{let n=t.getAttribute(r);null!==n&&(n="name"===r?n.replace("["+e+"]","["+(e+1)+"]"):n.replace("_"+e,"_"+(e+1)),t.setAttribute(r,n))}))}switch(t.tagName.toLowerCase()){case"input":t.checked=!1,t.name==this.options.contactfieldname&&(t.value="0",t.disabled=!0);break;case"select":t.selectedIndex=-1;break;case"label":t.classList.remove(M.peerchecked)}t.tomselect&&(n=t,t.tomselect.clear(),t.tomselect.destroy()),t.classList.contains(M.component.autocomplete.tomselected)&&(n=t,t.classList.forEach((e=>{0==e.indexOf("ts-")&&t.classList.remove(e)})),t.classList.remove(M.component.autocomplete.tomselected),"select-one"==t.type&&delete t.type)}))})),r&&(t.classList.add("new"),r.after(t)),null!==n){(new dt).applyTo(n),n.tomselect.clearOptions();let t=this.fieldset.dataset.options;t=t||[],n.tomselect.addOptions(t)}return t}setLine(t,e={key:"",value:""},r,n){if(!(r=R[r]?R[r]:R.viewers))return;const{member:i,privs:s,contact:o,delet:a}=this.getInputs(t,r);if(i&&s&&o&&a){if(e.key=y().sanitize(e.key),e.value=y().sanitize(e.value),i.tomselect){let t={};t[i.tomselect.settings.valueField]=e.key,t[i.tomselect.settings.labelField]=e.value,i.tomselect.getOption(e.key)||i.tomselect.addOption(t),i.tomselect.addItem(e.key,!1),i.tomselect.refreshOptions()}else{const t=i.querySelector('select option[value="'+e.key+'"]');t?t.selected=!0:i.insertAdjacentHTML("beforeend",'<option value="'+e.key+'" selected>'+e.value+"</option>")}s.checked=!0,o.value=e.key,r===H&&(o.disabled=!1,!0===n&&(o.checked=!0))}}getInputs(t,e=!1){const r=t.querySelector("[name*='["+this.options.ident+"]']");let n;n=e?t.querySelector('input[name*="['+this.options.privilege+']"][value="'+e+'"]'):t.querySelectorAll('input[name*="['+this.options.privilege+']"]');return{member:r,privs:n,contact:t.querySelector('input[name="'+this.options.contactfieldname+'"]'),delet:t.querySelector("input[name*='["+this.options.delet+"]']")}}async importPrivileges(t,e=!1,r=null,n=null,i=null){let s=!0!==e||null;try{return Object.entries(t).forEach((([t,e])=>{e.forEach((e=>{s=s?this.newLine(!0,e.id):this.clearAll(!0),s&&(this.setLine(s,{key:e.id,value:e.name},t,r&&parseInt(r.id)===parseInt(e.id)),n&&n(s),i&&i())}))})),this.alertBox.dismissAlert(ht.importpriverror),!0}catch(t){return await this.alertBox.build({dismissible:!0,message:ht.importpriverror,codeid:!0,parent:this.fieldset_alert_zone,type:_.danger}),console.log("err",t),!1}}activateEvents(t){if(!t)return;const{member:e,privs:r,contact:n,delet:i}=this.getInputs(t);if(!(e&&r&&n&&i))return;const s=t=>[...t.parentElement.children].filter((e=>1==e.nodeType&&e!=t&&e.classList.contains("row")&&null!==e.dataset.block&&e.dataset.block===this.options.target)),o=(e,r,n,i=!1)=>{e&&e.value===H?(n.disabled=!0,r.disabled=!1,this.alertBox.dismissAlert(ht.nomanager),r.checked&&this.alertBox.dismissAlert(ht.nocontact)):(r.checked=!1,n.disabled=!1,r.disabled=!0),!0===i&&a(t),n.ckecked||(this.alertBox.dismissAlert(ht.nobody),this.alertBox.dismissAlert(ht.oneatleast))},a=t=>{s(t).forEach((t=>{const e=t.querySelector("input[name*='["+this.options.delet+"]']"),r=t.querySelector('input[name="'+this.options.contactfieldname+'"]'),n=t.querySelector('input[name*="['+this.options.privilege+']"]:checked');o(n,r,e,!1)}))};e.addEventListener("change",(t=>{n.value=e.value,e.value&&(this.alertBox.dismissAlert(ht.emptyname),this.alertBox.dismissAlert(ht.oneatleast),this.alertBox.dismissAlert(ht.nobody))})),r.forEach((t=>{t.addEventListener("change",(e=>{t.checked&&o(t,n,i,!1)})),t.checked&&o(t,n,i,!1)})),n.addEventListener("change",(e=>{e.target.checked?i.disabled=!0:i.disabled=!1;const r=t.querySelector('input[name*="['+this.options.privilege+']"]:checked');o(r,n,i,!0)})),i.addEventListener("click",(s=>{const o=i.closest("label");if(this.fieldset.querySelectorAll('[data-block="'+this.options.target+'"]:not([data-mod="remove"])').length<=1&&s.target.checked)return i.disabled=!0,i.checked=!1,void this.alertBox.build({dismissible:!0,message:ht.oneatleast,codemessage:ht.oneatleast,type:_.warning,parent:s.currentTarget.id||null});s.target.checked?(this.alertBox.dismissAlert(ht.oneatleast),t.classList.contains("new")?t.remove():(o&&o.dataset.restore&&o.setAttribute("title",o.dataset.restore),t.setAttribute("data-mod","remove"),r.forEach((t=>{t.disabled=!0,t.checked=!1})),n.checked=!1,n.disabled=!0,e.disabled=!0)):(o&&o.dataset.remove&&o.setAttribute("title",o.dataset.remove),t.removeAttribute("data-mod"),r.forEach((t=>t.disabled=!1)),n.disabled=!1,e.disabled=!1)})),i.addEventListener("mouseover",(e=>{if(e.target.disabled){let r=t.querySelector('input[name*="['+this.options.privilege+']"]:checked');if(!r)return;r=r.value.toLowerCase(),e.target.title=e.target.dataset[r]?e.target.dataset[r]:e.target.title}})),this.current_uid===e.value&&(i.disabled=!0)}async cleanPrivileges(){const t=t=>t.querySelector('[name*="['+this.options.ident+']"]').value,e=t=>{const e=t.querySelector('[name*="['+this.options.privilege+']"]:checked');return!(!e||!e.value)},r=t=>{t.querySelectorAll('[name*="members["').forEach((t=>{let e=t.name;e=e.split("["),e.pop(),t.name=e.join("["),t.name.indexOf("["+this.options.privilege+"]")>0&&(t.type="checkbox",t.classList.add("hidden"))}))};if(!0===await(async()=>{if(0===this.fieldset.querySelectorAll('[name*="['+this.options.privilege+']"][value="'+H+'"]:checked').length)return await this.alertBox.build({dismissible:!0,message:ht.nomanager,codeid:!0,type:_.danger,parent:this.fieldset_alert_zone}),!1;this.alertBox.dismissAlert(ht.nomanager);return null===this.fieldset.querySelector('[name="'+this.options.contactfieldname+'"]:checked')?(await this.alertBox.build({dismissible:!0,codeid:!0,message:ht.nocontact,type:_.danger,parent:this.fieldset_alert_zone}),!1):(this.alertBox.dismissAlert(ht.nocontact),!0)})()){const n=this.fieldset.querySelectorAll('[data-block="'+this.options.target+'"]');let i=n.length,s=!0;for(const r of n)if(r.dataset.mod&&"remove"===r.dataset.mod){if(!(i>1))return!1;r.remove(),i--}else if(t(r))e(r)?this.alertBox.dismissAlert(ht.uhasnopriv):(this.alertBox.dismissAlert(ht.emptyname),await this.alertBox.build({dismissible:!0,insertafter:!0,codeid:!0,message:ht.uhasnopriv,type:_.warning,parent:r}),s=!1);else{const t=r.querySelector('[name*="['+this.options.ident+']"]');t.focus(),t.tomselect&&t.tomselect.focus(),await this.alertBox.build({dismissible:!0,insertafter:!0,message:ht.emptyname,codeid:!0,type:_.warning,parent:r});if(!0!==!1)return!1;if(!(i>1))return!1;r.remove(),i--}if(!s)return s;for(const t of n)r(t);return 0===i?(await this.alertBox.build({dismissible:!0,codeid:!0,message:ht.nobody,type:_.warning,parent:this.fieldset_alert_zone}),!1):(this.alertBox.dismissAlert(ht.nobody),!0)}return!1}getLinePrivilege(t){let e=null;const r=this.fieldset.querySelectorAll('[data-block="'+this.options.target+'"]');for(const n of r)if(parseInt(n.querySelector('[name*="['+this.options.ident+']"]').value)===parseInt(t)){e=n;break}return e}clearAll(t=!1){const e=this.fieldset.querySelectorAll('[data-block="'+this.options.target+'"]');if(e.forEach(((t,e)=>{const{member:r,privs:n,contact:i,delet:s}=this.getInputs(t);e>0&&this.current_uid!==r.value&&t.remove()})),this.clearLine(e[0],0),this.activateEvents(e[0]),!0===t)return e[0]}}const gt=Object.keys(R).reduce((function(t,e){return t[e]=e,t}),{});let yt;class vt{content_selector=".modal-content";imports=[];taxos=["preset","extra"];importcontainer;importzoneid;importid="importzone";selectors;button;clearbutton;replacebutton;tabbutton;doc=null;constructor(t,e="",r=null){if(!t)return;const n=(t=t instanceof HTMLElement?null:"object"==typeof t?t:null)instanceof HTMLElement?t:"object"==typeof t?t.table:document.querySelector(t);if(e=y().sanitize(e),!yt||yt.doc!==n){const i={importcontainer:"#data-import-"+e,btns:".btns-imports",button:"#add-import-"+e,replacebutton:"#replace-import-"+e,clearbutton:"#clear-import-"+e,tabbutton:"#tab-import-"+e,selector:"data-id"};this.doc=n,this.selector=r||i.selector,this.importcontainer=i.importcontainer instanceof HTMLElement?i.importcontainer:document.querySelector(i.importcontainer),this.form=i.form?i.form instanceof HTMLElement?i.form:document.querySelector(i.form):this.doc.closest("form"),this.button=i.button instanceof HTMLElement?i.button:document.querySelector(i.button),this.replacebutton=i.replacebutton instanceof HTMLElement?i.replacebutton:document.querySelector(i.replacebutton),this.clearbutton=i.clearbutton instanceof HTMLElement?i.clearbutton:document.querySelector(i.clearbutton),this.tabbutton=i.tabbutton instanceof HTMLElement?i.tabbutton:document.querySelector(i.tabbutton),this.init(t,i),yt=this}return yt}init(t,e){this.showImport(!1);let r=this.form.querySelector("#"+q.projid);r&&r.value&&(r=this.doc.querySelector("["+this.selector+'="'+r.value+'"]'),r&&r.classList.add(M.hide));const n=this.indexToCheck(t);this.selectors=this.doc.querySelectorAll("["+this.selector+"] button, ["+this.selector+"] input"),this.selectors.forEach((e=>{const r=Array.from(e.parentElement.children).indexOf(e);if(n&&""===e.closest("tr").children[n[r]].innerHTML)e.disabled=!0;else{const n="input"===e.tagName.toLowerCase()?"change":"click",i=e=>{const n=e.currentTarget;n.disabled=!0,this.toImport(t,n.parentElement,r)};e.removeEventListener(n,i,!1),e.addEventListener(n,i,!1)}})),this.button&&(this.tabbutton.addEventListener("click",(t=>{this.resizeZone(t)})),this.showImport(!1))}toImport(t,e,r=0){const n=null===t?this.doc.querySelectorAll("thead th"):t.headings,i=null===t?this.doc.querySelectorAll("tbody tr"):t.data,s=t.options.data.data;"td"!==e.tagName.toLowerCase()&&(e=e.closest("td"));const o=e.closest("tr")?e.closest("tr").dataIndex:null;if(null===o)return;let a=!0;const l=e.cellIndex,c=n[l],d=(i[o].cells,c.dataset.what);if(!d)return;c.dataset.parts&&c.dataset.parts.split(",");const u=c.dataset.selectcells?c.dataset.parts?[c.dataset.parts.split(",")[r]]:c.dataset.selectcells.split(","):null;if(!u)return;d===F.settings&&(this.imports[O]=this.findContact(n,s[o]));const p=d===F.taxo||d===F.privileges?this.createImportzone(d):null;u.forEach(((t,e)=>{if(e=null,n.every(((r,n)=>r.dataset.name!==t||(e=n,!1))),null!==e){const r=i[o].cells[e],l=s[o][e];r.classList.add(M.selected);const c=n[e];switch(d){case F.taxo:const e=p.tomselect;let r=l;r&&(e?(Object.values(e.options).forEach((t=>{let n={};n[t[e.settings.valueField]]=t[e.settings.labelField],r[t[e.settings.valueField]]||(r=Object.assign(r,n))})),r=Object.entries(r),r.sort(((t,e)=>{let r=t[1],n=e[1];return+(r>n)||-(n>r)})),e.clear(),e.clearOptions(),r.forEach((([t,r])=>{if(!e.getItem(t)){if(!e.getOption(t)){let n={};n[e.settings.valueField]=t,n[e.settings.labelField]=b(r.trim()),e.addOption(n)}e.addItem(t)}}))):(Object.values(p.options).forEach((t=>{let e={};e[t.value]=t.text,r[t.value]||(r=Object.assign(r,e))})),r=Object.entries(r),r.sort(((t,e)=>{let r=t[1],n=e[1];return+(r>n)||-(n>r)})),p.innerHTML="",r.forEach((([t,e])=>{p.querySelector('option[value="'+t+'"]')||p.insertAdjacentHTML("beforeend",'<option value="'+t+'" selected>'+e+"</option>")}))),a=r.length>0,r=null);break;case F.privileges:const i=l,d=p.tomselect&&p.tomselect.items.length>0||p.selectedIndex>0;if(!p.dataset.init){Object.keys(i).forEach((t=>{p.insertAdjacentHTML("afterbegin",`<optgroup value="${t}" label="${t}"></optgroup>`)}));(new dt).applyTo(p),p.dataset.init=!0}if(p.tomselect){[...p.tomselect.items].forEach((t=>{if(t=p.tomselect.options[t]){const e=d?gt.viewers:t.optgroup;i[e].push({id:t.id,name:t.name})}else this.messageZone(t)})),p.tomselect.clear(),p.tomselect.refreshOptions(),Object.entries(i).forEach((([t,e])=>{e.sort(((t,e)=>e.name>t.name)),e.forEach((e=>{const r=d?gt.viewers:t,n=p.querySelector('[value="'+r+'"]');null===p.querySelector('option[value="'+e.id+'"]')&&(n.insertAdjacentHTML("afterbegin",`<option value="${e.id}" data-optgroup=${r} selected="selected">${e.name}</option>`),p.tomselect&&!p.tomselect.getOption(e.id)&&p.tomselect.addOption({id:e.id,name:b(e.name),optgroup:r})),p.tomselect.addItem(e.id)}))})),a=p.tomselect.items.length>0}break;default:if(c.dataset.autocomplete){this.imports[t]={value:l,key:null};let e=null;n.every(((t,r)=>t.dataset.name!=c.dataset.autocomplete||(e=r,!1))),null!==e&&(e=s[o][e],this.imports[t].key=e)}else c.dataset.value?this.imports[t]=c.dataset.value:this.imports[t]=l}}})),n.length&&(this.button?(this.showImport(a),this.button.dataset.activated||d!==F.taxo&&d!==F.privileges||this.activateButtons(d,u)):this.makeImport(null,u,d,!0))}messageZone(t){console.log("itemmessage",t)}activateButtons(t,e){this.button.addEventListener("click",(r=>{r.preventDefault(),this.makeImport(r.currentTarget,e,t,!0)})),this.replacebutton.addEventListener("click",(r=>{r.preventDefault(),this.makeImport(r.currentTarget,e,t,!0)})),this.clearbutton.addEventListener("click",(t=>{if(!this.importcontainer)return;const e=this.importcontainer.querySelector("#"+this.importid);e&&(e.tomselect?(e.tomselect.clear(),e.tomselect.refreshOptions()):e.value=""),this.selectors.forEach((t=>{t.disabled&&(t.disabled=!1,t.closest("tr").querySelectorAll(".selected").forEach((t=>{t.classList.remove(M.selected)})))})),this.button.disabled=!1,this.replacebutton.disabled=!1})),this.button.dataset.activated=!0,this.replacebutton.dataset.activated=!0}findContact(t,e){let r=null;return t.every(((t,e)=>!t.dataset.name||t.dataset.name!==O||(r=e,!1))),r&&(r=e[r]?e[r]:0),r}renderPrivileges(t,e=!1){let r={};const n=t.tomselect,i=(t,e)=>{const n={id:t.id,name:t.name,priv:e};r[e]?r[e].push(n):r[e]=[n]};if(n){const t=[...n.items],e=Object.assign({},n.options);t.forEach((t=>{(t=e[t])&&i(t,t.optgroup)}))}else t.options.forEach((t=>{t.selected&&i(t,t.dataset.optgroup)}));this.importPrivileges(r,e)&&(n?(n.clear(),n.clearOptions()):t.innerHTML="")}importPrivileges(t,e=!1){const r=new mt,n=this.imports[O]?this.imports[O]:null;return r.importPrivileges(t,e,n,(t=>{this.setImportedTag(t,null)}),(()=>{this.dismiss()}))}createImportzone(t){this.showImport(!0);let e=this.importcontainer.querySelector("#"+this.importid);if(t===F.privileges)e||(e=document.createElement("select"),this.importid=e.id=this.importid+"-"+t,e.dataset.type=x,e.multiple=!0,e.dataset.priv=!0,this.importcontainer.append(e));else{const r=this.form.querySelector('[name="'+t+'"]')?this.form.querySelector('[name="'+t+'"]'):this.form.querySelector('[data-importfield="'+t+'"]'),n=r.tomselect;if(!e){if(!r)return;if(this.importzoneid=r.id,e=r.cloneNode(),e.classList.remove("tomselected"),e.classList.remove("ts-hidden-accessible"),e.dataset.origin=e.id,e.id=this.importid,e.name=this.importid+"_"+e.name,this.importcontainer.insertAdjacentHTML("afterbegin",e.outerHTML),n){e=this.importcontainer.querySelector("#"+this.importid);(new dt).applyTo(e)}}}return e}makeImport(t,e,r,n=!1){let i=!1;const s=this.importcontainer?this.importcontainer.querySelector("#"+this.importid):null;switch(r){case F.taxo:if(!s)return!1;const n=this.form.querySelector("#"+s.dataset.origin);if(!n)return!1;const o=n.tomselect;if(o){t.dataset.replace&&"replace"===t.dataset.replace&&(o.clear(),o.clearOptions());const e=s.tomselect,r=[...e.items],n=Object.assign({},e.options);r.forEach(((t,e)=>{let r={};r[o.settings.valueField]=t,r[o.settings.searchField]=b(n[t][o.settings.searchField]),o.getOption(t)||o.addOption(r),o.addItem(t)})),e.clear(),e.clearOptions()}else t.dataset.replace&&"replace"===t.dataset.replace&&(n.innerHTML=""),n.innerHTML=y().sanitize(s.innerHTML),s.innerHTML="";i=!0;break;case F.privileges:if(!s)return!1;i=this.renderPrivileges(s,t.dataset.replace&&"replace"===t.dataset.replace);break;default:e.forEach(((t,e)=>{let n=this.form.querySelector('[data-importfield="'+t+'"]')?this.form.querySelector('[data-importfield="'+t+'"]'):this.form.querySelector('[name="'+t+'"]');if(n&&void 0!==this.imports[t]){const e=n.tomselect;if("init_classif_list"===t){let r=this.imports[t];if(r=Array.isArray(r)?r.join(","):r.replace("[","").replace("]","").replaceAll(" ",""),""!==r){e&&e.wrapper.classList.add("wait-for-results");const t=new FormData;t.append("idlist",r);fetch("/search/taxoresolve",v({method:"POST",body:t})).then((t=>t.json())).then((t=>{if(e)Object.entries(t).forEach((([t,r])=>{let n={};t=y().sanitize(t),r=y().sanitize(r),n[e.settings.valueField]=t,n[e.settings.searchField]=b(r),e.addOption(n),e.addItem(n[e.settings.valueField])}));else{let e="";Object.entries(t).forEach((([t,r])=>{t=y().sanitize(t),r=y().sanitize(r),e+='<option value ="'+t+'" selected>'+r+"</option>"})),n.innerHTML=e,e=""}t=null,e&&e.wrapper.classList.remove("wait-for-results")}))}}else if(e){let r={};r[e.settings.valueField]=this.imports[t].key,r[e.settings.searchField]=b(this.imports[t].value),e.addOption(r),e.addItem(r[n.tomselect.settings.valueField]),e.refreshOptions()}else{n.type?n.type:n.tagName.toLowerCase();switch(n.type){case"radio":case"checkbox":n=this.form.querySelector('[name="'+t+'"][value="'+this.imports[t]+'"]'),n&&(n.checked=!0);break;case"select":let e;e=this.imports[t].key?'<option value="'+this.imports[t].key+'" selected >'+this.imports[t].value+"</option>":'<option value="'+this.imports[t]+'" selected >'+this.imports[t]+"</option>",n.insertAdjacentHTML("beforeend",e);break;default:n.value=this.imports[t]}}r!==F.settings&&n.focus(),i=!0,this.setImportedTag(n)}else"privileges"===t&&(i=this.importPrivileges(this.imports[t],!1))}))}!0===i&&1==n&&this.dismiss()}setImportedTag(t,e=".form-box"){let r=null===e?t:t.closest(e)?t.closest(e):t.closest("fieldset");if(!r)return;r.dataset.isimported=this.form.dataset.isimported,r.classList.add("imported");const n=e=>{r.removeAttribute("data-isimported"),r.classList.remove("imported"),t.removeEventListener("change keydown",n)};t.addEventListener("change keydown",n)}dismiss(t=!1){const e=this.doc.closest("details");e&&(e.open=!1,!0===t&&(e.querySelector(this.content_selector).innerHTML=""))}indexToCheck(t){if(t.headings&&t.headings[0].dataset.what===F.taxo){const e=t.headings[0].dataset.parts?t.headings[0].dataset.parts.split(","):null;if(e){const r=t.headings.filter(((t,r)=>{if(e.indexOf(t.dataset.name)>=0)return r})).map((t=>t.cellIndex));return r}}}showImport(t){if(this.button)if(!1===t)this.button.classList.add(M.hide),this.replacebutton.classList.add(M.hide),this.clearbutton.classList.add(M.hide),this.importcontainer.classList.add(M.hide),this.tabbutton.classList.add(M.hide);else{this.button.classList.remove(M.hide),this.replacebutton.classList.remove(M.hide),this.clearbutton.classList.remove(M.hide),this.importcontainer.classList.remove(M.hide),this.button.disabled=this.clearbutton.disabled=!1;const t=this.importcontainer.querySelector("#"+this.importid);t&&(this.tabbutton.classList.remove(M.hide),t.tomselect&&t.tomselect.control.offsetHeight<t.tomselect.control.scrollHeight?this.tabbutton.disabled=!1:this.tabbutton.disabled=!0)}}resizeZone(t){const e=this.importcontainer.closest(q.component.import.zoneimport);if(!e)return;e.parentElement.classList.toggle(M.showfull);const r=t.currentTarget.querySelector("i");r&&(r.classList.toggle("icon-arrow-pointing-out"),r.classList.toggle("icon-arrow-pointing-in"))}}let bt=[];const wt=["prjlist","prjsamplestats"],St={showfull:"showfull",tipinline:"tip-inline",searchresults:"search-results",selectaction:"selectaction",absinput:"absinput",tip:"tip",tipover:"tipover absolute z-10 text-xs text-stone-50 rounded bg-stone-600 px-2 py-0.5 -mt-5 ml-12 "},xt={datatable:".dataTable-table",datatable_top:".dataTable-top",datatable_search:".dataTable-input",table_filters:"table-filters",tip:".tip",tipover:".tipover",wait:"wait-please"};Object.freeze(St),Object.freeze(xt);class Et{instanceid=null;columns=[];datas=[];grid=null;params=null;last_used=null;importfields=null;constructor(t,e={}){if(t&&(this.instanceid=t.dataset.instanceid?t.dataset.instanceid:"one",t=t instanceof HTMLElement?t:document.querySelector(t)))return bt[this.instanceid]&&tt()(t.dataset,bt[this.instanceid].params)?this.refresh():this.init(t),bt[this.instanceid]}init(t){this.params=t.dataset;let e={searchable:!!this.params.searchable&&"true"===this.params.searchable,sortable:!!this.params.sortable&&"true"===this.params.sortable,fixedHeight:!1,paging:!!this.params.paging&&"true"===this.params.paging,perPage:this.params.paging?this.params.perpage?"true"===this.params.perpage:100:1e6,perPageSelect:!!this.params.paging&&[10,50,100,500,1e3],scrollY:"",footer:this.params.footer?"true"===this.params.footer:!!t.querySelector("tfoot"),labels:this.params.labels?this.params.labels:{placeholder:"Search...",perPage:"{select} entries per page",noRows:"No entries found",info:"Showing {start} to {end} of {rows} entries"},layout:{top:"{search}",bottom:"{pager}"}};this.from=t.dataset.from&&wt.indexOf(t.dataset.from)>=0?"/gui/"+y().sanitize(t.dataset.from)+"/":null,this.from?this.params.defer?this.deferLoad(t,e):this.fetchData(t,e):(this.tableActivate(t,e),bt[this.instanceid]=this)}waitActivate(t){const e=t.querySelector("#"+xt.wait);e||(e=document.createElement("div"),e.id=xt.wait,t.append(e)),this.waitdiv=e}deferLoad(t,e){const r=t.querySelector(t.dataset.defer);r&&r.addEventListener("click",(n=>{this.fetchData(t,e),r.remove()}))}fetchData(t,e){this.waitActivate(t),t.dataset.import&&(this.from+="?"+new URLSearchParams({typeimport:y().sanitize(t.dataset.import),gz:!0})),t.dataset.fromid&&(this.from+="/"+t.dataset.fromid),fetch(this.from,v()).then((t=>t.json())).then((r=>{this.waitdiv.innerHTML=this.waitdiv.dataset.loaded?y().sanitize(this.waitdiv.dataset.loaded):default_messages.dataloaded,this.columns=r.columns,this.datas=this.convertData(r.data),this.last_used=r.last_used;const n=this.convertColumns();e=Object.assign(e,{data:{headings:n.map((t=>t.name?t.name:"")),data:this.datas},columns:n}),this.tableActivate(t,e),t.addEventListener("dissmisstable",(t=>{console.log("destroy table"),this.destroy()})),bt[this.instanceid]=this})).catch((t=>{console.log("err",t)}))}tableActivate(t,e){let r=t.querySelector("table");r||(r=document.createElement("table"),t.append(r)),r.id="table-"+t.id,X.extend("search",(t=>{this.searchTable(t)})),this.grid=new X(r,e),this.grid.on("datatable.init",(()=>{this.waitdiv&&this.waitdiv.classList.add(M.hide),this.grid.wrapper.append(this.waitdiv),t.style.top=t.offsetTop+"px",t.dataset.table=this.params.table=!0,this.grid.table.classList.remove(M.hide);const e=this.grid.wrapper.querySelector(xt.datatable_search);e&&e.classList.add(St.input),this.initPlugins(t)}))}destroy(){this.dataImport&&(this.dataImport=null),this.grid=null,delete bt[this.instanceid]}refresh(t){this.dataImport&&this.dataImport.selectors&&this.dataImport.selectors.forEach((t=>{this.disabled&&(this.disabled=!1)}))}searchTable(t){return!!this.grid.hasRows&&(t=t.toLowerCase(),this.grid.currentPage=1,this.grid.searching=!0,this.grid.searchData=[],t.length?(this.grid.clear(),this.grid.data.forEach(((e,r)=>{const n=this.grid.searchData.includes(e),i=('"'===t.substr(0,1)&&'"'===t.substr(t.length-1,1)?[t.substr(1,t.length-2)]:t.split(" ")).reduce(((t,r)=>{let n=!1,i=null,s=null;for(let t=0;t<e.cells.length;t++)if(i=e.cells[t],s=i.hasAttribute("data-content")?i.getAttribute("data-content"):i.textContent,s.toLowerCase().includes(r)&&this.grid.columns(i.cellIndex).visible()){n=!0;break}return t&&n}),!0);i&&!n?(e.searchIndex=r,this.grid.searchData.push(r)):e.searchIndex=null})),this.grid.wrapper.classList.add(St.searchresults),this.grid.searchData.length?this.grid.update():(this.grid.wrapper.classList.remove(St.searchresults),this.grid.setMessage(this.grid.options.labels.noResults)),void this.grid.emit("datatable.search",t,this.grid.searchData)):(this.grid.searching=!1,this.grid.update(),this.grid.emit("datatable.search",t,this.grid.searchData),this.grid.wrapper.classList.remove(St.searchresults),!1))}labelFormatter(t){let e="";return["number","progress","decimal"].find((e=>e===t.format))&&(e=M.right),t.subfield?`${t.label} <span class="sublabel">${t.sublabel}</span>`:t.label?`<span class="col-${t.field} ${e}">${t.label}</span>`:""}getCellData(t,e){return t.data="",this.datas[e.dataIndex][t.cellIndex]}getFormatter(t,e,r="projects"){const n=this.columns.findIndex((t=>t.field==O)),i=this.columns.findIndex((t=>t.field==E)),s={contact:(t,r,s)=>{let o;t=this.getCellData(r,s);const a=this.datas[s.dataIndex][i];o=e.request&&"about"==e.request?t[1]?`<details data-id=${a} data-what=${e.request}><summary>${t[0]} [${a}]</summary></details>`:t[0]+" ["+a+"]":t+" ["+a+"]";const l=this.datas[s.dataIndex][n];if(l){const t=l.contact?`data-contact=${l.contact}`:"";return`<div class="ellipsis">${o} <a href="mailto:${l.email}" class="contact" ${t} target="_blank">${l.name}</a></div>`}return o},imports:(t,r,n)=>{t=this.getCellData(r,n);const s=this.datas[n.dataIndex][i];if(n.dataset.id=s,!e.select||!e.selectcells)return t;let o="",a=this.params.btn?this.params.btn:"import";switch(e.select){case T:(e.parts?e.parts:e.selectcells).forEach(((t,e)=>{let r=this.columns.findIndex((e=>e.field==t));r=r<0||"{}"===this.datas[n.dataIndex][r]?"disabled":"",e>0&&(a=this.params.btn1?this.params.btn1:"extra"),o+=`<button class="btn is-preset ${r}"  ${r}><i class="icon-md ${""===r?"icon-plus-sm":""}"></i>${a}</button>`}));break;case I:case C:case P:o=`<button class="btn is-preset">${a}</button>`}return o},validation:(t,r,n)=>(r.classList.add(e.field),t),select:(t,e,r)=>`<input type="radio" name="${this.instanceid}select" value=${t}>`,selectmultiple:(t,e,r)=>`<input type="checkbox" name="${this.instanceid}select[]" value=${t}>`,controls:(t,e,r)=>{t=this.getCellData(e,r);const s=this.datas[r.dataIndex][i],o=this.last_used.indexOf(parseInt(s));o>=0&&(r.classList.add("last-used"),this.last_used[o]=r);let a="";return Object.entries(t).forEach((([t,e])=>{switch(t){case"A":a+=`<a class = "btn is-annotate order-1" href = "/prj/${s}">${e}</a>`;break;case"V":a+=`<a class = "btn is-view order-1" href = "/prj/${s}">${e}</a>`;break;case"M":a+=`<a class = "btn is-manage order-2" href = "/gui/prj/edit/${s}">${e}</a>`;break;case"R":const t=this.datas[r.dataIndex][n];a+=`<a class = "btn is-request order-2" href = "mailto:${t.email}?${s}">${e}</a>`}})),'<div class="is-controls">'+a+"</div>"},decimal:(t,r,n)=>"None"===(t=this.getCellData(r,n))||""===t||null===t?"":((t=parseFloat(t).toFixed(2))-parseInt(t)==0&&(t=parseInt(t)),r.classList.add(e.format),t),number:(t,r,n)=>"None"===(t=this.getCellData(r,n))||""===t||null===t?"":(r.classList.add(e.format),parseInt(t)),check:(t,e,r)=>{let n;switch(this.getCellData(e,r)){case!0:case"Y":case 1:n="";break;default:n="no-"}return`<i class="icon-sm icon-${n}check"></i>`},progress:(t,r,n)=>"None"===(t=this.getCellData(r,n))||""===t||null===t?"":((t=parseFloat(t).toFixed(2))-parseInt(t)==0&&(t=parseInt(t)),`<data class="${e.format}" style="width:${parseInt(t)}%">${t}%</data>`),license:(t,e,r)=>(t=this.datas[r.dataIndex][e.cellIndex],w(t)),privileges:(t,e,r)=>{t=this.getCellData(e,r);let n="";return Object.entries(t).forEach((([t,e])=>{let r=[];e.length&&(e.forEach((t=>{r.push(t.name)})),n+=`<div class="rights" data-r=${t}>${r.join(", ")}</div>`)})),n},taxa:(t,e,r)=>{let n=[];return t=t.split(","),e.classList.add("break-all"),t.forEach(((t,e)=>{e%2&&n.push(t)})),`<div class="${St.tip}" data-num="${n.length}">${n.join(", ")}</div>`},taxons:(t,e,r)=>{t=this.getCellData(e,r);const n=Object.keys(t).length;return n>0?(t=Object.values(t).join(", "),`<div class="${St.tip}" data-num="${n}">${t}</div>`):""},text:(t,e,r)=>{if((t=this.getCellData(e,r))&&(e.classList.add(St.tip),""!==(t=t.replaceAll("\r\n",", "))))return`<div class="${St.tip}">${t}</div>`}};return s[t]}mapColumn(t,e){const r={select:e,sortable:!0,searchable:!0,hidden:!1,name:this.labelFormatter(t)};if(t.notsortable&&(r.sortable="false"),t.notsearchable||(r.searchable=!0),"true"===t.hidden&&(r.hidden="true"),t.request&&(r.request=t.request),["number","progress","decimal"].find((e=>e===t.format))&&(r.type="number"),"select"===t.field){const e=t.select&&"controls"==t.select?"controls":t.selectcells?"imports":t.select;e&&(this.importfields=t.selectcells?t.selectcells:null,r.render=this.getFormatter(e,t),r.sortable="false",r.searchable="false")}else t.format?r.render=this.getFormatter(t.format,t):t.subfield?r.render=this.getFormatter(t.subfield,t):r.render=(t,e,r)=>this.getCellData(e,r);return r}convertColumns(){return this.params.select&&this.columns.unshift({field:"select",select:this.params.select}),this.columns.map(((t,e)=>this.mapColumn(t,e)))}convertData(t){if(Array.isArray(t[0]))return t;for(let e=0;e<t.length;e++)t[e]=Object.values(t[e]),this.params.select&&t[e].unshift(t[e][0]);return t}initPlugins(t){if(this.params.expand&&this.makeExpandable(t),this.params.export&&this.makeExportable(t),(this.params.details||this.grid.table.querySelector("details[data-what]"))&&this.initDetails(),this.params.onselect&&this.initSelect(t),this.grid.table.querySelector(xt.tip)&&this.initTips(),this.grid.table.querySelectorAll("thead [data-altsort]").length&&this.initAlternateSort(this.grid.table.querySelectorAll("thead [data-altsort]")),this.importfields&&this.initImport(this.params.import),this.params.filters){const t=this.grid.wrapper.querySelector(xt.datatable_top);if(t&&t.children.length){const e=document.querySelector(xt.table_filters);e&&t.prepend(e)}}}initSelect(t){const e=this.grid.table.querySelectorAll('input[name^="'+this.instanceid+'"]');if(0===e.length)return;e[0].name;let r=t.querySelector("."+St.selectaction);if(!r)return;document.body.append(r),r.querySelector("a").addEventListener("click",(t=>{let r=[];e.forEach((t=>{t.checked&&r.push(t.value)})),t.currentTarget.href=this.params.onselect+encodeURI(r.join(","))}));const n=r.querySelector("[data-dismiss]");n&&n.addEventListener("click",(t=>{t.preventDefault(),t.stopImmediatePropagation(),i(null,null)}));const i=(t=null,e=null,i=!1)=>{if(r.dataset.close&&(document.body.append(r),n.classList.remove("hidden"),r.classList.add(St.absinput)),null!==t&&null!==e)r.classList.remove(M.hide),r.style.top=t+"px",r.style.left=e+"px";else if(!0===i)r.classList.add(M.hide),delete r.dataset.close;else{r.dataset.close=!0,n.classList.add("hidden");(this.grid.wrapper.querySelector(xt.datatable_top)?this.grid.wrapper.querySelector(xt.datatable_top):this.grid.wrapper).prepend(r),r.classList.remove(St.absinput)}};e.forEach((t=>{t.addEventListener("change",(e=>{t.checked?i(t.offsetTop,t.offsetLeft):0===this.grid.table.querySelectorAll('input[name^="'+this.instanceid+'"]:checked').length&&i(null,null,!0)}))}))}initDetails(){const t=this.grid.wrapper;let e=t.querySelector("#"+St.tipinline)?t.querySelector("#"+St.tipinline):St.tipinline;const r={waitdiv:this.waitdiv},n=new rt(e,t,r),i=(t,e=null)=>{n.activeDetail(!1),e&&e()},s=(t,e=null)=>{if(n.activeDetail(!0),n.current&&n.current===t)n.expandDetail(t),e&&e();else{n.current&&n.current.querySelector("summary").click();const r="/gui/prj/about/"+t.dataset.id+"?"+new URLSearchParams({partial:!0});n.activeDetail(!0),fetch(r,v()).then((t=>t.text())).then((r=>{n.expandDetail(t,r),e&&e()})).catch((t=>{console.log("request",t)}))}},o=()=>{this.grid.table.querySelectorAll('details[data-what="about"]').forEach((t=>{t.dataset.id;t.dataset.id&&(t=new nt(t,s,i,n.detail))}))};o(),this.grid.on("datatable.sort",(function(t,e){n.activeDetail(!1),o()}))}initAlternateSort(t){const e=this.grid.columns();let r;const n=t=>{let n;n=t.dataset.sortactive===String(r)?t.classList.contains("asc")?"desc":"asc":t.classList.contains("desc")?"desc":"asc",e.sort(r,n),this.grid.on("datatable.sort",((e,n)=>{r!==t.cellIndex&&(t.classList.remove("asc"),t.classList.remove("desc"),this.grid.headings[r].classList.remove(n),t.classList.add(n)),t.dataset.sortactive=r}))};t.forEach((t=>{const e=t.dataset.altsort?t.dataset.altsort.split(","):null;if(!e)return;t.querySelector(".dataTable-sorter").classList.add("disabled");const i=t.querySelector(".sorton");t.append(i);const s=t.querySelectorAll('[role="button"]');r=t.cellIndex,t.addEventListener("click",(e=>{n(t)}),!1);const o=(t,n)=>{r=0===n?t.cellIndex:this.grid.headings.findIndex((t=>t.dataset.name===e[n-1]))};t.dataset.sortactive=t.cellIndex,s.forEach(((e,r)=>{e.addEventListener("click",(e=>{e.preventDefault();const n=e.currentTarget.parentElement.querySelector(".active");n&&n.classList.remove("active"),e.currentTarget.classList.add("active"),o(t,r)}))})),t.dataset.tip&&Object.values(this.grid.table.rows).forEach(((r,n)=>{if(0===n)return;const i=this.grid.headings.findIndex((r=>r.dataset.name===e[parseInt(t.dataset.tip)-1]));i!==t.cellIndex&&(r.cells[t.cellIndex].addEventListener("mouseenter",(t=>{const e=document.createElement("div");e.setAttribute("class",St.tipover),e.innerHTML=r.cells[i].innerHTML,t.currentTarget.append(e)})),r.cells[t.cellIndex].addEventListener("mouseout",(t=>{const e=t.currentTarget.querySelector(xt.tipover);e&&e.remove()})))}))}))}initImport(t){this.columns.forEach(((t,e)=>{this.importfields.indexOf(t.field)>=0&&(this.grid.headings[e].dataset.name=t.field),t.selectcells&&(this.grid.headings[e].dataset.selectcells=t.selectcells),t.data&&Object.entries(t.data).forEach((([t,r])=>{this.grid.headings[e].setAttribute("data-"+t,r)}))})),this.dataImport=new vt(this.grid,t),this.waitdiv.remove()}closeShowfull(){const t=document.querySelector("."+St.tip+"."+St.showfull);t&&t.click()}makeExpandable(t){if(t.querySelector("table").offsetHeight<t.offsetHeight)return;const e=document.createElement("div");e.classList.add("button-expand"),e.classList.add("border-t"),e.title=this.params.expand,e.innerHTML=`<span class="small-caps block mx-auto p-0">${this.params.expand}</span><i class="clear-both p-0 mx-auto icon icon-chevron-down hover:fill-secondblue-500"></i><span class="small-caps block mx-auto p-0 hidden">${this.params.shrink}</span>`,t.parentElement.insertBefore(e,t.nextElementSibling),t.classList.add("overflow-y-hidden"),t.classList.remove("max-tabstat-h"),t.parentElement.style.height="auto";const r=parseInt(this.grid.wrapper.querySelector("tbody tr").offsetHeight)*(t.dataset.maxrows?t.dataset.maxrows:20);t.classList.add("max-h-["+r+"px]"),t.style.height=r+"px",e.addEventListener("click",(n=>{this.closeShowfull(),e.classList.toggle("border-t"),e.classList.toggle("border-b");const i=e.querySelector("i");i.classList.toggle("icon-chevron-down"),i.classList.toggle("icon-chevron-up"),t.classList.toggle("overflow-y-hidden"),t.classList.toggle("max-h-["+r+"px]"),e.querySelectorAll("span").forEach((t=>{t.classList.toggle("hidden")})),t.classList.contains("overflow-y-hidden")?t.style.height=r+"px":t.style.height="auto"}))}makeExportable(t){const e=document.createElement("div");e.classList.add("button-export"),e.classList.add("is-pick"),e.innerHTML=`<i class="icon icon-arrow-down-on-square"></i><span>${this.params.exportlabel?options.exportlabel:"export to "+this.params.export}</span>`,t.prepend(e);const r=this.grid.columns();let n=[];this.columns.forEach(((t,e)=>{"select"===t.field&&n.push(e)})),e.addEventListener("click",(e=>{e.preventDefault(),n.length&&r.hide(n);let i=this.grid.export({type:"csv",download:!1,lineDelimiter:"\n",columnDelimiter:"\t"});i=encodeURI(`data:text/tsv;charset=utf-8,${i}`),S(i,(t.id?t.id:"stats_proj")+".tsv"),n.length&&r.show(n)}))}initTips(){let t=null;this.grid.table.querySelectorAll(xt.tip).forEach((e=>{e.addEventListener("mouseenter",(t=>{(e.classList.contains(St.showfull)||e.scrollHeight>e.offsetHeight)&&(e.style.cursor="pointer")})),e.addEventListener("click",(r=>{const n=window.getComputedStyle(e.parentElement),i=window.getComputedStyle(e.parentElement);if(e.classList.contains(St.showfull))e.classList.remove(St.showfull),e.parentElement.style.minHeight="none",e.parentElement.style.height="auto",e.style.maxWidth=e.dataset.w+"px",e.style.padding=e.dataset.p+"px",t=null;else if(e.scrollHeight>e.offsetHeight){t&&t.classList.remove(St.showfull);const r=parseInt(e.clientHeight);e.parentElement.style.minHeight=e.parentElement.style.height=(r<parseInt(n.maxHeight)?r:parseInt(n.maxHeight))-2*parseInt(n.padding)+"px",e.dataset.w||(e.dataset.w=parseInt(e.clientWidth)),e.dataset.p||(e.dataset.p=parseInt(i.padding)),e.style.maxWidth=parseInt(e.clientWidth)+"px",e.classList.add(St.showfull),e.style.top=parseInt(e.offsetTop)-parseInt(n.padding)+"px",t=e}}))}))}}let At=null;class Ot{constructor(t){if(!At){let e=t.querySelectorAll(q.component.tabs.tabcontrol);0===e.length&&(e=t.querySelectorAll("legend"));let r=0;e.forEach(((e,n)=>{const i=e.dataset.target?t.querySelector("#"+e.dataset.target):e.closest(q.component.tabs.tab);i&&(e.style.left=r+"px",0===n?(i.classList.add(M.active),this.toggleTab(i,!0)):this.toggleTab(i,!1),r+=parseInt(e.offsetWidth)+20,e.addEventListener("click",(t=>{if(!0===t.currentTarget.disabled)return void t.preventDefault();const e=i.parentElement.querySelector(q.component.tabs.tab+"."+M.active);null!==e&&(e.classList.remove(M.active),this.toggleTab(e,!1)),i.classList.add(M.active),this.toggleTab(i,!0)})))})),this.toggleDisplayListener(t,e),At=this}return At}toggleTab(t,e){t.querySelectorAll(q.component.tabs.tabcontent).forEach((r=>{!0===e?r.classList.remove(M.hide):t.classList.contains("active")||r.classList.add(M.hide)}))}toggleDisplayListener(t,e){const r=t.querySelector('[data-dismiss="tabs"]'),n=(t,e,r)=>{e.disabled=r,this.toggleTab(e.closest(q.component.tabs.tab),r)};r&&r.addEventListener("click",(r=>{let i;t.classList.contains(M.component.tabs.name)?(t.classList.remove(M.component.tabs.name),e.forEach(((t,e)=>n(0,t,!0))),i=t.querySelector(".icon-arrow-pointing-out"),i.classList.remove("icon-arrow-pointing-out"),i.classList.add("icon-arrow-pointing-in")):(t.classList.add(M.component.tabs.name),e.forEach(((t,e)=>n(0,t,!1))),i=t.querySelector(".icon-arrow-pointing-in"),i.classList.remove("icon-arrow-pointing-in"),i.classList.add("icon-arrow-pointing-out"))}))}}var Lt={},Tt=Uint8Array,kt=Uint16Array,It=Uint32Array,jt=new Tt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ct=new Tt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Pt=new Tt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_t=function(t,e){for(var r=new kt(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];var i=new It(r[30]);for(n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)i[s]=s-r[n]<<5|n;return[r,i]},Ft=_t(jt,2),Mt=Ft[0],qt=Ft[1];Mt[28]=258,qt[258]=28;for(var Dt=_t(Ct,0),Ht=(Dt[0],Dt[1]),Rt=new kt(32768),Nt=0;Nt<32768;++Nt){var zt=(43690&Nt)>>>1|(21845&Nt)<<1;zt=(61680&(zt=(52428&zt)>>>2|(13107&zt)<<2))>>>4|(3855&zt)<<4,Rt[Nt]=((65280&zt)>>>8|(255&zt)<<8)>>>1}var $t=function(t,e,r){for(var n=t.length,i=0,s=new kt(e);i<n;++i)t[i]&&++s[t[i]-1];var o,a=new kt(e);for(i=0;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;if(r){o=new kt(1<<e);var l=15-e;for(i=0;i<n;++i)if(t[i])for(var c=i<<4|t[i],d=e-t[i],u=a[t[i]-1]++<<d,p=u|(1<<d)-1;u<=p;++u)o[Rt[u]>>>l]=c}else for(o=new kt(n),i=0;i<n;++i)t[i]&&(o[i]=Rt[a[t[i]-1]++]>>>15-t[i]);return o},Bt=new Tt(288);for(Nt=0;Nt<144;++Nt)Bt[Nt]=8;for(Nt=144;Nt<256;++Nt)Bt[Nt]=9;for(Nt=256;Nt<280;++Nt)Bt[Nt]=7;for(Nt=280;Nt<288;++Nt)Bt[Nt]=8;var Ut=new Tt(32);for(Nt=0;Nt<32;++Nt)Ut[Nt]=5;var Wt=$t(Bt,9,0),Vt=$t(Ut,5,0),Gt=function(t){return(t+7)/8|0},Yt=function(t,e,r){(null==e||e<0)&&(e=0),(null==r||r>t.length)&&(r=t.length);var n=new(2==t.BYTES_PER_ELEMENT?kt:4==t.BYTES_PER_ELEMENT?It:Tt)(r-e);return n.set(t.subarray(e,r)),n},Kt=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Jt=function(t,e,r){var n=new Error(e||Kt[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,Jt),!r)throw n;return n},Qt=function(t,e,r){r<<=7&e;var n=e/8|0;t[n]|=r,t[n+1]|=r>>>8},Xt=function(t,e,r){r<<=7&e;var n=e/8|0;t[n]|=r,t[n+1]|=r>>>8,t[n+2]|=r>>>16},Zt=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var i=r.length,s=r.slice();if(!i)return[oe,0];if(1==i){var o=new Tt(r[0].s+1);return o[r[0].s]=1,[o,1]}r.sort((function(t,e){return t.f-e.f})),r.push({s:-1,f:25001});var a=r[0],l=r[1],c=0,d=1,u=2;for(r[0]={s:-1,f:a.f+l.f,l:a,r:l};d!=i-1;)a=r[r[c].f<r[u].f?c++:u++],l=r[c!=d&&r[c].f<r[u].f?c++:u++],r[d++]={s:-1,f:a.f+l.f,l:a,r:l};var p=s[0].s;for(n=1;n<i;++n)s[n].s>p&&(p=s[n].s);var h=new kt(p+1),f=te(r[d-1],h,0);if(f>e){n=0;var m=0,g=f-e,y=1<<g;for(s.sort((function(t,e){return h[e.s]-h[t.s]||t.f-e.f}));n<i;++n){var v=s[n].s;if(!(h[v]>e))break;m+=y-(1<<f-h[v]),h[v]=e}for(m>>>=g;m>0;){var b=s[n].s;h[b]<e?m-=1<<e-h[b]++-1:++n}for(;n>=0&&m;--n){var w=s[n].s;h[w]==e&&(--h[w],++m)}f=e}return[new Tt(h),f]},te=function(t,e,r){return-1==t.s?Math.max(te(t.l,e,r+1),te(t.r,e,r+1)):e[t.s]=r},ee=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new kt(++e),n=0,i=t[0],s=1,o=function(t){r[n++]=t},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return[r.subarray(0,n),e]},re=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},ne=function(t,e,r){var n=r.length,i=Gt(e+2);t[i]=255&n,t[i+1]=n>>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<n;++s)t[i+s+4]=r[s];return 8*(i+4+n)},ie=function(t,e,r,n,i,s,o,a,l,c,d){Qt(e,d++,r),++i[256];for(var u=Zt(i,15),p=u[0],h=u[1],f=Zt(s,15),m=f[0],g=f[1],y=ee(p),v=y[0],b=y[1],w=ee(m),S=w[0],x=w[1],E=new kt(19),A=0;A<v.length;++A)E[31&v[A]]++;for(A=0;A<S.length;++A)E[31&S[A]]++;for(var O=Zt(E,7),L=O[0],T=O[1],k=19;k>4&&!L[Pt[k-1]];--k);var I,j,C,P,_=c+5<<3,F=re(i,Bt)+re(s,Ut)+o,M=re(i,p)+re(s,m)+o+14+3*k+re(E,L)+(2*E[16]+3*E[17]+7*E[18]);if(_<=F&&_<=M)return ne(e,d,t.subarray(l,l+c));if(Qt(e,d,1+(M<F)),d+=2,M<F){I=$t(p,h,0),j=p,C=$t(m,g,0),P=m;var q=$t(L,T,0);Qt(e,d,b-257),Qt(e,d+5,x-1),Qt(e,d+10,k-4),d+=14;for(A=0;A<k;++A)Qt(e,d+3*A,L[Pt[A]]);d+=3*k;for(var D=[v,S],H=0;H<2;++H){var R=D[H];for(A=0;A<R.length;++A){var N=31&R[A];Qt(e,d,q[N]),d+=L[N],N>15&&(Qt(e,d,R[A]>>>5&127),d+=R[A]>>>12)}}}else I=Wt,j=Bt,C=Vt,P=Ut;for(A=0;A<a;++A)if(n[A]>255){N=n[A]>>>18&31;Xt(e,d,I[N+257]),d+=j[N+257],N>7&&(Qt(e,d,n[A]>>>23&31),d+=jt[N]);var z=31&n[A];Xt(e,d,C[z]),d+=P[z],z>3&&(Xt(e,d,n[A]>>>5&8191),d+=Ct[z])}else Xt(e,d,I[n[A]]),d+=j[n[A]];return Xt(e,d,I[256]),d+j[256]},se=new It([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),oe=new Tt(0),ae=function(t,e,r,n,i,s){var o=t.length,a=new Tt(n+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(n,a.length-i),c=0;if(!e||o<8)for(var d=0;d<=o;d+=65535){var u=d+65535;u>=o&&(l[c>>3]=s),c=ne(l,c+1,t.subarray(d,u))}else{for(var p=se[e-1],h=p>>>13,f=8191&p,m=(1<<r)-1,g=new kt(32768),y=new kt(m+1),v=Math.ceil(r/3),b=2*v,w=function(e){return(t[e]^t[e+1]<<v^t[e+2]<<b)&m},S=new It(25e3),x=new kt(288),E=new kt(32),A=0,O=0,L=(d=0,0),T=0,k=0;d<o;++d){var I=w(d),j=32767&d,C=y[I];if(g[j]=C,y[I]=j,T<=d){var P=o-d;if((A>7e3||L>24576)&&P>423){c=ie(t,l,0,S,x,E,O,L,k,d-k,c),L=A=O=0,k=d;for(var _=0;_<286;++_)x[_]=0;for(_=0;_<30;++_)E[_]=0}var F=2,M=0,q=f,D=j-C&32767;if(P>2&&I==w(d-D))for(var H=Math.min(h,P)-1,R=Math.min(32767,d),N=Math.min(258,P);D<=R&&--q&&j!=C;){if(t[d+F]==t[d+F-D]){for(var z=0;z<N&&t[d+z]==t[d+z-D];++z);if(z>F){if(F=z,M=D,z>H)break;var $=Math.min(D,z-2),B=0;for(_=0;_<$;++_){var U=d-D+_+32768&32767,W=U-g[U]+32768&32767;W>B&&(B=W,C=U)}}}D+=(j=C)-(C=g[j])+32768&32767}if(M){S[L++]=268435456|qt[F]<<18|Ht[M];var V=31&qt[F],G=31&Ht[M];O+=jt[V]+Ct[G],++x[257+V],++E[G],T=d+F,++A}else S[L++]=t[d],++x[t[d]]}}c=ie(t,l,s,S,x,E,O,L,k,d-k,c),!s&&7&c&&(c=ne(l,c+1,oe))}return Yt(a,0,n+Gt(c)+i)},le=function(){for(var t=new Int32Array(256),e=0;e<256;++e){for(var r=e,n=9;--n;)r=(1&r&&-306674912)^r>>>1;t[e]=r}return t}(),ce=function(){var t=-1;return{p:function(e){for(var r=t,n=0;n<e.length;++n)r=le[255&r^e[n]]^r>>>8;t=r},d:function(){return~t}}},de=function(t,e,r,n,i){return ae(t,null==e.level?6:e.level,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,r,n,!i)},ue=function(t,e){var r={};for(var n in t)r[n]=t[n];for(var n in e)r[n]=e[n];return r},pe=function(t,e,r){for(var n=t(),i=t.toString(),s=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/\s+/g,"").split(","),o=0;o<n.length;++o){var a=n[o],l=s[o];if("function"==typeof a){e+=";"+l+"=";var c=a.toString();if(a.prototype)if(-1!=c.indexOf("[native code]")){var d=c.indexOf(" ",8)+1;e+=c.slice(d,c.indexOf("(",d))}else for(var u in e+=c,a.prototype)e+=";"+l+".prototype."+u+"="+a.prototype[u].toString();else e+=c}else r[l]=a}return[e,r]},he=[],fe=function(t,e,r,n){var i;if(!he[r]){for(var s="",o={},a=t.length-1,l=0;l<a;++l)s=(i=pe(t[l],s,o))[0],o=i[1];he[r]=pe(t[a],s,o)}var c=ue({},he[r][1]);return function(t,e,r,n,i){var s=new Worker(Lt[e]||(Lt[e]=URL.createObjectURL(new Blob([t+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return s.onmessage=function(t){var e=t.data,r=e.$e$;if(r){var n=new Error(r[0]);n.code=r[1],n.stack=r[2],i(n,null)}else i(null,e)},s.postMessage(r,n),s}(he[r][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",r,c,function(t){var e=[];for(var r in t)t[r].buffer&&e.push((t[r]=new t[r].constructor(t[r])).buffer);return e}(c),n)},me=function(){return[Tt,kt,It,jt,Ct,Pt,qt,Ht,Wt,Bt,Vt,Ut,Rt,se,oe,$t,Qt,Xt,Zt,te,ee,re,ne,ie,Gt,Yt,ae,de,Ee,ge]},ge=function(t){return postMessage(t,[t.buffer])},ye=function(t){return t.ondata=function(t,e){return postMessage([t,e],[t.buffer])},function(e){return t.push(e.data[0],e.data[1])}},ve=function(t,e,r,n,i){var s,o=fe(t,n,i,(function(t,r){t?(o.terminate(),e.ondata.call(e,t)):(r[1]&&o.terminate(),e.ondata.call(e,t,r[0],r[1]))}));o.postMessage(r),e.push=function(t,r){e.ondata||Jt(5),s&&e.ondata(Jt(4,0,1),null,!!r),o.postMessage([t,s=r],[t.buffer])},e.terminate=function(){o.terminate()}},be=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8};function we(t,e){return e||"function"!=typeof t||(e=t,t={}),this.ondata=e,t}var Se=function(){function t(t,e){e||"function"!=typeof t||(e=t,t={}),this.ondata=e,this.o=t||{}}return t.prototype.p=function(t,e){this.ondata(de(t,this.o,0,0,!e),e)},t.prototype.push=function(t,e){this.ondata||Jt(5),this.d&&Jt(4),this.d=e,this.p(t,e||!1)},t}(),xe=function(){return function(t,e){ve([me,function(){return[ye,Se]}],this,we.call(this,t,e),(function(t){var e=new Se(t.data);onmessage=ye(e)}),6)}}();function Ee(t,e){return de(t,e||{},0,0)}var Ae="undefined"!=typeof TextEncoder&&new TextEncoder,Oe="undefined"!=typeof TextDecoder&&new TextDecoder;try{Oe.decode(oe,{stream:!0}),1}catch(t){}function Le(t,e){if(e){for(var r=new Tt(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}if(Ae)return Ae.encode(t);var i=t.length,s=new Tt(t.length+(t.length>>1)),o=0,a=function(t){s[o++]=t};for(n=0;n<i;++n){if(o+5>s.length){var l=new Tt(o+8+(i-n<<1));l.set(s),s=l}var c=t.charCodeAt(n);c<128||e?a(c):c<2048?(a(192|c>>6),a(128|63&c)):c>55295&&c<57344?(a(240|(c=65536+(1047552&c)|1023&t.charCodeAt(++n))>>18),a(128|c>>12&63),a(128|c>>6&63),a(128|63&c)):(a(224|c>>12),a(128|c>>6&63),a(128|63&c))}return Yt(s,0,o)}var Te=function(t){return 1==t?3:t<6?2:9==t?1:0},ke=function(t){var e=0;if(t)for(var r in t){var n=t[r].length;n>65535&&Jt(9),e+=n+4}return e},Ie=function(t,e,r,n,i,s,o,a){var l=n.length,c=r.extra,d=a&&a.length,u=ke(c);be(t,e,null!=o?33639248:67324752),e+=4,null!=o&&(t[e++]=20,t[e++]=r.os),t[e]=20,e+=2,t[e++]=r.flag<<1|(s<0&&8),t[e++]=i&&8,t[e++]=255&r.compression,t[e++]=r.compression>>8;var p=new Date(null==r.mtime?Date.now():r.mtime),h=p.getFullYear()-1980;if((h<0||h>119)&&Jt(10),be(t,e,h<<25|p.getMonth()+1<<21|p.getDate()<<16|p.getHours()<<11|p.getMinutes()<<5|p.getSeconds()>>>1),e+=4,-1!=s&&(be(t,e,r.crc),be(t,e+4,s<0?-s-2:s),be(t,e+8,r.size)),be(t,e+12,l),be(t,e+14,u),e+=16,null!=o&&(be(t,e,d),be(t,e+6,r.attrs),be(t,e+10,o),e+=14),t.set(n,e),e+=l,u)for(var f in c){var m=c[f],g=m.length;be(t,e,+f),be(t,e+2,g),t.set(m,e+4),e+=4+g}return d&&(t.set(a,e),e+=d),e},je=function(t,e,r,n,i){be(t,e,101010256),be(t,e+8,r),be(t,e+10,r),be(t,e+12,n),be(t,e+16,i)},Ce=function(){function t(t){this.filename=t,this.c=ce(),this.size=0,this.compression=0}return t.prototype.process=function(t,e){this.ondata(null,t,e)},t.prototype.push=function(t,e){this.ondata||Jt(5),this.c.p(t),this.size+=t.length,e&&(this.crc=this.c.d()),this.process(t,e||!1)},t}(),Pe=function(){function t(t,e){var r=this;e||(e={}),Ce.call(this,t),this.d=new Se(e,(function(t,e){r.ondata(null,t,e)})),this.compression=8,this.flag=Te(e.level)}return t.prototype.process=function(t,e){try{this.d.push(t,e)}catch(t){this.ondata(t,null,e)}},t.prototype.push=function(t,e){Ce.prototype.push.call(this,t,e)},t}(),_e=function(){function t(t,e){var r=this;e||(e={}),Ce.call(this,t),this.d=new xe(e,(function(t,e,n){r.ondata(t,e,n)})),this.compression=8,this.flag=Te(e.level),this.terminate=this.d.terminate}return t.prototype.process=function(t,e){this.d.push(t,e)},t.prototype.push=function(t,e){Ce.prototype.push.call(this,t,e)},t}(),Fe=function(){function t(t){this.ondata=t,this.u=[],this.d=1}return t.prototype.add=function(t){var e=this;if(this.ondata||Jt(5),2&this.d)this.ondata(Jt(4+8*(1&this.d),0,1),null,!1);else{var r=Le(t.filename),n=r.length,i=t.comment,s=i&&Le(i),o=n!=t.filename.length||s&&i.length!=s.length,a=n+ke(t.extra)+30;n>65535&&this.ondata(Jt(11,0,1),null,!1);var l=new Tt(a);Ie(l,0,t,r,o,-1);var c=[l],d=function(){for(var t=0,r=c;t<r.length;t++){var n=r[t];e.ondata(null,n,!1)}c=[]},u=this.d;this.d=0;var p=this.u.length,h=ue(t,{f:r,u:o,o:s,t:function(){t.terminate&&t.terminate()},r:function(){if(d(),u){var t=e.u[p+1];t?t.r():e.d=1}u=1}}),f=0;t.ondata=function(r,n,i){if(r)e.ondata(r,n,i),e.terminate();else if(f+=n.length,c.push(n),i){var s=new Tt(16);be(s,0,134695760),be(s,4,t.crc),be(s,8,f),be(s,12,t.size),c.push(s),h.c=f,h.b=a+f+16,h.crc=t.crc,h.size=t.size,u&&h.r(),u=1}else u&&d()},this.u.push(h)}},t.prototype.end=function(){var t=this;2&this.d?this.ondata(Jt(4+8*(1&this.d),0,1),null,!0):(this.d?this.e():this.u.push({r:function(){1&t.d&&(t.u.splice(-1,1),t.e())},t:function(){}}),this.d=3)},t.prototype.e=function(){for(var t=0,e=0,r=0,n=0,i=this.u;n<i.length;n++){r+=46+(l=i[n]).f.length+ke(l.extra)+(l.o?l.o.length:0)}for(var s=new Tt(r+22),o=0,a=this.u;o<a.length;o++){var l=a[o];Ie(s,t,l,l.f,l.u,-l.c-2,e,l.o),t+=46+l.f.length+ke(l.extra)+(l.o?l.o.length:0),e+=l.b}je(s,t,this.u.length,r,e),this.ondata(null,s,!0),this.d=2},t.prototype.terminate=function(){for(var t=0,e=this.u;t<e.length;t++){e[t].t()}this.d=2},t}();"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;const Me=new Set(["zip","gz","png","jpg","jpeg","pdf","doc","docx","ppt","pptx","xls","xlsx","heic","heif","7z","bz2","rar","gif","webp","webm","mp4","mov","mp3","aifc"]);let qe=null;const De="ecotaxa_import";class He{zipstream;zipsize=0;pathname;zipname;counter=0;counterdisplay=null;ziptrigger=null;displaylist=null;timer=0;targetdir="";dropzone;constructor(t,e=null,r={}){if(qe)return qe;if(!(t=t instanceof HTMLElement?t:document.querySelector(t)))return;this.container=t,this.callback=e;return this.options=Object.assign({level:0,url:"http://193.49.112.116:5001/api/my_files/",filefield:"file",selector:{makezip:".makezip",droptarget:".droptarget",trigger:".trigger",uploadfile:"uploadfile",formu:"formupload",stepper:"stepper",stepitem:"stepper-item",filetoload:"file_to_load",progress:"progress-upload"},display:{dropzone:"dropzone",counter:"counter",size:"sizetozip",counterzipped:"counterzipped",sizezipped:"sizezipped",dirlist:"dirlist",boxtitle:"boxtitle",timer:"timer"},css:{enabled:"enabled"}},r),this.init(t),qe=this,qe}init(t){this.dropzone=document.createElement("div"),this.dropzone.id=this.options.display.dropzone,this.dropzone.innerHTML=`<input type="file" class="hidden"  name="${this.options.selector.uploadfile}" id="${this.options.selector.uploadfile}">\n            <div class="${this.options.selector.droptarget.slice(1)}">\n            <div id="${this.options.display.boxtitle}"><span class="${this.options.selector.trigger.slice(1)}">${this.container.dataset.textbrowse}</span>  ${this.container.dataset.textdrop}</div>\n          </div><div><span id="${this.options.display.counter}"></span>/<span id="${this.options.display.counterzipped}"></span></div>\n          <div><span id="${this.options.display.size}"></span>/<span id="${this.options.display.sizezipped}"></span></div><div id="${this.options.display.timer}"></div>\n          <div id="${this.options.selector.makezip.slice(1)}" class="button ${this.options.selector.makezip.slice(1)} ${M.hide} "><div id="${this.options.selector.progress}"></div>${t.dataset.ended}</div>`,t.append(this.dropzone),this.counterdisplay=document.getElementById(this.options.display.counter),this.counterzippeddisplay=document.getElementById(this.options.display.counterzipped),this.sizedisplay=document.getElementById(this.options.display.size),this.sizezippeddisplay=document.getElementById(this.options.display.sizezipped),this.ziptrigger=t.querySelector(this.options.selector.makezip),this.displaylist=document.getElementById(this.options.display.dirlist);const e=this.container.querySelector(this.options.selector.droptarget);e.addEventListener("dragover",(t=>{this.handleDragOver(t)})),e.addEventListener("drop",(async t=>{this.handleDrop(t)})),t.querySelector(this.options.selector.trigger).addEventListener("click",(t=>{let e=t;this.openDirDialog(".tsv,.png,.jpg, .jpeg,.zip,.gz,.7z,.bz2",(t=>{console.log("edrop",e)}))}))}attachDropzone(t){console.log("attch",t),this.targetdir=t.parentElement.dataset.name?t.parentElement.dataset.name:"",console.log("targetdir",this.targetdir),this.dropzone.classList.add(this.options.css.enabled),console.log("att",this.dropzone),t.append(this.dropzone)}detachDropzone(){this.targetdir=null,this.container.classList.remove(this.options.css.enabled)}openDirDialog(t,e){const r=document.createElement("input");r.type="file",r.directory=!0,r.multiple=!0,r.webkitdirectory=!0,r.allowdirs=!0,r.accept=t,r.addEventListener("change",e),r.dispatchEvent(new MouseEvent("click"))}handleDragOver(t){t.preventDefault(),t.dataTransfer.dropEffect="move"}handleDrop(t){let e;t.dataTransfer?(t.preventDefault(),e=t.dataTransfer):e=t;const r=[...e.items?e.items:e.files];for(let t=0;t<r.length;t++){let e=r[t].webkitGetAsEntry();if(!0===e.isDirectory){this.enableDropzone(!1);const t=(t,e,r,n)=>{this.timer=new Date,console.log("item-------------------------------------",e),this.enableDropzone(),this.ziptrigger.classList.remove(M.hide),this.ziptrigger.addEventListener("click",(t=>{console.log("upload click"),e.end(),this.enableDropzone(!1,!0);const n=new Response(r);console.log("zipResp",n),this.sendZip(n)}))},r=t=>{console.log("err_read_dir",t)};this.zipname=e.name+".zip",this.pathname=e.fullPath.slice(1).split("."),this.readDirectory(e,t,r)}else e.isFile}}stopOnError(t){console.log("err",t)}incrementCounter(t){this.counter++,this.counterdisplay.textContent=this.counter}decrementCounter(t){this.counter--,this.counterdisplay.textContent=this.counter}enableDropzone(t=!0,e=!1){e&&this.dropzone.classList.add(M.hide),t?this.dropzone.classList.add(this.options.css.enabled):this.dropzone.classList.remove(this.options.css.enabled)}fileType(t){const e=new Uint8Array(t);let r=[];for(let t=0;t<4;t++)r.push(e[t].toString(16));return{input:e,mimetype:(t=>{switch(t){case"89504E47":return"image/png";case"47494638":return"image/gif";case"25504446":return"application/pdf";case"FFD8FFDB":case"FFD8FFE0":case"FFD8FFE1":return"image/jpeg";case"504B0304":return"application/zip";case"EFBBBF22":return"text/tsv";default:return console.log("unknownsign",t),"unknown"}})(t=r.join("").toUpperCase())}}fflToStream(t){const e=this;return new ReadableStream({start(r){t.ondata=(t,n,i)=>{t?r.error(t):(e.zipsize+=n.length,r.enqueue(n),i&&r.close())}},cancel(){t.terminate()}})}async readDirectory(t,e,r,n,i){let s=!1,o=!1,a=[],l=[];const c=t=>{console.log("on_error",t),s||(s=!0,r(t))};n=n||new Fe,i=i||this.fflToStream(n);const d=async(t,e,r)=>{this.incrementCounter(t.size),this.addFileToZip(t,e,n,r)},u=async()=>{if(l.length){const t=l.shift();await t(),u()}},p=async(t,r,n,i)=>{if(t.length){const s=t.shift();if(s.isFile){const a=()=>{console.log("entrieslengthleft ",t.length),!t.length&&l.length&&(console.log("serialize"),u()),o&&!t.length?(console.log("oncomplete"),e([],r,n,i)):p(t,r,n,i)};s.file((t=>d(t,s.fullPath.slice(1),a)))}else s.isDirectory&&l.push((async()=>{this.readDirectory(s,p,i,r,n)}))}},h=t.createReader(),f=async t=>{t.length||s?await h.readEntries(f,c):a.length?o=!0:e([],n,i,c),a=[...a,...t],o&&p(a,n,i,c)};h.readEntries(f,c)}compressionLevel(t){if(!t)return console.log("name",t),-1;let e=t.split(".");return e=e.length>1?e[e.length-1]:e[0],Me.find((t=>t===e))?2:this.options.level}sendZip(t){const e=2e5;Math.round(this.zipsize/e);(async()=>{const n=t.body.getReader();let i=[],s=0,o=0;for(;;){const{done:t,value:a}=await n.read();if(t)return void r(i,s,o,!0);i.push(a),o+=a.length,o>=e&&(r(i,s,o,!1),s+=o,i=[],o=0)}n.releaseLock()})();const r=(t,e,r,n=!1)=>{console.log("fetch_range "+n+" start="+e+"end="+r,t);const i=new FormData;i.append("path",this.pathname),i.append("tag",De),n&&i.append("final",n),i.append(this.options.filefield,new Blob(t),this.zipname);const s=e+r;t=(t=>{const e=new TextEncoder;return Array.from(e.encode(t)).map((t=>t.toString(16).padStart(2,"0"))).join("")})(r)+"\r\n"+t+"\r\n";const o=new Request(this.options.url,v({method:"POST",body:i,headers:{"Content-Type":"Application-octetstream","Transfer-Encoding":"chunked","Content-Range":"bytes "+e+"-"+s+"/"+this.zipsize}}));fetch(o).then((t=>t.json())).then((t=>{if(!n)return[];{const e=document.getElementById(this.options.selector.filetoload);e&&(e.value=y().sanitize(t)),console.log("json",t),console.log("timer",(new Date-this.timer)/1e3),console.log("sent"),this.callback&&this.callback(t,De)}})).catch((t=>{console.log("reserror",t)}))}}async addFileToZip(t,e,r,n){const i=this,s=e.slice(e.lastIndexOf(".")+1),o=Me.has(s)?new Ce(e):t.size>5e5?new _e(e,{level:9}):new Pe(e,{level:9});o.ondata=(t,e,r)=>{t&&console.log("err add chunk to zipfile"+e,t)},r.add(o);return await(async()=>{const e=t.stream().getReader();try{for(;;){const{done:r,value:s}=await e.read();if(r)return o.push(new Uint8Array(0),!0),i.decrementCounter(t.size),n&&n(),r;o.push(s)}}finally{e.releaseLock()}})()}}class Re{jsUpload=null;constructor(t,e={enableupload:!0}){if(!(t=t instanceof HTMLElement?t:document.querySelector(t)))return;this.container=t;this.options=Object.assign({url:"/gui/job/my_files",displaylist:"dirlist",upload:{label:"upload"},selector:{doupload:".target-upload"},css:{dropzone:"dropzone"}},e),!0===this.options.enableupload&&this.addUploadDialog(this.container,this.options.upload.callback)}listDir(t="",e,r,n){e=e||this.options.displaylist;const i="ul"===(r=r?"select"===r?"optiongroup":r:this.options.enableupload?"select":"ul")?"li":"option";n=n?n+2:0,fetch(this.options.url+"/"+t,v()).then((t=>t.json())).then((s=>{if(s.entries&&s.entries.length){e.dataset.label&&e.insertAdjacentHTML("afterbegin",`<label>${e.dataset.label}</label>`);let o=[`<${r} class="entries ml-${n}">`];const a=(t,e)=>{t.forEach((t=>{const r=t.name.split(".").pop();e.push(`<${i} ${"D"===t.type?'draggable="true"':""} data-name="${t.name}"><span class="entry${t.type}"><i class="icon icon-${"D"===t.type?"folder-sm":N.tsv.split(",").indexOf(r)>=0?"document-sm":"photo-sm"} align-text-bottom mb-0.5 mr-0.5"></i>${t.name}</span>`),e.push(`</${i}>`)}))};a(s.entries,o),o.push(`</${r}>`),e.insertAdjacentHTML("beforeend",o.join("")),e.querySelectorAll(".entryD").forEach((e=>e.addEventListener("click",(e=>{e.stopImmediatePropagation();const i=e.currentTarget.parentElement;i.classList.toggle("on");const s=e.currentTarget.querySelector("i.icon");s&&(s.classList.toggle("icon-folder-sm"),s.classList.toggle("icon-folder-open-sm")),console.log("dir",i),i.classList.contains("on")&&(i.dataset.load||(this.listDir(t+"/"+i.dataset.name,i,r,n),i.dataset.load=!0)),i.lastElementChild&&i.lastElementChild.classList.toggle("hidden")}))))}this.options.callback&&this.options.callback()}))}addUploadDialog(t,e){t=t||this.container,e=e||null,this.jsUpload||(this.jsUpload=new He(this.container,e)),this.jsUpload.attachDropzone(t)}}class Ne{typeimport;myFiles;constructor(t,e={}){if(!(t=t instanceof HTMLElement?t:document.querySelector(t)))return;this.container=t;this.options=Object.assign({url:"http://193.49.112.116:5001/gui/job/my_files/",selector:{displayselection:"dirlist",displayresult:"results",typeimport:"typeimport",importzone:"file_to_load"}},e),this.init()}init(){this.container.querySelectorAll('input[name="'+this.options.selector.typeimport+'"]').forEach((t=>{t.addEventListener("change",(t=>{t.currentTarget.checked&&(console.log(t.currentTarget),this.typeimport=t.currentTarget.value,this.showSelection(!0))}))})),this.showSelection()}showSelection(t=!1){const e=document.getElementById(this.options.selector.displayselection),r=document.getElementById(this.options.selector.displayresult);e&&r&&(this.myFiles||(this.myFiles=new Re(e,{enableupload:!0,callback:()=>{this.activateDragDrop()},upload:{label:e.dataset.uploadlabel?e.dataset.uploadlabel:"upload",callback:t=>{console.log("response",t),t.err?console.log("err",t.err):(this.addImportPath(t.response),this.showSubmit())}}})),e.dataset.loaded||(this.myFiles.listDir("",e,0),e.dataset.loaded=!0),!0===t&&(()=>{let t=this.typeimport.split("-");t=t.map((t=>new Set([...N[t]?N[t]:[]]))),this.myFiles.container.querySelectorAll("[data-ftype]").forEach((e=>{t.has(e.dataset.ftype)?e.classList.remove("disabled"):e.classList.add("disabled")}))})())}addImportPath(t){document.getElementById(this.options.selector.importzone).value=t;const e=document.getElementById(this.options.selector.displayresult);e&&(e.innerHTML=`<li>${t.split("/").pop()}</li>`);this.container.querySelector("#"+this.options.selector.importoptions)}activateDragDrop(){const t=document.getElementById(this.options.selector.displayresult);t.addEventListener("dragover",(t=>{t.preventDefault(),t.target.classList.add("active"),t.dataTransfer.dropEffect="copy"})),t.addEventListener("drop",(t=>{t.target.classList.remove("active"),t.preventDefault();const e=t.dataTransfer.getData("text/html");t.target.insertAdjacentHTML("beforeend",e)}));const e=t=>{t.dataTransfer.dropEffect="copy",t.dataTransfer.setData("text/html",t.target.outerHTML)};this.myFiles.container.querySelectorAll("[draggable]").forEach((t=>{t.addEventListener("dragstart",e)}))}showSubmit(t=!0){const e=this.container.querySelector('[type="submit"]');console.log("sub",e),t?(e.classList.remove("hide"),e.disabled=!1):e.disabled=!0}}class ze{async applyTo(t=document){t&&await this.activate(t)}async activate(t){t.querySelectorAll(".js").forEach((async t=>{t.classList.forEach((async e=>{if(0===e.indexOf("js-"))switch(e){case"js-privacy":document.querySelectorAll(".RDOpt").forEach((t=>t.addEventListener("click",(t=>{fetch("/setprivacy/"+y().sanitize(t.target.value),fethSettings()).then((t=>t.text())).then((t=>{s.reload(!0)}))}))));break;case"js-datatable":new Et(t);break;case"js-hierarchy":break;case"js-topsearch":const e=t.closest(".search");if(!e)return;const r=e.querySelector(".trigger");if(!r)return;const n=e.querySelector(".searchbox");if(!n)return;const i=e.previousElementSibling&&e.previousElementSibling.classList.contains(".top-title")?e.previousElementSibling:null;r.addEventListener("click",(t=>{n.classList.toggle("hidden"),i&&i.classList.toggle("hidesm"),t.currentTarget.querySelector("i").classList.toggle("icon-cancel"),t.currentTarget.querySelector("i").classList.toggle("p-0.5"),t.currentTarget.querySelector("i").classList.toggle("icon-search")}));case"js-autocomplete":(new dt).applyTo(t);break;case"js-privilege":new mt;break;case"js-tabs":new Ot(t);break;case"js-nav":let s=window.location.href.split("?");t.querySelectorAll("a").forEach((t=>{t.href.split("?")[0]!==s[0]||t.parentElement.classList.add("active")}));break;case"js-import":new Ne(t);break;case"js-my-files":new JsMyFiles(t);break;case"js-upload":new JsUpload(t);break;case"js-submit":let o,a="click",l=t.querySelector('[type="submit"]')?t.querySelector('input[type="submit"]'):t.querySelector('[data-action="submit"]');if(l?(delete l.dataset.action,o=l.dataset.target?document.querySelector(l.dataset.target):l.closest("form")):(l=t,o=t,a="submit"),!o)return;l.addEventListener(a,(async t=>{t.preventDefault();const e=new pt(o),r=await e.submitHandler();e&&r&&o.submit()}));break;case"js-alerts":if(!t.dataset.message)return;(new $).build({dismissible:!t.dataset.dismissible||t.dataset.dismissible,insertafter:!0,codeid:!0,message:t.dataset.message,type:t.dataset.type?t.dataset.type:"warning"});break;case"js-notifications":(e=>{fetch("/gui/jobssummary",v()).then((t=>t.text())).then((e=>{t.innerHTML=y().sanitize(e)}))})(6e4);break;case"js-accordions":t.querySelectorAll(t.dataset.detail?t.dataset.detail:"detail").forEach((e=>{const r=e.querySelector(t.dataset.summary?t.dataset.summary:"summary");new nt(e,null,null,null,{},r)}));break;case"js-license":t.innerHTML=w(y().sanitize(t.innerHTML),t.dataset.withlink)}}))}))}}const $e={show:"triggershow",hide:"triggerhide"};class Be{constructor(t=document){if(!t)return;let e;e=t.querySelectorAll("[data-action]"),this.activateActions(e)}async activateActions(t){t.forEach((async t=>{const e=t.dataset.event||"click";switch(t.dataset.action){case"toggle":const r=t.dataset.target?document.querySelectorAll(t.dataset.target):t.nextElementSibling?[t.nextElementSibling]:null;if(!r)return;const n=t.dataset.what?t.dataset.what:M.hide;t.addEventListener(e,(e=>{r.forEach((t=>t.classList.toggle(n))),t.classList.toggle($e.show),t.classList.toggle($e.hide)}));break;case"gotop":t.addEventListener(e,(async e=>{e.preventDefault();let r=t.dataset.target?document.getElementById(t.dataset.target):window;r!==window&&r.classList.contains(M.modal)&&(r=r.querySelector(q.component.modal.modalcontent)),null!==r&&r.scrollTo({top:0,behavior:"smooth"})}));break;case"add-filters":t.addEventListener(e,(async e=>{let r=t.closest(".ghost-form");if(!r)return;r=r.querySelectorAll("input");let n=t.href;return n=n.split("?"),n[1]=[],r.forEach((t=>{t.checked&&n[1].push(t.name+"="+t.value)})),t.href=n[0]+"?"+n[1].join("&"),!0}))}}))}}class Ue{listener=null;trigger=null;modal=null;modalcontent=null;constructor(t){return this.modal||this.trigger&&this.trigger===t||(this.trigger=t,"help"===t.dataset.what?this.modal=document.getElementById(q.component.modal.help.substr(1))?document.getElementById(q.component.modal.help.substr(1)):document.querySelector(q.component.modal.help):t.dataset.target&&"unique"!==t.dataset.target?this.modal=document.getElementById(t.dataset.target):this.modal=t.closest(q.component.modal.modalcontainer),this.modalcontent=this.modal.querySelector(q.component.modal.modalcontent),this.addListeners()),this}addListeners(){const t=this.modal.querySelector("summary");t&&t.addEventListener("toggle",(e=>{const r=document.querySelector("body");t.setAttribute("aria-hidden",!this.modal.open),r.classList.toggle(M.hidevscroll),this.toggleAction(t)}))}setContent(t){return t=t instanceof HTMLElement?t.outerHTML:t,this.modalcontent.innerHTML=t,this.modalcontent}getContentSiblings(){return this.modal.querySelectorAll("details")}getBySelector(t){return this.modal.querySelector(t)}modalOpen(t){this.modal.open||(this.modal.open=!0),this.openContent(t)}openContent(t){if(!t.dataset.for)return;if(t.dataset.close)return this.dismissModal();this.getContentSiblings().forEach((e=>{e!==t&&e.removeAttribute("open")}));const e=this.modal.querySelector("#"+t.dataset.for);e?e.open=!0:console.log("help "+t.dataset.for+"display error",this.modal),this.toggleAction(t)}toggleAction(t){this.modal.querySelector("summary");t.dataset.action&&(t.dataset.what&&document.querySelectorAll("[data-close]").forEach((e=>{e!==t&&delete e.dataset.close})),t.dataset.for&&(t.dataset.close?delete t.dataset.close:t.dataset.close=!0))}dismissModal(t=!1,e=null){if(this.modalcontent){const e=new Event("dismissmodal");this.modalcontent.querySelectorAll(".js").forEach((t=>t.dispatchEvent(e))),t&&(this.modalcontent.innerHTML="")}this.trigger.dataset.for&&(this.modal.open=!1,this.toggleAction(this.trigger))}}class We{applyTo(t=document){(t=document||t instanceof HTMLElement?t:document.querySelector(t))&&t.querySelectorAll('[data-action="request"]').forEach((t=>{const e=t.dataset.event||"click",r=t.dataset.what;t.addEventListener(e,(e=>{this.makeRequest(t,r)}))}))}callModal(t){return new Ue(t)}makeRequest(t,e){let r,n,i=t.dataset.format?t.dataset.format:"html",s=null;switch(e){case j:n=this.callModal(t);const e=n?n.modal:null;if(!n)return;const i=t.dataset.file?t.dataset.file!==e.dataset.currentfile?t.dataset.file:null:e.dataset.file,o=t.dataset.target?document.querySelector("#"+t.dataset.target+" article"):e.querySelector(q.component.modal.mainhelp+" article");if(!o)return;o&&i?(r="/gui/help/"+i+"?"+new URLSearchParams({partial:!0}),s=r=>{r=r instanceof HTMLElement?r.outerHTML:r,e.dataset.currentfile=i,o.innerHTML=r,this.applyTo(o),t.dataset.for&&n.modalOpen(t)}):i||n.openContent(t);break;case I:if(n=this.callModal(t),!n)return;const a=n.modalcontent?n.modalcontent.querySelector("[data-import]"):null;a&&t.dataset.key===a.dataset.import&&a.dataset.table?s=r=null:(r="/gui/prj/importsettings?"+new URLSearchParams({prjid:t.dataset.projid?t.dataset.projid:"",typeimport:t.dataset.key?t.dataset.key:F.settings}),s=t=>{const e=n.setContent(t);(new ze).applyTo(e,n)});break;case k:if(n=this.callModal(t),!n)return;r="/search/taxotree?"+ +new URLSearchParams({target:t.dataset.target?t.dataset.target:""}),s=t=>{console.log(t)};break;default:t.dataset.href&&(r=t.dataset.href,"?"===r.substr(0,1)&&(r=window.location.href.split("?"),r=r.length>1?r.join("?")+"&"+t.dataset.href.substr(1):r[0]+t.dataset.href),s=e=>{let r=t.nextElementSibling;r||(r=document.createElement("div"),t.parentElement.append(r)),r.innerHTML=e})}this.fetchRequest(i,r,s)}makeCloseRequest(t){t.addEventListener(ev,(async e=>{modal=this.callModal(t),modal&&modal.dismissModal()}))}async fetchRequest(t,e,r){r&&("json"===t?fetch(e,v()).then((t=>t.json())).then((t=>{r(t)})):fetch(e,v()).then((t=>t.text())).then((t=>{t=y().sanitize(t),r(t)})).catch((t=>{console.log("request",t)})))}}window.addEventListener("load",(async()=>{document.querySelectorAll("nav .dropdown").forEach((t=>{t.addEventListener("click",(e=>{e.preventDefault(),t.classList.toggle("over")}))}));(new ze).applyTo();new Be(document),new $;(new We).applyTo(document)})),window.addEventListener("unload",(t=>{}))})()})();
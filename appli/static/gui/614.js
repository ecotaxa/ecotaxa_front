"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[614],{3614:(e,t,r)=>{r.d(t,{jobMonitor:()=>n});var s=r(9162);function n(e){let t;const r=e.dataset.id;if(!r)return;const n=e.querySelector("#spinner-icon"),i=e.querySelector("#statusdiv");let o=!1;const a=(t,r=0,s="")=>{r||(r=0),s||(s="In progress");const i=e.querySelector("#progressbar");!1===t?n&&n.remove():(n&&n.classList.remove("hidden"),i&&i.classList.remove("hidden"))},c=e=>{i.firstChild.innerHTML=`<div class="alert alert-danger">${e.join("</div><div>")}</div>`};let l=[];const d=()=>{fetch("/gui/job/status/"+r,s.wv).then((e=>e.json())).then((e=>{if(e.errors.length&&(clearInterval(t),a(!1),c(e.errors)),!0!==o){if(e){switch(e.state){case"A":o=!0,(async e=>{fetch(e,(0,s.wv)()).then((e=>e.text())).then((e=>{i.lastChild.insertAdjacentHTML("beforeend",e)}))})("/gui/job/question/"+e.id),a(!1),clearInterval(t);break;case"F":o=!0,a(!1),n&&n.remove(),clearInterval(t),e.finalaction&&l.push(e.finalaction),e.description&&(i.firstChild.innerHTML=e.description);break;case"E":o=!0,a(!1),n.remove(),clearInterval(t),c(e.errors)}a(!0,e.progress_pct,e.progress_msg)}i&&(i.childNodes[1].innerHTML=l.join("")),e.state&&"E"==e.state||"F"==e.state&&!e.out||!1===o&&setTimeout(d,1e3)}}))};d()}}}]);
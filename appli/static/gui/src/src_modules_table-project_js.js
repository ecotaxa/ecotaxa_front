/*! For license information please see src_modules_table-project_js.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["src_modules_table-project_js"],{"./src/modules/table-project.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   initImport: () => (/* binding */ initImport)\n/* harmony export */ });\n/* harmony import */ var _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../modules/modules-config.js */ "./src/modules/modules-config.js");\n/* harmony import */ var deep_equal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! deep-equal */ "./node_modules/deep-equal/index.js");\n/* harmony import */ var deep_equal__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(deep_equal__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\n_modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__.css.lastused = "last-used";\n_modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__.css.small = "tdsmall";\n\nconst initImport = async (state) => {\n\n  function itemRemove(value, item) {\n    if (state.params.import) {\n      switch (state.params.import) {\n        case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__.typeimport.project:\n          function remove_from_imports(name, value) {\n            const idx = state.dataImport.imports[name].indexOf(value);\n            if (idx > -1) state.dataImport.imports[name].splice(idx, 1);\n          }\n          const selector = state.dom.querySelector(\'[\' + state.dataImport.selector + \'="\' + value + \'"]\');\n          const indextocheck = state.dataImport.indexToCheck();\n\n          if (selector) {\n            const tr = selector.closest(\'tr\');\n            const resets = state.dataImport.resetSelector(tr);\n            selector.parentElement.querySelectorAll(\'button, input\').forEach((el, index) => {\n              this.disableSelector(selector, false);\n              this.toImport(el.parentElement, index, false);\n            });\n          };\n          break;\n      }\n    }\n  }\n  const {\n    DataImport\n  } = await Promise.all(/*! import() */[__webpack_require__.e("vendors-node_modules_tom-select_dist_js_plugins_caret_position_js-node_modules_tom-select_dis-6094fa"), __webpack_require__.e("src_modules_form-submit_js"), __webpack_require__.e("src_modules_js-tom-select_js"), __webpack_require__.e("src_modules_project-privileges_js"), __webpack_require__.e("src_modules_data-import_js")]).then(__webpack_require__.bind(__webpack_require__, /*! ../modules/data-import.js */ "./src/modules/data-import.js"));\n  state.dataImport = new DataImport(state);\n  state.importfields = state.grid.columns.filter(column => (column.hasOwnProperty(\'selectcells\')));\n  state.importfields = (state.importfields.length) ? state.importfields[0].selectcells : null;\n  state.dataImport.itemRemove = itemRemove;\n  if (state.params.import && state.params.import === _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__.typeimport.project) {\n    const {\n      ImportList\n    } = await __webpack_require__.e(/*! import() */ "src_modules_table-projects-tools_js").then(__webpack_require__.bind(__webpack_require__, /*! ../modules/table-projects-tools.js */ "./src/modules/table-projects-tools.js"));\n    ImportList(state, state.dataImport);\n  }\n  if (state.dataImport.initList) state.dataImport.initList();\n  state.waitdiv.remove();\n}\n\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(state) {\n  // get the css fixed length of progress bar\n  let progressw = 0;\n  if (document.styleSheets && document.styleSheets.length && document.styleSheets[0].cssRules) {\n    Object.values(document.styleSheets[0].cssRules).forEach((rule, i) => {\n      if (rule.selectorText && rule.selectorText.trim() === \'.progress data\') {\n        progressw = rule.style.cssText.split(\';\');\n        progressw.forEach(r => {\n          r = r.split(\':\');\n          if (r[0].trim() === \'max-width\' && r.length > 1) {\n            progressw = parseInt(r[1].trim());\n            return;\n          }\n        });\n      };\n      if (progressw > 0) return;\n    });\n  }\n  progressw = (progressw > 0) ? progressw : 64;\n  state.cellidname = _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__.models.projid;\n\n  state.initImport = initImport;\n  if (state.params.lastused) {\n    const lastused = JSON.parse(state.params.lastused);\n    state.setRowAttributes = (state, tr, id) => {\n      if (id && lastused.indexOf(id) >= 0) {\n        tr.classList.add(_modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__.css.lastused);\n      }\n      return tr;\n    }\n  }\n  return {\n    contact: (value, rowIndex, cellIndex, td = {}) => {\n      const about = (Array.isArray(value)) ? Boolean(value[1]) : false;\n      value = (Array.isArray(value)) ? String(value[0]).trim() : String(value).trim();\n      if (value === null) value = ``;\n      let node = [];\n      //cell value is an array with title and  boolean which tells if about is autho or not\n      // display stats and info about the project if ok\n      const id = state.getCellData(rowIndex, _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__.models.projid);\n      // contact\n      let contact = state.getCellData(rowIndex, _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__.models.contact);\n      let iscontact = false;\n      if (contact === null) {\n        contact = state.getCellData(rowIndex, _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__.models.managers);\n        contact = (contact && contact.length) ? contact[0] : null;\n      } else iscontact = true;\n      let nodecontact=null;\n      if (contact) {\n        nodecontact = {\n          nodename: "A",\n          attributes: {\n            href: `mailto:${contact.email}`,\n            class: "contact",\n            target: "_blank"\n          },\n          childnodes: [state.setTextNode(contact.name)]\n        };\n        if (iscontact) nodecontact.attributes["data-contact"] = iscontact;\n        node = [state.setTextNode(value),nodecontact];\n      } else node = [state.setTextNode(value)];\n      if (about === true) {\n        td.childnodes = [{\n          nodename: "DETAILS",\n          attributes: {\n            "data-id": id,\n            "data-what": _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__.models.about\n\n          },\n          childnodes: [{\n            nodename: "SUMMARY",\n            childnodes: node,\n          }]\n        }];\n      } else td.childnodes = node;\n      return td;\n    },\n    imports: (value, rowIndex, cellIndex, td = {}) => {\n      const id = state.getCellData(rowIndex, _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__.models.projid);\n      const column = state.grid.columns[cellIndex];\n      if (column.hasOwnProperty(\'selectcells\')) {\n        let btns = [],\n          txt = (state.params.btn) ? state.params.btn : \'import\';\n\n        switch (column.what) {\n          case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__.models.taxo:\n            ((column.parts) ? column.parts : column.selectcells).forEach((v, index) => {\n              let impid = state.getCellData(rowIndex, v);\n              impid = (impid === null || deep_equal__WEBPACK_IMPORTED_MODULE_1___default()(impid, {})) ? ` disabled` : ``;\n              if (index > 0) txt = (state.params.btn1) ? state.params.btn1 : \'extra\';\n              btns.push({\n                nodename: "BUTTON",\n                attributes: {\n                  class: `btn is-preset${impid}`,\n                  type: \'button\'\n                },\n                childnodes: [{\n                  nodename: "I",\n                  attributes: {\n                    class: `icon-md  ${((impid === ``)? `icon-plus-sm`:``)}`,\n                    type: \'button\'\n                  },\n                  childnodes: []\n                }, state.setTextNode(txt)]\n              });\n            });\n            break;\n          case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__.models.project:\n            btns.push({\n              nodename: "INPUT",\n              attributes: {\n                type: "checkbox",\n                name: `${_modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__.models.project}[]`,\n                class: "form-checkbox",\n                value: id\n              },\n            });\n            break;\n          case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__.models.settings:\n          case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__.models.privileges:\n          case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__.models.fields:\n            btns.push({\n              nodename: "BUTTON",\n              attributes: {\n                class: `btn is-preset`,\n                type: \'button\'\n              },\n              childnodes: [state.setTextNode(txt)]\n            });\n            break;\n        }\n        td.childnodes = btns;\n      } else td.childnodes = [];\n      return td;\n    },\n    controls: (value, rowIndex, cellIndex, td = {}) => {\n      let controls = [];\n      const id = state.getCellData(rowIndex, _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__.models.projid);\n      Object.entries(value).forEach(([key, action]) => {\n        let node = {\n          nodename: "A"\n        };\n        switch (key) {\n          case "A":\n            node.attributes = {\n              class: "btn is-annotate order-1",\n              href: `/prj/${id}`\n            };\n            break;\n          case "V":\n            node.attributes = {\n              class: "btn is-view order-1",\n              href: `/prj/${id}`\n            };\n\n            break;\n          case "M":\n            node.attributes = {\n              class: "btn is-manage order-2",\n              href: `/gui/prj/edit/${id}`\n            };\n            break;\n          case "R":\n            const contact = state.getCellData(rowIndex, _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__.models.contact);\n            node.attributes = {\n              class: "btn is-request order-2",\n              href: `mailto:${contact.email}?${id}`\n            };\n            break;\n        }\n\n        node.childnodes = [state.setTextNode(action)];\n        controls.push(node);\n      });\n      td.attributes = (td.hasOwnProperty(\'attributes\')) ? td.attributes : {};\n      td.attributes["class"] = (td.attributes["class"]) ? td.attributes["class"] + " " + _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__.css.component.table.controls : _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__.css.component.table.controls;\n      td.childnodes = controls;\n      return td;\n    },\n    progress: (value, rowIndex, cellIndex, td = {}) => {\n      if (value === null) value = 0;\n      // fixed in px  displays better than %\n      value = (parseInt(value) - parseFloat(value).toFixed(2) == 0) ? parseInt(value) : parseFloat(value).toFixed(2);\n      const pct = parseFloat(value * (progressw / 100)).toFixed(2)\n      const node = {\n        nodename: "DATA",\n        attributes: {\n          style: `width:${pct}px`,\n          "data-w": `${pct}`\n        },\n      }\n\n      td.attributes = (td.hasOwnProperty(\'attributes\')) ? td.attributes : {};\n      td.attributes["class"] = (td.attributes["class"]) ? td.attributes["class"] + " " + _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__.css.progress : _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__.css.progress;\n      td.childnodes = [state.setTextNode(String(value) + \'%\'), node];\n      return td;\n    },\n    access:(value, rowIndex, cellIndex, td = {}) => {\n      const possible_access={"0":"Private","1":"Public","2":"Open"}\n      td.html = possible_access[value];\n      return td;\n    },\n    status: (value, rowIndex, cellIndex, td = {}) => {\n      td.attributes = (td.hasOwnProperty(\'attributes\')) ? td.attributes : {};\n      td.attributes["class"] = (td.attributes["class"]) ? td.attributes["class"] + _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__.css.small : _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__.css.small;\n      td.html = value;\n      return td;\n    },\n    privileges: (value, rowIndex, cellIndex, td = {}) => {\n\n      if (!value || value === ``) td.childnodes = [state.setTextNode(``)];\n      let rights = [];\n      Object.entries(value).forEach(([right, members]) => {\n        let mb = [];\n\n        if (members.length) {\n          members.forEach(member => {\n            mb.push(member.name);\n          });\n          rights.push({\n            nodename: "DIV",\n            attributes: {\n              class: "rights",\n              "data-r": right\n            },\n            childnodes: [state.setTextNode(mb.join(`, `))]\n          });\n        }\n      });\n      td.childnodes = rights;\n      return td;\n    },\n    taxons: (value, rowIndex, cellIndex, td = {}) => {\n      if (value === null) td.childnodes = [state.setTextNode(``)];\n      const num = Object.keys(value).length;\n      if (num > 0) {\n        value = Object.values(value).join(\', \');\n        td.childnodes = [{\n          nodename: "DIV",\n          attributes: {\n            class: _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_0__.css.component.table.tip,\n            "data-num": num\n          },\n          childnodes: [state.setTextNode(value)]\n        }];\n      } else td.childnodes = [state.setTextNode(``)];\n      return td;\n    }\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixJQUFJO0FBQzlCLHVCQUF1QixJQUFJO0FBQzNCLFNBQVM7QUFDVDs7QUFFQTtBQUNBLHlGQUF5RiwyREFBRyxZQUFZLDJEQUFHO0FBQzNHO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsK0NBQStDO0FBQy9DLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0EsS0FBSztBQUNMLGdEQUFnRDtBQUNoRDtBQUNBLG1GQUFtRiwyREFBRyxTQUFTLDJEQUFHO0FBQ2xHO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsb0RBQW9EOztBQUVwRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFdBQVc7QUFDWDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsS0FBSztBQUNMLGdEQUFnRDtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiwyREFBRztBQUN0QjtBQUNBLFdBQVc7QUFDWDtBQUNBLFNBQVM7QUFDVCxRQUFRO0FBQ1I7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvdGFibGUtcHJvamVjdC5qcz9hMjZhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIG1vZGVscyxcbiAgY3NzLFxuICB0eXBlaW1wb3J0XG59IGZyb20gJy4uL21vZHVsZXMvbW9kdWxlcy1jb25maWcuanMnO1xuXG5pbXBvcnQgZXF1YWwgZnJvbSAnZGVlcC1lcXVhbCc7XG5jc3MubGFzdHVzZWQgPSBcImxhc3QtdXNlZFwiO1xuY3NzLnNtYWxsID0gXCJ0ZHNtYWxsXCI7XG5cbmV4cG9ydCBjb25zdCBpbml0SW1wb3J0ID0gYXN5bmMgKHN0YXRlKSA9PiB7XG5cbiAgZnVuY3Rpb24gaXRlbVJlbW92ZSh2YWx1ZSwgaXRlbSkge1xuICAgIGlmIChzdGF0ZS5wYXJhbXMuaW1wb3J0KSB7XG4gICAgICBzd2l0Y2ggKHN0YXRlLnBhcmFtcy5pbXBvcnQpIHtcbiAgICAgICAgY2FzZSB0eXBlaW1wb3J0LnByb2plY3Q6XG4gICAgICAgICAgZnVuY3Rpb24gcmVtb3ZlX2Zyb21faW1wb3J0cyhuYW1lLCB2YWx1ZSkge1xuICAgICAgICAgICAgY29uc3QgaWR4ID0gc3RhdGUuZGF0YUltcG9ydC5pbXBvcnRzW25hbWVdLmluZGV4T2YodmFsdWUpO1xuICAgICAgICAgICAgaWYgKGlkeCA+IC0xKSBzdGF0ZS5kYXRhSW1wb3J0LmltcG9ydHNbbmFtZV0uc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHNlbGVjdG9yID0gc3RhdGUuZG9tLnF1ZXJ5U2VsZWN0b3IoJ1snICsgc3RhdGUuZGF0YUltcG9ydC5zZWxlY3RvciArICc9XCInICsgdmFsdWUgKyAnXCJdJyk7XG4gICAgICAgICAgY29uc3QgaW5kZXh0b2NoZWNrID0gc3RhdGUuZGF0YUltcG9ydC5pbmRleFRvQ2hlY2soKTtcblxuICAgICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgY29uc3QgdHIgPSBzZWxlY3Rvci5jbG9zZXN0KCd0cicpO1xuICAgICAgICAgICAgY29uc3QgcmVzZXRzID0gc3RhdGUuZGF0YUltcG9ydC5yZXNldFNlbGVjdG9yKHRyKTtcbiAgICAgICAgICAgIHNlbGVjdG9yLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uLCBpbnB1dCcpLmZvckVhY2goKGVsLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLmRpc2FibGVTZWxlY3RvcihzZWxlY3RvciwgZmFsc2UpO1xuICAgICAgICAgICAgICB0aGlzLnRvSW1wb3J0KGVsLnBhcmVudEVsZW1lbnQsIGluZGV4LCBmYWxzZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBjb25zdCB7XG4gICAgRGF0YUltcG9ydFxuICB9ID0gYXdhaXQgaW1wb3J0KCcuLi9tb2R1bGVzL2RhdGEtaW1wb3J0LmpzJyk7XG4gIHN0YXRlLmRhdGFJbXBvcnQgPSBuZXcgRGF0YUltcG9ydChzdGF0ZSk7XG4gIHN0YXRlLmltcG9ydGZpZWxkcyA9IHN0YXRlLmdyaWQuY29sdW1ucy5maWx0ZXIoY29sdW1uID0+IChjb2x1bW4uaGFzT3duUHJvcGVydHkoJ3NlbGVjdGNlbGxzJykpKTtcbiAgc3RhdGUuaW1wb3J0ZmllbGRzID0gKHN0YXRlLmltcG9ydGZpZWxkcy5sZW5ndGgpID8gc3RhdGUuaW1wb3J0ZmllbGRzWzBdLnNlbGVjdGNlbGxzIDogbnVsbDtcbiAgc3RhdGUuZGF0YUltcG9ydC5pdGVtUmVtb3ZlID0gaXRlbVJlbW92ZTtcbiAgaWYgKHN0YXRlLnBhcmFtcy5pbXBvcnQgJiYgc3RhdGUucGFyYW1zLmltcG9ydCA9PT0gdHlwZWltcG9ydC5wcm9qZWN0KSB7XG4gICAgY29uc3Qge1xuICAgICAgSW1wb3J0TGlzdFxuICAgIH0gPSBhd2FpdCBpbXBvcnQoJy4uL21vZHVsZXMvdGFibGUtcHJvamVjdHMtdG9vbHMuanMnKTtcbiAgICBJbXBvcnRMaXN0KHN0YXRlLCBzdGF0ZS5kYXRhSW1wb3J0KTtcbiAgfVxuICBpZiAoc3RhdGUuZGF0YUltcG9ydC5pbml0TGlzdCkgc3RhdGUuZGF0YUltcG9ydC5pbml0TGlzdCgpO1xuICBzdGF0ZS53YWl0ZGl2LnJlbW92ZSgpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzdGF0ZSkge1xuICAvLyBnZXQgdGhlIGNzcyBmaXhlZCBsZW5ndGggb2YgcHJvZ3Jlc3MgYmFyXG4gIGxldCBwcm9ncmVzc3cgPSAwO1xuICBpZiAoZG9jdW1lbnQuc3R5bGVTaGVldHMgJiYgZG9jdW1lbnQuc3R5bGVTaGVldHMubGVuZ3RoICYmIGRvY3VtZW50LnN0eWxlU2hlZXRzWzBdLmNzc1J1bGVzKSB7XG4gICAgT2JqZWN0LnZhbHVlcyhkb2N1bWVudC5zdHlsZVNoZWV0c1swXS5jc3NSdWxlcykuZm9yRWFjaCgocnVsZSwgaSkgPT4ge1xuICAgICAgaWYgKHJ1bGUuc2VsZWN0b3JUZXh0ICYmIHJ1bGUuc2VsZWN0b3JUZXh0LnRyaW0oKSA9PT0gJy5wcm9ncmVzcyBkYXRhJykge1xuICAgICAgICBwcm9ncmVzc3cgPSBydWxlLnN0eWxlLmNzc1RleHQuc3BsaXQoJzsnKTtcbiAgICAgICAgcHJvZ3Jlc3N3LmZvckVhY2gociA9PiB7XG4gICAgICAgICAgciA9IHIuc3BsaXQoJzonKTtcbiAgICAgICAgICBpZiAoclswXS50cmltKCkgPT09ICdtYXgtd2lkdGgnICYmIHIubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgcHJvZ3Jlc3N3ID0gcGFyc2VJbnQoclsxXS50cmltKCkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgaWYgKHByb2dyZXNzdyA+IDApIHJldHVybjtcbiAgICB9KTtcbiAgfVxuICBwcm9ncmVzc3cgPSAocHJvZ3Jlc3N3ID4gMCkgPyBwcm9ncmVzc3cgOiA2NDtcbiAgc3RhdGUuY2VsbGlkbmFtZSA9IG1vZGVscy5wcm9qaWQ7XG5cbiAgc3RhdGUuaW5pdEltcG9ydCA9IGluaXRJbXBvcnQ7XG4gIGlmIChzdGF0ZS5wYXJhbXMubGFzdHVzZWQpIHtcbiAgICBjb25zdCBsYXN0dXNlZCA9IEpTT04ucGFyc2Uoc3RhdGUucGFyYW1zLmxhc3R1c2VkKTtcbiAgICBzdGF0ZS5zZXRSb3dBdHRyaWJ1dGVzID0gKHN0YXRlLCB0ciwgaWQpID0+IHtcbiAgICAgIGlmIChpZCAmJiBsYXN0dXNlZC5pbmRleE9mKGlkKSA+PSAwKSB7XG4gICAgICAgIHRyLmNsYXNzTGlzdC5hZGQoY3NzLmxhc3R1c2VkKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBjb250YWN0OiAodmFsdWUsIHJvd0luZGV4LCBjZWxsSW5kZXgsIHRkID0ge30pID0+IHtcbiAgICAgIGNvbnN0IGFib3V0ID0gKEFycmF5LmlzQXJyYXkodmFsdWUpKSA/IEJvb2xlYW4odmFsdWVbMV0pIDogZmFsc2U7XG4gICAgICB2YWx1ZSA9IChBcnJheS5pc0FycmF5KHZhbHVlKSkgPyBTdHJpbmcodmFsdWVbMF0pLnRyaW0oKSA6IFN0cmluZyh2YWx1ZSkudHJpbSgpO1xuICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB2YWx1ZSA9IGBgO1xuICAgICAgbGV0IG5vZGUgPSBbXTtcbiAgICAgIC8vY2VsbCB2YWx1ZSBpcyBhbiBhcnJheSB3aXRoIHRpdGxlIGFuZCAgYm9vbGVhbiB3aGljaCB0ZWxscyBpZiBhYm91dCBpcyBhdXRobyBvciBub3RcbiAgICAgIC8vIGRpc3BsYXkgc3RhdHMgYW5kIGluZm8gYWJvdXQgdGhlIHByb2plY3QgaWYgb2tcbiAgICAgIGNvbnN0IGlkID0gc3RhdGUuZ2V0Q2VsbERhdGEocm93SW5kZXgsIG1vZGVscy5wcm9qaWQpO1xuICAgICAgLy8gY29udGFjdFxuICAgICAgbGV0IGNvbnRhY3QgPSBzdGF0ZS5nZXRDZWxsRGF0YShyb3dJbmRleCwgbW9kZWxzLmNvbnRhY3QpO1xuICAgICAgbGV0IGlzY29udGFjdCA9IGZhbHNlO1xuICAgICAgaWYgKGNvbnRhY3QgPT09IG51bGwpIHtcbiAgICAgICAgY29udGFjdCA9IHN0YXRlLmdldENlbGxEYXRhKHJvd0luZGV4LCBtb2RlbHMubWFuYWdlcnMpO1xuICAgICAgICBjb250YWN0ID0gKGNvbnRhY3QgJiYgY29udGFjdC5sZW5ndGgpID8gY29udGFjdFswXSA6IG51bGw7XG4gICAgICB9IGVsc2UgaXNjb250YWN0ID0gdHJ1ZTtcbiAgICAgIGxldCBub2RlY29udGFjdD1udWxsO1xuICAgICAgaWYgKGNvbnRhY3QpIHtcbiAgICAgICAgbm9kZWNvbnRhY3QgPSB7XG4gICAgICAgICAgbm9kZW5hbWU6IFwiQVwiLFxuICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgIGhyZWY6IGBtYWlsdG86JHtjb250YWN0LmVtYWlsfWAsXG4gICAgICAgICAgICBjbGFzczogXCJjb250YWN0XCIsXG4gICAgICAgICAgICB0YXJnZXQ6IFwiX2JsYW5rXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNoaWxkbm9kZXM6IFtzdGF0ZS5zZXRUZXh0Tm9kZShjb250YWN0Lm5hbWUpXVxuICAgICAgICB9O1xuICAgICAgICBpZiAoaXNjb250YWN0KSBub2RlY29udGFjdC5hdHRyaWJ1dGVzW1wiZGF0YS1jb250YWN0XCJdID0gaXNjb250YWN0O1xuICAgICAgICBub2RlID0gW3N0YXRlLnNldFRleHROb2RlKHZhbHVlKSxub2RlY29udGFjdF07XG4gICAgICB9IGVsc2Ugbm9kZSA9IFtzdGF0ZS5zZXRUZXh0Tm9kZSh2YWx1ZSldO1xuICAgICAgaWYgKGFib3V0ID09PSB0cnVlKSB7XG4gICAgICAgIHRkLmNoaWxkbm9kZXMgPSBbe1xuICAgICAgICAgIG5vZGVuYW1lOiBcIkRFVEFJTFNcIixcbiAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICBcImRhdGEtaWRcIjogaWQsXG4gICAgICAgICAgICBcImRhdGEtd2hhdFwiOiBtb2RlbHMuYWJvdXRcblxuICAgICAgICAgIH0sXG4gICAgICAgICAgY2hpbGRub2RlczogW3tcbiAgICAgICAgICAgIG5vZGVuYW1lOiBcIlNVTU1BUllcIixcbiAgICAgICAgICAgIGNoaWxkbm9kZXM6IG5vZGUsXG4gICAgICAgICAgfV1cbiAgICAgICAgfV07XG4gICAgICB9IGVsc2UgdGQuY2hpbGRub2RlcyA9IG5vZGU7XG4gICAgICByZXR1cm4gdGQ7XG4gICAgfSxcbiAgICBpbXBvcnRzOiAodmFsdWUsIHJvd0luZGV4LCBjZWxsSW5kZXgsIHRkID0ge30pID0+IHtcbiAgICAgIGNvbnN0IGlkID0gc3RhdGUuZ2V0Q2VsbERhdGEocm93SW5kZXgsIG1vZGVscy5wcm9qaWQpO1xuICAgICAgY29uc3QgY29sdW1uID0gc3RhdGUuZ3JpZC5jb2x1bW5zW2NlbGxJbmRleF07XG4gICAgICBpZiAoY29sdW1uLmhhc093blByb3BlcnR5KCdzZWxlY3RjZWxscycpKSB7XG4gICAgICAgIGxldCBidG5zID0gW10sXG4gICAgICAgICAgdHh0ID0gKHN0YXRlLnBhcmFtcy5idG4pID8gc3RhdGUucGFyYW1zLmJ0biA6ICdpbXBvcnQnO1xuXG4gICAgICAgIHN3aXRjaCAoY29sdW1uLndoYXQpIHtcbiAgICAgICAgICBjYXNlIG1vZGVscy50YXhvOlxuICAgICAgICAgICAgKChjb2x1bW4ucGFydHMpID8gY29sdW1uLnBhcnRzIDogY29sdW1uLnNlbGVjdGNlbGxzKS5mb3JFYWNoKCh2LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICBsZXQgaW1waWQgPSBzdGF0ZS5nZXRDZWxsRGF0YShyb3dJbmRleCwgdik7XG4gICAgICAgICAgICAgIGltcGlkID0gKGltcGlkID09PSBudWxsIHx8IGVxdWFsKGltcGlkLCB7fSkpID8gYCBkaXNhYmxlZGAgOiBgYDtcbiAgICAgICAgICAgICAgaWYgKGluZGV4ID4gMCkgdHh0ID0gKHN0YXRlLnBhcmFtcy5idG4xKSA/IHN0YXRlLnBhcmFtcy5idG4xIDogJ2V4dHJhJztcbiAgICAgICAgICAgICAgYnRucy5wdXNoKHtcbiAgICAgICAgICAgICAgICBub2RlbmFtZTogXCJCVVRUT05cIixcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgICBjbGFzczogYGJ0biBpcy1wcmVzZXQke2ltcGlkfWAsXG4gICAgICAgICAgICAgICAgICB0eXBlOiAnYnV0dG9uJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2hpbGRub2RlczogW3tcbiAgICAgICAgICAgICAgICAgIG5vZGVuYW1lOiBcIklcIixcbiAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M6IGBpY29uLW1kICAkeygoaW1waWQgPT09IGBgKT8gYGljb24tcGx1cy1zbWA6YGApfWAsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdidXR0b24nXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgY2hpbGRub2RlczogW11cbiAgICAgICAgICAgICAgICB9LCBzdGF0ZS5zZXRUZXh0Tm9kZSh0eHQpXVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBtb2RlbHMucHJvamVjdDpcbiAgICAgICAgICAgIGJ0bnMucHVzaCh7XG4gICAgICAgICAgICAgIG5vZGVuYW1lOiBcIklOUFVUXCIsXG4gICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcImNoZWNrYm94XCIsXG4gICAgICAgICAgICAgICAgbmFtZTogYCR7bW9kZWxzLnByb2plY3R9W11gLFxuICAgICAgICAgICAgICAgIGNsYXNzOiBcImZvcm0tY2hlY2tib3hcIixcbiAgICAgICAgICAgICAgICB2YWx1ZTogaWRcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBtb2RlbHMuc2V0dGluZ3M6XG4gICAgICAgICAgY2FzZSBtb2RlbHMucHJpdmlsZWdlczpcbiAgICAgICAgICBjYXNlIG1vZGVscy5maWVsZHM6XG4gICAgICAgICAgICBidG5zLnB1c2goe1xuICAgICAgICAgICAgICBub2RlbmFtZTogXCJCVVRUT05cIixcbiAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgIGNsYXNzOiBgYnRuIGlzLXByZXNldGAsXG4gICAgICAgICAgICAgICAgdHlwZTogJ2J1dHRvbidcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgY2hpbGRub2RlczogW3N0YXRlLnNldFRleHROb2RlKHR4dCldXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHRkLmNoaWxkbm9kZXMgPSBidG5zO1xuICAgICAgfSBlbHNlIHRkLmNoaWxkbm9kZXMgPSBbXTtcbiAgICAgIHJldHVybiB0ZDtcbiAgICB9LFxuICAgIGNvbnRyb2xzOiAodmFsdWUsIHJvd0luZGV4LCBjZWxsSW5kZXgsIHRkID0ge30pID0+IHtcbiAgICAgIGxldCBjb250cm9scyA9IFtdO1xuICAgICAgY29uc3QgaWQgPSBzdGF0ZS5nZXRDZWxsRGF0YShyb3dJbmRleCwgbW9kZWxzLnByb2ppZCk7XG4gICAgICBPYmplY3QuZW50cmllcyh2YWx1ZSkuZm9yRWFjaCgoW2tleSwgYWN0aW9uXSkgPT4ge1xuICAgICAgICBsZXQgbm9kZSA9IHtcbiAgICAgICAgICBub2RlbmFtZTogXCJBXCJcbiAgICAgICAgfTtcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICBjYXNlIFwiQVwiOlxuICAgICAgICAgICAgbm9kZS5hdHRyaWJ1dGVzID0ge1xuICAgICAgICAgICAgICBjbGFzczogXCJidG4gaXMtYW5ub3RhdGUgb3JkZXItMVwiLFxuICAgICAgICAgICAgICBocmVmOiBgL3Byai8ke2lkfWBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiVlwiOlxuICAgICAgICAgICAgbm9kZS5hdHRyaWJ1dGVzID0ge1xuICAgICAgICAgICAgICBjbGFzczogXCJidG4gaXMtdmlldyBvcmRlci0xXCIsXG4gICAgICAgICAgICAgIGhyZWY6IGAvcHJqLyR7aWR9YFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIk1cIjpcbiAgICAgICAgICAgIG5vZGUuYXR0cmlidXRlcyA9IHtcbiAgICAgICAgICAgICAgY2xhc3M6IFwiYnRuIGlzLW1hbmFnZSBvcmRlci0yXCIsXG4gICAgICAgICAgICAgIGhyZWY6IGAvZ3VpL3Byai9lZGl0LyR7aWR9YFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJSXCI6XG4gICAgICAgICAgICBjb25zdCBjb250YWN0ID0gc3RhdGUuZ2V0Q2VsbERhdGEocm93SW5kZXgsIG1vZGVscy5jb250YWN0KTtcbiAgICAgICAgICAgIG5vZGUuYXR0cmlidXRlcyA9IHtcbiAgICAgICAgICAgICAgY2xhc3M6IFwiYnRuIGlzLXJlcXVlc3Qgb3JkZXItMlwiLFxuICAgICAgICAgICAgICBocmVmOiBgbWFpbHRvOiR7Y29udGFjdC5lbWFpbH0/JHtpZH1gXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBub2RlLmNoaWxkbm9kZXMgPSBbc3RhdGUuc2V0VGV4dE5vZGUoYWN0aW9uKV07XG4gICAgICAgIGNvbnRyb2xzLnB1c2gobm9kZSk7XG4gICAgICB9KTtcbiAgICAgIHRkLmF0dHJpYnV0ZXMgPSAodGQuaGFzT3duUHJvcGVydHkoJ2F0dHJpYnV0ZXMnKSkgPyB0ZC5hdHRyaWJ1dGVzIDoge307XG4gICAgICB0ZC5hdHRyaWJ1dGVzW1wiY2xhc3NcIl0gPSAodGQuYXR0cmlidXRlc1tcImNsYXNzXCJdKSA/IHRkLmF0dHJpYnV0ZXNbXCJjbGFzc1wiXSArIFwiIFwiICsgY3NzLmNvbXBvbmVudC50YWJsZS5jb250cm9scyA6IGNzcy5jb21wb25lbnQudGFibGUuY29udHJvbHM7XG4gICAgICB0ZC5jaGlsZG5vZGVzID0gY29udHJvbHM7XG4gICAgICByZXR1cm4gdGQ7XG4gICAgfSxcbiAgICBwcm9ncmVzczogKHZhbHVlLCByb3dJbmRleCwgY2VsbEluZGV4LCB0ZCA9IHt9KSA9PiB7XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHZhbHVlID0gMDtcbiAgICAgIC8vIGZpeGVkIGluIHB4ICBkaXNwbGF5cyBiZXR0ZXIgdGhhbiAlXG4gICAgICB2YWx1ZSA9IChwYXJzZUludCh2YWx1ZSkgLSBwYXJzZUZsb2F0KHZhbHVlKS50b0ZpeGVkKDIpID09IDApID8gcGFyc2VJbnQodmFsdWUpIDogcGFyc2VGbG9hdCh2YWx1ZSkudG9GaXhlZCgyKTtcbiAgICAgIGNvbnN0IHBjdCA9IHBhcnNlRmxvYXQodmFsdWUgKiAocHJvZ3Jlc3N3IC8gMTAwKSkudG9GaXhlZCgyKVxuICAgICAgY29uc3Qgbm9kZSA9IHtcbiAgICAgICAgbm9kZW5hbWU6IFwiREFUQVwiLFxuICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgc3R5bGU6IGB3aWR0aDoke3BjdH1weGAsXG4gICAgICAgICAgXCJkYXRhLXdcIjogYCR7cGN0fWBcbiAgICAgICAgfSxcbiAgICAgIH1cblxuICAgICAgdGQuYXR0cmlidXRlcyA9ICh0ZC5oYXNPd25Qcm9wZXJ0eSgnYXR0cmlidXRlcycpKSA/IHRkLmF0dHJpYnV0ZXMgOiB7fTtcbiAgICAgIHRkLmF0dHJpYnV0ZXNbXCJjbGFzc1wiXSA9ICh0ZC5hdHRyaWJ1dGVzW1wiY2xhc3NcIl0pID8gdGQuYXR0cmlidXRlc1tcImNsYXNzXCJdICsgXCIgXCIgKyBjc3MucHJvZ3Jlc3MgOiBjc3MucHJvZ3Jlc3M7XG4gICAgICB0ZC5jaGlsZG5vZGVzID0gW3N0YXRlLnNldFRleHROb2RlKFN0cmluZyh2YWx1ZSkgKyAnJScpLCBub2RlXTtcbiAgICAgIHJldHVybiB0ZDtcbiAgICB9LFxuICAgIGFjY2VzczoodmFsdWUsIHJvd0luZGV4LCBjZWxsSW5kZXgsIHRkID0ge30pID0+IHtcbiAgICAgIGNvbnN0IHBvc3NpYmxlX2FjY2Vzcz17XCIwXCI6XCJQcml2YXRlXCIsXCIxXCI6XCJQdWJsaWNcIixcIjJcIjpcIk9wZW5cIn1cbiAgICAgIHRkLmh0bWwgPSBwb3NzaWJsZV9hY2Nlc3NbdmFsdWVdO1xuICAgICAgcmV0dXJuIHRkO1xuICAgIH0sXG4gICAgc3RhdHVzOiAodmFsdWUsIHJvd0luZGV4LCBjZWxsSW5kZXgsIHRkID0ge30pID0+IHtcbiAgICAgIHRkLmF0dHJpYnV0ZXMgPSAodGQuaGFzT3duUHJvcGVydHkoJ2F0dHJpYnV0ZXMnKSkgPyB0ZC5hdHRyaWJ1dGVzIDoge307XG4gICAgICB0ZC5hdHRyaWJ1dGVzW1wiY2xhc3NcIl0gPSAodGQuYXR0cmlidXRlc1tcImNsYXNzXCJdKSA/IHRkLmF0dHJpYnV0ZXNbXCJjbGFzc1wiXSArIGNzcy5zbWFsbCA6IGNzcy5zbWFsbDtcbiAgICAgIHRkLmh0bWwgPSB2YWx1ZTtcbiAgICAgIHJldHVybiB0ZDtcbiAgICB9LFxuICAgIHByaXZpbGVnZXM6ICh2YWx1ZSwgcm93SW5kZXgsIGNlbGxJbmRleCwgdGQgPSB7fSkgPT4ge1xuXG4gICAgICBpZiAoIXZhbHVlIHx8IHZhbHVlID09PSBgYCkgdGQuY2hpbGRub2RlcyA9IFtzdGF0ZS5zZXRUZXh0Tm9kZShgYCldO1xuICAgICAgbGV0IHJpZ2h0cyA9IFtdO1xuICAgICAgT2JqZWN0LmVudHJpZXModmFsdWUpLmZvckVhY2goKFtyaWdodCwgbWVtYmVyc10pID0+IHtcbiAgICAgICAgbGV0IG1iID0gW107XG5cbiAgICAgICAgaWYgKG1lbWJlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgbWVtYmVycy5mb3JFYWNoKG1lbWJlciA9PiB7XG4gICAgICAgICAgICBtYi5wdXNoKG1lbWJlci5uYW1lKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByaWdodHMucHVzaCh7XG4gICAgICAgICAgICBub2RlbmFtZTogXCJESVZcIixcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgY2xhc3M6IFwicmlnaHRzXCIsXG4gICAgICAgICAgICAgIFwiZGF0YS1yXCI6IHJpZ2h0XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2hpbGRub2RlczogW3N0YXRlLnNldFRleHROb2RlKG1iLmpvaW4oYCwgYCkpXVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHRkLmNoaWxkbm9kZXMgPSByaWdodHM7XG4gICAgICByZXR1cm4gdGQ7XG4gICAgfSxcbiAgICB0YXhvbnM6ICh2YWx1ZSwgcm93SW5kZXgsIGNlbGxJbmRleCwgdGQgPSB7fSkgPT4ge1xuICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB0ZC5jaGlsZG5vZGVzID0gW3N0YXRlLnNldFRleHROb2RlKGBgKV07XG4gICAgICBjb25zdCBudW0gPSBPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoO1xuICAgICAgaWYgKG51bSA+IDApIHtcbiAgICAgICAgdmFsdWUgPSBPYmplY3QudmFsdWVzKHZhbHVlKS5qb2luKCcsICcpO1xuICAgICAgICB0ZC5jaGlsZG5vZGVzID0gW3tcbiAgICAgICAgICBub2RlbmFtZTogXCJESVZcIixcbiAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICBjbGFzczogY3NzLmNvbXBvbmVudC50YWJsZS50aXAsXG4gICAgICAgICAgICBcImRhdGEtbnVtXCI6IG51bVxuICAgICAgICAgIH0sXG4gICAgICAgICAgY2hpbGRub2RlczogW3N0YXRlLnNldFRleHROb2RlKHZhbHVlKV1cbiAgICAgICAgfV07XG4gICAgICB9IGVsc2UgdGQuY2hpbGRub2RlcyA9IFtzdGF0ZS5zZXRUZXh0Tm9kZShgYCldO1xuICAgICAgcmV0dXJuIHRkO1xuICAgIH1cbiAgfVxuXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/modules/table-project.js\n')}}]);
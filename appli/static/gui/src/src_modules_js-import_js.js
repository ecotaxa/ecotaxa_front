/*! For license information please see src_modules_js-import_js.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["src_modules_js-import_js"],{"./src/modules/js-import.js":(module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsImport: () => (/* binding */ JsImport)\n/* harmony export */ });\n/* harmony import */ var dompurify__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dompurify */ \"./node_modules/dompurify/dist/purify.es.mjs\");\n/* harmony import */ var _modules_activ_request_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../modules/activ-request.js */ \"./src/modules/activ-request.js\");\n/* harmony import */ var _modules_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../modules/utils.js */ \"./src/modules/utils.js\");\n/* harmony import */ var _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../modules/modules-config.js */ \"./src/modules/modules-config.js\");\n/* harmony import */ var _modules_module_event_emitter_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../modules/module-event-emitter.js */ \"./src/modules/module-event-emitter.js\");\n/* harmony import */ var _modules_entry_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../modules/entry.js */ \"./src/modules/entry.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_modules_module_event_emitter_js__WEBPACK_IMPORTED_MODULE_4__, _modules_entry_js__WEBPACK_IMPORTED_MODULE_5__]);\n([_modules_module_event_emitter_js__WEBPACK_IMPORTED_MODULE_4__, _modules_entry_js__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n_modules_modules_config_js__WEBPACK_IMPORTED_MODULE_3__.css.displayimport = 'displayimport';\nfunction JsImport(container, options = {}) {\n  const defaultOptions = {\n    selectors: {\n      typeimport: \"typeimport\",\n      inputname: \"file_to_load\",\n      showfiles: \".showfiles\",\n      importzoneid: \"import-list\",\n      sourcezone: \"dirlist\",\n    },\n    url: {\n      import: \"gui/import\",\n      dirlist: \"gui/files\"\n    },\n    browse: ['directory', 'file'],\n    textimport: 'to import'\n  };\n  container = (container instanceof HTMLElement) ? container : document.querySelector(container);\n  if (!container) return;\n  options = { ...defaultOptions,\n    ...options\n  };\n  let url = {};\n  url.dirlist = (container.dataset.dirlist) ? container.dataset.dirlist : options.url.dirlist;\n  url.import = (container.dataset.import) ? container.dataset.import : options.url.import;\n  options.selectors.importzoneid = (container.dataset.importzoneid) ? container.dataset.importzoneid : options.selectors.importzoneid;\n  options.browse = (container.dataset.browse) ? container.dataset.browse.split(',') : options.browse;\n  options.textimport = (container.dataset.textimport) ? container.dataset.textimport : options.textimport;\n  const submitbtn = container.querySelector('[type=\"submit\"]');\n  let typeimport;\n  let myFiles;\n  let eventnames = {\n    import: 'import',\n    select: 'select'\n  };\n  let importliste = \"\";\n  let filetoload = document.getElementById(options.selectors.inputname);\n  let importzone = null;\n  let dragentry = null;\n\n  function init() {\n    // init steps to display import sequence\n    addImportZone();\n    container.querySelectorAll('input[name=\"' + options.selectors.typeimport + '\"]').forEach(typeimport => {\n      typeimport.addEventListener('change', (e) => {\n        if (e.currentTarget.checked) {\n          typeimport = e.currentTarget.value;\n          showSelection(true);\n        }\n      });\n    });\n    container.formsubmit.addHandler('submit', async () => {\n      return processImport();\n    });\n    showSelection();\n  }\n\n  function addImportZone() {\n    if (!filetoload) {\n      const importzoneid = (container.dataset.importzone) ? container.dataset.importzone : options.selectors.importzone;\n      let zone = document.getElementById(importzoneid);\n      if (zone === null) {\n        zone = (0,_modules_utils_js__WEBPACK_IMPORTED_MODULE_2__.create_box)('div', {\n          id: importzoneid\n        }, container);\n      };\n      filetoload = (0,_modules_utils_js__WEBPACK_IMPORTED_MODULE_2__.create_box)('input', {\n        type: \"hidden\",\n        id: options.selectors.inputname,\n        name: options.selectors.inputname,\n        class: \"form-input\",\n        required: true\n      }, zone);\n      const response = (0,_modules_utils_js__WEBPACK_IMPORTED_MODULE_2__.create_box)('div', {\n        class: \"response-summary\"\n      }, zone);\n      (0,_modules_utils_js__WEBPACK_IMPORTED_MODULE_2__.create_box)('div', {\n        id: \"total-objects\",\n        class: _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_3__.css.info,\n        data: {\n          text: \"Total objects\"\n        }\n      }, response);\n      (0,_modules_utils_js__WEBPACK_IMPORTED_MODULE_2__.create_box)('div', {\n        id: \"total-tsv\",\n        class: _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_3__.css.info,\n        data: {\n          text: \"Total TSV\"\n        }\n      }, response);\n    }\n  }\n  async function showSelection(refresh = false) {\n    const apply_filters = () => {\n      let filters = typeimport.split('-');\n      filters = filters.map(filter => {\n        return new Set([...(filter_files[filter] ? filter_files[filter] : [])]);\n      });\n      myFiles.container.querySelectorAll('[data-ftype]').forEach(entry => {\n        if (filters.has(entry.dataset.ftype)) entry.classList.remove('disabled');\n        else entry.classList.add('disabled');\n      });\n    }\n    const displayselection = document.getElementById(options.selectors.sourcezone);\n    if (!displayselection) return;\n    if (!myFiles) {\n      const {\n        JsMyFiles\n      } = await __webpack_require__.e(/*! import() */ \"src_modules_js-my-files_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../modules/js-my-files.js */ \"./src/modules/js-my-files.js\"));\n      myFiles = new JsMyFiles(displayselection, {\n        import: url.toimport,\n        url: url.dirlist,\n        browse: options.browse,\n        upload: {\n          label: (displayselection.dataset.uploadlabel) ? (displayselection.dataset.uploadlabel) : 'upload',\n          callback: () => {\n            showSubmit(false);\n          }\n        }\n      });\n      _modules_module_event_emitter_js__WEBPACK_IMPORTED_MODULE_4__.ModuleEventEmitter.on(eventnames.select, (e) => {\n        myFiles.detachDropzone();\n      }, myFiles.uuid);\n      addImportControls(myFiles.jsDirList, myFiles.uuid);\n      container.querySelectorAll('[data-import]').forEach(async (item) => {\n        item.dataset.request = item.dataset.import;\n        await _modules_activ_request_js__WEBPACK_IMPORTED_MODULE_1__.ActivRequest.makeRequest(item);\n        item.addEventListener('click',(e) => {\n        showSubmit();\n        });\n        const other= item.previousElementSibling || item.nextElementSibling;\n        if (other && other.dataset.summary) other.addEventListener('click',(e) => {\n        showSubmit(false);\n        });\n        item.jstree.entrycontrols.options.controls = {};\n        addImportControls(item.jstree, item.jstree.uuid, [_modules_entry_js__WEBPACK_IMPORTED_MODULE_5__.entryTypes.branch, _modules_entry_js__WEBPACK_IMPORTED_MODULE_5__.entryTypes.node]);\n      })\n    }\n    if (refresh === true) apply_filters();\n\n  }\n\n  function addImportPath(value) {\n    document.getElementById(options.selector.importzone).value = value;\n    const displayresult = document.getElementById(options.selector.displayresult);\n    if (displayresult) displayresult.innerHTML = `<li>${value.split('/').pop()}</li>`;\n    const options = container.querySelector('#' + options.selector.importoptions);\n  }\n\n  function addImportEntry(entry) {\n    filetoload.value = entry.getCurrentPath().join(_modules_utils_js__WEBPACK_IMPORTED_MODULE_2__.dirseparator);\n    showSubmit();\n  }\n\n  function addImportControls(entrylist, uploaduuid, typentries = null) {\n    let selected = null;\n\n    function add_remove_import(e) {\n      if (selected) {\n        delete selected.label.dataset.selected;\n        selected.setSelected(false);\n\n      }\n      const activentry = entrylist.getActiventry();\n      if (selected === activentry) {\n        selected = null;\n        return;\n      }\n      const cl = activentry.options.css.selected;\n      activentry.setSelected(true);\n      activentry.label.dataset.selected = options.textimport;\n      entrylist.entrycontrols.showControls(false);\n      selected = activentry;\n    }\n    const control = {\n      import: {\n        action: 'import',\n        class:[\"control-select\"],\n        //icon: 'icon-check',\n        typentries: (typentries) ? typentries : [_modules_entry_js__WEBPACK_IMPORTED_MODULE_5__.entryTypes.branch],\n        text: (options.toselect)?(options.toselect):'select to import',\n        callback: add_remove_import\n      }\n    };\n\n    entrylist.entrycontrols.options.controls = {\n      ...entrylist.entrycontrols.options.controls,\n      ...control\n    };\n    const import_action = function(entry) {\n      if (entrylist.activentry) entrylist.activentry.setSelected(false);\n      addImportEntry(entry);\n      _modules_module_event_emitter_js__WEBPACK_IMPORTED_MODULE_4__.ModuleEventEmitter.emit(eventnames.select, {\n        value: false\n      }, uploaduuid);\n\n    }\n    entrylist.entrycontrols.addControl(control.import, 0, import_action);\n    entrylist.entrycontrols.activateControl(control.import);\n  }\n\n  function showSubmit(show = true) {\n    const submit = container.querySelector('[type=\"submit\"]');\n    if (show) {\n      submit.classList.remove('hide');\n      submit.disabled = false;\n    } else submit.disabled = true;\n  }\n\n  function processImport() {\n    if (filetoload.value === \"\") {\n      alert('nothing to upload');\n      return false;\n    }\n    return true;\n  }\n  init();\n}\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbW9kdWxlcy9qcy1pbXBvcnQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFrQztBQUdHO0FBS1I7QUFHUztBQUdNO0FBR2Y7QUFDN0IsMkRBQUc7QUFDSSx5Q0FBeUM7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNkRBQVU7QUFDekI7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxtQkFBbUIsNkRBQVU7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCx1QkFBdUIsNkRBQVU7QUFDakM7QUFDQSxPQUFPO0FBQ1AsTUFBTSw2REFBVTtBQUNoQjtBQUNBLGVBQWUsMkRBQUc7QUFDbEI7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU0sNkRBQVU7QUFDaEI7QUFDQSxlQUFlLDJEQUFHO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxRQUFRLHdMQUFtQztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNLGdGQUFrQjtBQUN4QjtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxjQUFjLG1FQUFZO0FBQzFCO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsMERBQTBELHlEQUFVLFNBQVMseURBQVU7QUFDdkYsT0FBTztBQUNQO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELHVCQUF1QjtBQUMvRTtBQUNBOztBQUVBO0FBQ0EsbURBQW1ELDJEQUFZO0FBQy9EO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELHlEQUFVO0FBQzNEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxnRkFBa0I7QUFDeEI7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbW9kdWxlcy9qcy1pbXBvcnQuanM/NjAyMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRE9NUHVyaWZ5IGZyb20gJ2RvbXB1cmlmeSc7XG5pbXBvcnQge1xuICBBY3RpdlJlcXVlc3Rcbn0gZnJvbSBcIi4uL21vZHVsZXMvYWN0aXYtcmVxdWVzdC5qc1wiO1xuaW1wb3J0IHtcbiAgZmV0Y2hTZXR0aW5ncyxcbiAgY3JlYXRlX2JveCxcbiAgZGlyc2VwYXJhdG9yXG59IGZyb20gJy4uL21vZHVsZXMvdXRpbHMuanMnO1xuaW1wb3J0IHtcbiAgY3NzLFxufSBmcm9tICcuLi9tb2R1bGVzL21vZHVsZXMtY29uZmlnLmpzJztcbmltcG9ydCB7XG4gIE1vZHVsZUV2ZW50RW1pdHRlclxufSBmcm9tICcuLi9tb2R1bGVzL21vZHVsZS1ldmVudC1lbWl0dGVyLmpzJztcbmltcG9ydCB7XG4gIGVudHJ5VHlwZXMsXG59IGZyb20gJy4uL21vZHVsZXMvZW50cnkuanMnO1xuY3NzLmRpc3BsYXlpbXBvcnQgPSAnZGlzcGxheWltcG9ydCc7XG5leHBvcnQgZnVuY3Rpb24gSnNJbXBvcnQoY29udGFpbmVyLCBvcHRpb25zID0ge30pIHtcbiAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgc2VsZWN0b3JzOiB7XG4gICAgICB0eXBlaW1wb3J0OiBcInR5cGVpbXBvcnRcIixcbiAgICAgIGlucHV0bmFtZTogXCJmaWxlX3RvX2xvYWRcIixcbiAgICAgIHNob3dmaWxlczogXCIuc2hvd2ZpbGVzXCIsXG4gICAgICBpbXBvcnR6b25laWQ6IFwiaW1wb3J0LWxpc3RcIixcbiAgICAgIHNvdXJjZXpvbmU6IFwiZGlybGlzdFwiLFxuICAgIH0sXG4gICAgdXJsOiB7XG4gICAgICBpbXBvcnQ6IFwiZ3VpL2ltcG9ydFwiLFxuICAgICAgZGlybGlzdDogXCJndWkvZmlsZXNcIlxuICAgIH0sXG4gICAgYnJvd3NlOiBbJ2RpcmVjdG9yeScsICdmaWxlJ10sXG4gICAgdGV4dGltcG9ydDogJ3RvIGltcG9ydCdcbiAgfTtcbiAgY29udGFpbmVyID0gKGNvbnRhaW5lciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSA/IGNvbnRhaW5lciA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyKTtcbiAgaWYgKCFjb250YWluZXIpIHJldHVybjtcbiAgb3B0aW9ucyA9IHsgLi4uZGVmYXVsdE9wdGlvbnMsXG4gICAgLi4ub3B0aW9uc1xuICB9O1xuICBsZXQgdXJsID0ge307XG4gIHVybC5kaXJsaXN0ID0gKGNvbnRhaW5lci5kYXRhc2V0LmRpcmxpc3QpID8gY29udGFpbmVyLmRhdGFzZXQuZGlybGlzdCA6IG9wdGlvbnMudXJsLmRpcmxpc3Q7XG4gIHVybC5pbXBvcnQgPSAoY29udGFpbmVyLmRhdGFzZXQuaW1wb3J0KSA/IGNvbnRhaW5lci5kYXRhc2V0LmltcG9ydCA6IG9wdGlvbnMudXJsLmltcG9ydDtcbiAgb3B0aW9ucy5zZWxlY3RvcnMuaW1wb3J0em9uZWlkID0gKGNvbnRhaW5lci5kYXRhc2V0LmltcG9ydHpvbmVpZCkgPyBjb250YWluZXIuZGF0YXNldC5pbXBvcnR6b25laWQgOiBvcHRpb25zLnNlbGVjdG9ycy5pbXBvcnR6b25laWQ7XG4gIG9wdGlvbnMuYnJvd3NlID0gKGNvbnRhaW5lci5kYXRhc2V0LmJyb3dzZSkgPyBjb250YWluZXIuZGF0YXNldC5icm93c2Uuc3BsaXQoJywnKSA6IG9wdGlvbnMuYnJvd3NlO1xuICBvcHRpb25zLnRleHRpbXBvcnQgPSAoY29udGFpbmVyLmRhdGFzZXQudGV4dGltcG9ydCkgPyBjb250YWluZXIuZGF0YXNldC50ZXh0aW1wb3J0IDogb3B0aW9ucy50ZXh0aW1wb3J0O1xuICBjb25zdCBzdWJtaXRidG4gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignW3R5cGU9XCJzdWJtaXRcIl0nKTtcbiAgbGV0IHR5cGVpbXBvcnQ7XG4gIGxldCBteUZpbGVzO1xuICBsZXQgZXZlbnRuYW1lcyA9IHtcbiAgICBpbXBvcnQ6ICdpbXBvcnQnLFxuICAgIHNlbGVjdDogJ3NlbGVjdCdcbiAgfTtcbiAgbGV0IGltcG9ydGxpc3RlID0gXCJcIjtcbiAgbGV0IGZpbGV0b2xvYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvcHRpb25zLnNlbGVjdG9ycy5pbnB1dG5hbWUpO1xuICBsZXQgaW1wb3J0em9uZSA9IG51bGw7XG4gIGxldCBkcmFnZW50cnkgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgLy8gaW5pdCBzdGVwcyB0byBkaXNwbGF5IGltcG9ydCBzZXF1ZW5jZVxuICAgIGFkZEltcG9ydFpvbmUoKTtcbiAgICBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbbmFtZT1cIicgKyBvcHRpb25zLnNlbGVjdG9ycy50eXBlaW1wb3J0ICsgJ1wiXScpLmZvckVhY2godHlwZWltcG9ydCA9PiB7XG4gICAgICB0eXBlaW1wb3J0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICAgIGlmIChlLmN1cnJlbnRUYXJnZXQuY2hlY2tlZCkge1xuICAgICAgICAgIHR5cGVpbXBvcnQgPSBlLmN1cnJlbnRUYXJnZXQudmFsdWU7XG4gICAgICAgICAgc2hvd1NlbGVjdGlvbih0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgY29udGFpbmVyLmZvcm1zdWJtaXQuYWRkSGFuZGxlcignc3VibWl0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmV0dXJuIHByb2Nlc3NJbXBvcnQoKTtcbiAgICB9KTtcbiAgICBzaG93U2VsZWN0aW9uKCk7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRJbXBvcnRab25lKCkge1xuICAgIGlmICghZmlsZXRvbG9hZCkge1xuICAgICAgY29uc3QgaW1wb3J0em9uZWlkID0gKGNvbnRhaW5lci5kYXRhc2V0LmltcG9ydHpvbmUpID8gY29udGFpbmVyLmRhdGFzZXQuaW1wb3J0em9uZSA6IG9wdGlvbnMuc2VsZWN0b3JzLmltcG9ydHpvbmU7XG4gICAgICBsZXQgem9uZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGltcG9ydHpvbmVpZCk7XG4gICAgICBpZiAoem9uZSA9PT0gbnVsbCkge1xuICAgICAgICB6b25lID0gY3JlYXRlX2JveCgnZGl2Jywge1xuICAgICAgICAgIGlkOiBpbXBvcnR6b25laWRcbiAgICAgICAgfSwgY29udGFpbmVyKTtcbiAgICAgIH07XG4gICAgICBmaWxldG9sb2FkID0gY3JlYXRlX2JveCgnaW5wdXQnLCB7XG4gICAgICAgIHR5cGU6IFwiaGlkZGVuXCIsXG4gICAgICAgIGlkOiBvcHRpb25zLnNlbGVjdG9ycy5pbnB1dG5hbWUsXG4gICAgICAgIG5hbWU6IG9wdGlvbnMuc2VsZWN0b3JzLmlucHV0bmFtZSxcbiAgICAgICAgY2xhc3M6IFwiZm9ybS1pbnB1dFwiLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgfSwgem9uZSk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGNyZWF0ZV9ib3goJ2RpdicsIHtcbiAgICAgICAgY2xhc3M6IFwicmVzcG9uc2Utc3VtbWFyeVwiXG4gICAgICB9LCB6b25lKTtcbiAgICAgIGNyZWF0ZV9ib3goJ2RpdicsIHtcbiAgICAgICAgaWQ6IFwidG90YWwtb2JqZWN0c1wiLFxuICAgICAgICBjbGFzczogY3NzLmluZm8sXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB0ZXh0OiBcIlRvdGFsIG9iamVjdHNcIlxuICAgICAgICB9XG4gICAgICB9LCByZXNwb25zZSk7XG4gICAgICBjcmVhdGVfYm94KCdkaXYnLCB7XG4gICAgICAgIGlkOiBcInRvdGFsLXRzdlwiLFxuICAgICAgICBjbGFzczogY3NzLmluZm8sXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB0ZXh0OiBcIlRvdGFsIFRTVlwiXG4gICAgICAgIH1cbiAgICAgIH0sIHJlc3BvbnNlKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgZnVuY3Rpb24gc2hvd1NlbGVjdGlvbihyZWZyZXNoID0gZmFsc2UpIHtcbiAgICBjb25zdCBhcHBseV9maWx0ZXJzID0gKCkgPT4ge1xuICAgICAgbGV0IGZpbHRlcnMgPSB0eXBlaW1wb3J0LnNwbGl0KCctJyk7XG4gICAgICBmaWx0ZXJzID0gZmlsdGVycy5tYXAoZmlsdGVyID0+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBTZXQoWy4uLihmaWx0ZXJfZmlsZXNbZmlsdGVyXSA/IGZpbHRlcl9maWxlc1tmaWx0ZXJdIDogW10pXSk7XG4gICAgICB9KTtcbiAgICAgIG15RmlsZXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWZ0eXBlXScpLmZvckVhY2goZW50cnkgPT4ge1xuICAgICAgICBpZiAoZmlsdGVycy5oYXMoZW50cnkuZGF0YXNldC5mdHlwZSkpIGVudHJ5LmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XG4gICAgICAgIGVsc2UgZW50cnkuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBkaXNwbGF5c2VsZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQob3B0aW9ucy5zZWxlY3RvcnMuc291cmNlem9uZSk7XG4gICAgaWYgKCFkaXNwbGF5c2VsZWN0aW9uKSByZXR1cm47XG4gICAgaWYgKCFteUZpbGVzKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIEpzTXlGaWxlc1xuICAgICAgfSA9IGF3YWl0IGltcG9ydCgnLi4vbW9kdWxlcy9qcy1teS1maWxlcy5qcycpO1xuICAgICAgbXlGaWxlcyA9IG5ldyBKc015RmlsZXMoZGlzcGxheXNlbGVjdGlvbiwge1xuICAgICAgICBpbXBvcnQ6IHVybC50b2ltcG9ydCxcbiAgICAgICAgdXJsOiB1cmwuZGlybGlzdCxcbiAgICAgICAgYnJvd3NlOiBvcHRpb25zLmJyb3dzZSxcbiAgICAgICAgdXBsb2FkOiB7XG4gICAgICAgICAgbGFiZWw6IChkaXNwbGF5c2VsZWN0aW9uLmRhdGFzZXQudXBsb2FkbGFiZWwpID8gKGRpc3BsYXlzZWxlY3Rpb24uZGF0YXNldC51cGxvYWRsYWJlbCkgOiAndXBsb2FkJyxcbiAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgc2hvd1N1Ym1pdChmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIE1vZHVsZUV2ZW50RW1pdHRlci5vbihldmVudG5hbWVzLnNlbGVjdCwgKGUpID0+IHtcbiAgICAgICAgbXlGaWxlcy5kZXRhY2hEcm9wem9uZSgpO1xuICAgICAgfSwgbXlGaWxlcy51dWlkKTtcbiAgICAgIGFkZEltcG9ydENvbnRyb2xzKG15RmlsZXMuanNEaXJMaXN0LCBteUZpbGVzLnV1aWQpO1xuICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWltcG9ydF0nKS5mb3JFYWNoKGFzeW5jIChpdGVtKSA9PiB7XG4gICAgICAgIGl0ZW0uZGF0YXNldC5yZXF1ZXN0ID0gaXRlbS5kYXRhc2V0LmltcG9ydDtcbiAgICAgICAgYXdhaXQgQWN0aXZSZXF1ZXN0Lm1ha2VSZXF1ZXN0KGl0ZW0pO1xuICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoZSkgPT4ge1xuICAgICAgICBzaG93U3VibWl0KCk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBvdGhlcj0gaXRlbS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nIHx8IGl0ZW0ubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICBpZiAob3RoZXIgJiYgb3RoZXIuZGF0YXNldC5zdW1tYXJ5KSBvdGhlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKGUpID0+IHtcbiAgICAgICAgc2hvd1N1Ym1pdChmYWxzZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpdGVtLmpzdHJlZS5lbnRyeWNvbnRyb2xzLm9wdGlvbnMuY29udHJvbHMgPSB7fTtcbiAgICAgICAgYWRkSW1wb3J0Q29udHJvbHMoaXRlbS5qc3RyZWUsIGl0ZW0uanN0cmVlLnV1aWQsIFtlbnRyeVR5cGVzLmJyYW5jaCwgZW50cnlUeXBlcy5ub2RlXSk7XG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAocmVmcmVzaCA9PT0gdHJ1ZSkgYXBwbHlfZmlsdGVycygpO1xuXG4gIH1cblxuICBmdW5jdGlvbiBhZGRJbXBvcnRQYXRoKHZhbHVlKSB7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQob3B0aW9ucy5zZWxlY3Rvci5pbXBvcnR6b25lKS52YWx1ZSA9IHZhbHVlO1xuICAgIGNvbnN0IGRpc3BsYXlyZXN1bHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvcHRpb25zLnNlbGVjdG9yLmRpc3BsYXlyZXN1bHQpO1xuICAgIGlmIChkaXNwbGF5cmVzdWx0KSBkaXNwbGF5cmVzdWx0LmlubmVySFRNTCA9IGA8bGk+JHt2YWx1ZS5zcGxpdCgnLycpLnBvcCgpfTwvbGk+YDtcbiAgICBjb25zdCBvcHRpb25zID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyMnICsgb3B0aW9ucy5zZWxlY3Rvci5pbXBvcnRvcHRpb25zKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZEltcG9ydEVudHJ5KGVudHJ5KSB7XG4gICAgZmlsZXRvbG9hZC52YWx1ZSA9IGVudHJ5LmdldEN1cnJlbnRQYXRoKCkuam9pbihkaXJzZXBhcmF0b3IpO1xuICAgIHNob3dTdWJtaXQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZEltcG9ydENvbnRyb2xzKGVudHJ5bGlzdCwgdXBsb2FkdXVpZCwgdHlwZW50cmllcyA9IG51bGwpIHtcbiAgICBsZXQgc2VsZWN0ZWQgPSBudWxsO1xuXG4gICAgZnVuY3Rpb24gYWRkX3JlbW92ZV9pbXBvcnQoZSkge1xuICAgICAgaWYgKHNlbGVjdGVkKSB7XG4gICAgICAgIGRlbGV0ZSBzZWxlY3RlZC5sYWJlbC5kYXRhc2V0LnNlbGVjdGVkO1xuICAgICAgICBzZWxlY3RlZC5zZXRTZWxlY3RlZChmYWxzZSk7XG5cbiAgICAgIH1cbiAgICAgIGNvbnN0IGFjdGl2ZW50cnkgPSBlbnRyeWxpc3QuZ2V0QWN0aXZlbnRyeSgpO1xuICAgICAgaWYgKHNlbGVjdGVkID09PSBhY3RpdmVudHJ5KSB7XG4gICAgICAgIHNlbGVjdGVkID0gbnVsbDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgY2wgPSBhY3RpdmVudHJ5Lm9wdGlvbnMuY3NzLnNlbGVjdGVkO1xuICAgICAgYWN0aXZlbnRyeS5zZXRTZWxlY3RlZCh0cnVlKTtcbiAgICAgIGFjdGl2ZW50cnkubGFiZWwuZGF0YXNldC5zZWxlY3RlZCA9IG9wdGlvbnMudGV4dGltcG9ydDtcbiAgICAgIGVudHJ5bGlzdC5lbnRyeWNvbnRyb2xzLnNob3dDb250cm9scyhmYWxzZSk7XG4gICAgICBzZWxlY3RlZCA9IGFjdGl2ZW50cnk7XG4gICAgfVxuICAgIGNvbnN0IGNvbnRyb2wgPSB7XG4gICAgICBpbXBvcnQ6IHtcbiAgICAgICAgYWN0aW9uOiAnaW1wb3J0JyxcbiAgICAgICAgY2xhc3M6W1wiY29udHJvbC1zZWxlY3RcIl0sXG4gICAgICAgIC8vaWNvbjogJ2ljb24tY2hlY2snLFxuICAgICAgICB0eXBlbnRyaWVzOiAodHlwZW50cmllcykgPyB0eXBlbnRyaWVzIDogW2VudHJ5VHlwZXMuYnJhbmNoXSxcbiAgICAgICAgdGV4dDogKG9wdGlvbnMudG9zZWxlY3QpPyhvcHRpb25zLnRvc2VsZWN0KTonc2VsZWN0IHRvIGltcG9ydCcsXG4gICAgICAgIGNhbGxiYWNrOiBhZGRfcmVtb3ZlX2ltcG9ydFxuICAgICAgfVxuICAgIH07XG5cbiAgICBlbnRyeWxpc3QuZW50cnljb250cm9scy5vcHRpb25zLmNvbnRyb2xzID0ge1xuICAgICAgLi4uZW50cnlsaXN0LmVudHJ5Y29udHJvbHMub3B0aW9ucy5jb250cm9scyxcbiAgICAgIC4uLmNvbnRyb2xcbiAgICB9O1xuICAgIGNvbnN0IGltcG9ydF9hY3Rpb24gPSBmdW5jdGlvbihlbnRyeSkge1xuICAgICAgaWYgKGVudHJ5bGlzdC5hY3RpdmVudHJ5KSBlbnRyeWxpc3QuYWN0aXZlbnRyeS5zZXRTZWxlY3RlZChmYWxzZSk7XG4gICAgICBhZGRJbXBvcnRFbnRyeShlbnRyeSk7XG4gICAgICBNb2R1bGVFdmVudEVtaXR0ZXIuZW1pdChldmVudG5hbWVzLnNlbGVjdCwge1xuICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgIH0sIHVwbG9hZHV1aWQpO1xuXG4gICAgfVxuICAgIGVudHJ5bGlzdC5lbnRyeWNvbnRyb2xzLmFkZENvbnRyb2woY29udHJvbC5pbXBvcnQsIDAsIGltcG9ydF9hY3Rpb24pO1xuICAgIGVudHJ5bGlzdC5lbnRyeWNvbnRyb2xzLmFjdGl2YXRlQ29udHJvbChjb250cm9sLmltcG9ydCk7XG4gIH1cblxuICBmdW5jdGlvbiBzaG93U3VibWl0KHNob3cgPSB0cnVlKSB7XG4gICAgY29uc3Qgc3VibWl0ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ1t0eXBlPVwic3VibWl0XCJdJyk7XG4gICAgaWYgKHNob3cpIHtcbiAgICAgIHN1Ym1pdC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7XG4gICAgICBzdWJtaXQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9IGVsc2Ugc3VibWl0LmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb2Nlc3NJbXBvcnQoKSB7XG4gICAgaWYgKGZpbGV0b2xvYWQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgIGFsZXJ0KCdub3RoaW5nIHRvIHVwbG9hZCcpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpbml0KCk7XG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/modules/js-import.js\n")}}]);
/*! For license information please see src_modules_js-import_js.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["src_modules_js-import_js"],{"./src/modules/js-import.js":(module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsImport: () => (/* binding */ JsImport)\n/* harmony export */ });\n/* harmony import */ var dompurify__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dompurify */ \"./node_modules/dompurify/dist/purify.js\");\n/* harmony import */ var dompurify__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dompurify__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _modules_activ_request_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../modules/activ-request.js */ \"./src/modules/activ-request.js\");\n/* harmony import */ var _modules_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../modules/utils.js */ \"./src/modules/utils.js\");\n/* harmony import */ var _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../modules/modules-config.js */ \"./src/modules/modules-config.js\");\n/* harmony import */ var _modules_module_event_emitter_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../modules/module-event-emitter.js */ \"./src/modules/module-event-emitter.js\");\n/* harmony import */ var _modules_entry_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../modules/entry.js */ \"./src/modules/entry.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_modules_module_event_emitter_js__WEBPACK_IMPORTED_MODULE_4__, _modules_entry_js__WEBPACK_IMPORTED_MODULE_5__]);\n([_modules_module_event_emitter_js__WEBPACK_IMPORTED_MODULE_4__, _modules_entry_js__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n_modules_modules_config_js__WEBPACK_IMPORTED_MODULE_3__.css.displayimport = 'displayimport';\nfunction JsImport(container, options = {}) {\n  const defaultOptions = {\n    selectors: {\n      typeimport: \"typeimport\",\n      inputname: \"file_to_load\",\n      showfiles: \".showfiles\",\n      importzoneid: \"import-list\",\n      sourcezone: \"dirlist\",\n    },\n    url: {\n      import: \"gui/import\",\n      dirlist: \"gui/files\"\n    },\n    browse: ['directory', 'file'],\n    textimport: 'to import'\n  };\n  container = (container instanceof HTMLElement) ? container : document.querySelector(container);\n  if (!container) return;\n  options = { ...defaultOptions,\n    ...options\n  };\n  let url = {};\n  url.dirlist = (container.dataset.dirlist) ? container.dataset.dirlist : options.url.dirlist;\n  url.import = (container.dataset.import) ? container.dataset.import : options.url.import;\n  options.selectors.importzoneid = (container.dataset.importzoneid) ? container.dataset.importzoneid : options.selectors.importzoneid;\n  options.browse = (container.dataset.browse) ? container.dataset.browse.split(',') : options.browse;\n  options.textimport = (container.dataset.textimport) ? container.dataset.textimport : options.textimport;\n  const submitbtn = container.querySelector('[type=\"submit\"]');\n  let typeimport;\n  let myFiles;\n  let eventnames = {\n    import: 'import',\n    select: 'select'\n  };\n  let importliste = \"\";\n  let filetoload = document.getElementById(options.selectors.inputname);\n  let importzone = null;\n  let dragentry = null;\n\n  function init() {\n    // init steps to display import sequence\n    addImportZone();\n    container.querySelectorAll('input[name=\"' + options.selectors.typeimport + '\"]').forEach(typeimport => {\n      typeimport.addEventListener('change', (e) => {\n        if (e.currentTarget.checked) {\n          typeimport = e.currentTarget.value;\n          showSelection(true);\n        }\n      });\n    });\n    container.formsubmit.addHandler('submit', async () => {\n      return processImport();\n    });\n    showSelection();\n  }\n\n  function addImportZone() {\n    if (!filetoload) {\n      const importzoneid = (container.dataset.importzone) ? container.dataset.importzone : options.selectors.importzone;\n      let zone = document.getElementById(importzoneid);\n      if (zone === null) {\n        zone = (0,_modules_utils_js__WEBPACK_IMPORTED_MODULE_2__.create_box)('div', {\n          id: importzoneid\n        }, container);\n      };\n      filetoload = (0,_modules_utils_js__WEBPACK_IMPORTED_MODULE_2__.create_box)('input', {\n        type: \"hidden\",\n        id: options.selectors.inputname,\n        name: options.selectors.inputname,\n        class: \"form-input\",\n        required: true\n      }, zone);\n      const response = (0,_modules_utils_js__WEBPACK_IMPORTED_MODULE_2__.create_box)('div', {\n        class: \"response-summary\"\n      }, zone);\n      (0,_modules_utils_js__WEBPACK_IMPORTED_MODULE_2__.create_box)('div', {\n        id: \"total-objects\",\n        class: _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_3__.css.info,\n        data: {\n          text: \"Total objects\"\n        }\n      }, response);\n      (0,_modules_utils_js__WEBPACK_IMPORTED_MODULE_2__.create_box)('div', {\n        id: \"total-tsv\",\n        class: _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_3__.css.info,\n        data: {\n          text: \"Total TSV\"\n        }\n      }, response);\n    }\n  }\n  async function showSelection(refresh = false) {\n    const apply_filters = () => {\n      let filters = typeimport.split('-');\n      filters = filters.map(filter => {\n        return new Set([...(filter_files[filter] ? filter_files[filter] : [])]);\n      });\n      myFiles.container.querySelectorAll('[data-ftype]').forEach(entry => {\n        if (filters.has(entry.dataset.ftype)) entry.classList.remove('disabled');\n        else entry.classList.add('disabled');\n      });\n    }\n    const displayselection = document.getElementById(options.selectors.sourcezone);\n    if (!displayselection) return;\n    if (!myFiles) {\n      const {\n        JsMyFiles\n      } = await __webpack_require__.e(/*! import() */ \"src_modules_js-my-files_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../modules/js-my-files.js */ \"./src/modules/js-my-files.js\"));\n      myFiles = new JsMyFiles(displayselection, {\n        import: url.toimport,\n        url: url.dirlist,\n        browse: options.browse,\n        upload: {\n          label: (displayselection.dataset.uploadlabel) ? (displayselection.dataset.uploadlabel) : 'upload',\n          callback: () => {\n            showSubmit(false);\n          }\n        }\n      });\n      _modules_module_event_emitter_js__WEBPACK_IMPORTED_MODULE_4__.ModuleEventEmitter.on(eventnames.select, (e) => {\n        myFiles.detachDropzone();\n      }, myFiles.uuid);\n      addImportControls(myFiles.jsDirList, myFiles.uuid);\n      container.querySelectorAll('[data-import]').forEach(async (item) => {\n        item.dataset.request = item.dataset.import;\n        await _modules_activ_request_js__WEBPACK_IMPORTED_MODULE_1__.ActivRequest.makeRequest(item);\n        item.addEventListener('click',(e) => {\n        showSubmit();\n        });\n        const other= item.previousElementSibling || item.nextElementSibling;\n        if (other && other.dataset.summary) other.addEventListener('click',(e) => {\n        showSubmit(false);\n        });\n        item.jstree.entrycontrols.options.controls = {};\n        addImportControls(item.jstree, item.jstree.uuid, [_modules_entry_js__WEBPACK_IMPORTED_MODULE_5__.entryTypes.branch, _modules_entry_js__WEBPACK_IMPORTED_MODULE_5__.entryTypes.node]);\n      })\n    }\n    if (refresh === true) apply_filters();\n\n  }\n\n  function addImportPath(value) {\n    document.getElementById(options.selector.importzone).value = value;\n    const displayresult = document.getElementById(options.selector.displayresult);\n    if (displayresult) displayresult.innerHTML = `<li>${value.split('/').pop()}</li>`;\n    const options = container.querySelector('#' + options.selector.importoptions);\n  }\n\n  function addImportEntry(entry) {\n    filetoload.value = entry.getCurrentPath().join(_modules_utils_js__WEBPACK_IMPORTED_MODULE_2__.dirseparator);\n    showSubmit();\n  }\n\n  function addImportControls(entrylist, uploaduuid, typentries = null) {\n    let selected = null;\n\n    function add_remove_import(e) {\n      if (selected) {\n        delete selected.label.dataset.selected;\n        selected.setSelected(false);\n\n      }\n      const activentry = entrylist.getActiventry();\n      if (selected === activentry) {\n        selected = null;\n        return;\n      }\n      const cl = activentry.options.css.selected;\n      activentry.setSelected(true);\n      activentry.label.dataset.selected = options.textimport;\n      entrylist.entrycontrols.showControls(false);\n      selected = activentry;\n    }\n    const control = {\n      import: {\n        action: 'import',\n        icon: 'icon-check',\n        typentries: (typentries) ? typentries : [_modules_entry_js__WEBPACK_IMPORTED_MODULE_5__.entryTypes.branch],\n        text: 'import into project',\n        callback: add_remove_import\n      }\n    };\n\n    entrylist.entrycontrols.options.controls = {\n      ...entrylist.entrycontrols.options.controls,\n      ...control\n    };\n    const import_action = function(entry) {\n      if (entrylist.activentry) entrylist.activentry.setSelected(false);\n      addImportEntry(entry);\n      _modules_module_event_emitter_js__WEBPACK_IMPORTED_MODULE_4__.ModuleEventEmitter.emit(eventnames.select, {\n        value: false\n      }, uploaduuid);\n\n    }\n    entrylist.entrycontrols.addControl(control.import, 0, import_action);\n    entrylist.entrycontrols.activateControl(control.import);\n    console.log('entrylist controls ', entrylist.entrycontrols)\n\n  }\n\n  function showSubmit(show = true) {\n    const submit = container.querySelector('[type=\"submit\"]');\n    if (show) {\n      submit.classList.remove('hide');\n      submit.disabled = false;\n    } else submit.disabled = true;\n  }\n\n  function processImport() {\n    if (filetoload.value === \"\") {\n      alert('nothing to upload');\n      return false;\n    }\n    return true;\n  }\n  init();\n}\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbW9kdWxlcy9qcy1pbXBvcnQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBa0M7QUFHRztBQUtSO0FBR1M7QUFHTTtBQUdmO0FBQzdCLDJEQUFHO0FBQ0kseUNBQXlDO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDZEQUFVO0FBQ3pCO0FBQ0EsU0FBUztBQUNUO0FBQ0EsbUJBQW1CLDZEQUFVO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsdUJBQXVCLDZEQUFVO0FBQ2pDO0FBQ0EsT0FBTztBQUNQLE1BQU0sNkRBQVU7QUFDaEI7QUFDQSxlQUFlLDJEQUFHO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNLDZEQUFVO0FBQ2hCO0FBQ0EsZUFBZSwyREFBRztBQUNsQjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsUUFBUSx3TEFBbUM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTSxnRkFBa0I7QUFDeEI7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsY0FBYyxtRUFBWTtBQUMxQjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLDBEQUEwRCx5REFBVSxTQUFTLHlEQUFVO0FBQ3ZGLE9BQU87QUFDUDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCx1QkFBdUI7QUFDL0U7QUFDQTs7QUFFQTtBQUNBLG1EQUFtRCwyREFBWTtBQUMvRDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQseURBQVU7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLGdGQUFrQjtBQUN4QjtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL2pzLWltcG9ydC5qcz82MDIzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBET01QdXJpZnkgZnJvbSAnZG9tcHVyaWZ5JztcbmltcG9ydCB7XG4gIEFjdGl2UmVxdWVzdFxufSBmcm9tIFwiLi4vbW9kdWxlcy9hY3Rpdi1yZXF1ZXN0LmpzXCI7XG5pbXBvcnQge1xuICBmZXRjaFNldHRpbmdzLFxuICBjcmVhdGVfYm94LFxuICBkaXJzZXBhcmF0b3Jcbn0gZnJvbSAnLi4vbW9kdWxlcy91dGlscy5qcyc7XG5pbXBvcnQge1xuICBjc3MsXG59IGZyb20gJy4uL21vZHVsZXMvbW9kdWxlcy1jb25maWcuanMnO1xuaW1wb3J0IHtcbiAgTW9kdWxlRXZlbnRFbWl0dGVyXG59IGZyb20gJy4uL21vZHVsZXMvbW9kdWxlLWV2ZW50LWVtaXR0ZXIuanMnO1xuaW1wb3J0IHtcbiAgZW50cnlUeXBlcyxcbn0gZnJvbSAnLi4vbW9kdWxlcy9lbnRyeS5qcyc7XG5jc3MuZGlzcGxheWltcG9ydCA9ICdkaXNwbGF5aW1wb3J0JztcbmV4cG9ydCBmdW5jdGlvbiBKc0ltcG9ydChjb250YWluZXIsIG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICBzZWxlY3RvcnM6IHtcbiAgICAgIHR5cGVpbXBvcnQ6IFwidHlwZWltcG9ydFwiLFxuICAgICAgaW5wdXRuYW1lOiBcImZpbGVfdG9fbG9hZFwiLFxuICAgICAgc2hvd2ZpbGVzOiBcIi5zaG93ZmlsZXNcIixcbiAgICAgIGltcG9ydHpvbmVpZDogXCJpbXBvcnQtbGlzdFwiLFxuICAgICAgc291cmNlem9uZTogXCJkaXJsaXN0XCIsXG4gICAgfSxcbiAgICB1cmw6IHtcbiAgICAgIGltcG9ydDogXCJndWkvaW1wb3J0XCIsXG4gICAgICBkaXJsaXN0OiBcImd1aS9maWxlc1wiXG4gICAgfSxcbiAgICBicm93c2U6IFsnZGlyZWN0b3J5JywgJ2ZpbGUnXSxcbiAgICB0ZXh0aW1wb3J0OiAndG8gaW1wb3J0J1xuICB9O1xuICBjb250YWluZXIgPSAoY29udGFpbmVyIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpID8gY29udGFpbmVyIDogZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXIpO1xuICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuO1xuICBvcHRpb25zID0geyAuLi5kZWZhdWx0T3B0aW9ucyxcbiAgICAuLi5vcHRpb25zXG4gIH07XG4gIGxldCB1cmwgPSB7fTtcbiAgdXJsLmRpcmxpc3QgPSAoY29udGFpbmVyLmRhdGFzZXQuZGlybGlzdCkgPyBjb250YWluZXIuZGF0YXNldC5kaXJsaXN0IDogb3B0aW9ucy51cmwuZGlybGlzdDtcbiAgdXJsLmltcG9ydCA9IChjb250YWluZXIuZGF0YXNldC5pbXBvcnQpID8gY29udGFpbmVyLmRhdGFzZXQuaW1wb3J0IDogb3B0aW9ucy51cmwuaW1wb3J0O1xuICBvcHRpb25zLnNlbGVjdG9ycy5pbXBvcnR6b25laWQgPSAoY29udGFpbmVyLmRhdGFzZXQuaW1wb3J0em9uZWlkKSA/IGNvbnRhaW5lci5kYXRhc2V0LmltcG9ydHpvbmVpZCA6IG9wdGlvbnMuc2VsZWN0b3JzLmltcG9ydHpvbmVpZDtcbiAgb3B0aW9ucy5icm93c2UgPSAoY29udGFpbmVyLmRhdGFzZXQuYnJvd3NlKSA/IGNvbnRhaW5lci5kYXRhc2V0LmJyb3dzZS5zcGxpdCgnLCcpIDogb3B0aW9ucy5icm93c2U7XG4gIG9wdGlvbnMudGV4dGltcG9ydCA9IChjb250YWluZXIuZGF0YXNldC50ZXh0aW1wb3J0KSA/IGNvbnRhaW5lci5kYXRhc2V0LnRleHRpbXBvcnQgOiBvcHRpb25zLnRleHRpbXBvcnQ7XG4gIGNvbnN0IHN1Ym1pdGJ0biA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbdHlwZT1cInN1Ym1pdFwiXScpO1xuICBsZXQgdHlwZWltcG9ydDtcbiAgbGV0IG15RmlsZXM7XG4gIGxldCBldmVudG5hbWVzID0ge1xuICAgIGltcG9ydDogJ2ltcG9ydCcsXG4gICAgc2VsZWN0OiAnc2VsZWN0J1xuICB9O1xuICBsZXQgaW1wb3J0bGlzdGUgPSBcIlwiO1xuICBsZXQgZmlsZXRvbG9hZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG9wdGlvbnMuc2VsZWN0b3JzLmlucHV0bmFtZSk7XG4gIGxldCBpbXBvcnR6b25lID0gbnVsbDtcbiAgbGV0IGRyYWdlbnRyeSA9IG51bGw7XG5cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAvLyBpbml0IHN0ZXBzIHRvIGRpc3BsYXkgaW1wb3J0IHNlcXVlbmNlXG4gICAgYWRkSW1wb3J0Wm9uZSgpO1xuICAgIGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFtuYW1lPVwiJyArIG9wdGlvbnMuc2VsZWN0b3JzLnR5cGVpbXBvcnQgKyAnXCJdJykuZm9yRWFjaCh0eXBlaW1wb3J0ID0+IHtcbiAgICAgIHR5cGVpbXBvcnQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcbiAgICAgICAgaWYgKGUuY3VycmVudFRhcmdldC5jaGVja2VkKSB7XG4gICAgICAgICAgdHlwZWltcG9ydCA9IGUuY3VycmVudFRhcmdldC52YWx1ZTtcbiAgICAgICAgICBzaG93U2VsZWN0aW9uKHRydWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBjb250YWluZXIuZm9ybXN1Ym1pdC5hZGRIYW5kbGVyKCdzdWJtaXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZXR1cm4gcHJvY2Vzc0ltcG9ydCgpO1xuICAgIH0pO1xuICAgIHNob3dTZWxlY3Rpb24oKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZEltcG9ydFpvbmUoKSB7XG4gICAgaWYgKCFmaWxldG9sb2FkKSB7XG4gICAgICBjb25zdCBpbXBvcnR6b25laWQgPSAoY29udGFpbmVyLmRhdGFzZXQuaW1wb3J0em9uZSkgPyBjb250YWluZXIuZGF0YXNldC5pbXBvcnR6b25lIDogb3B0aW9ucy5zZWxlY3RvcnMuaW1wb3J0em9uZTtcbiAgICAgIGxldCB6b25lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaW1wb3J0em9uZWlkKTtcbiAgICAgIGlmICh6b25lID09PSBudWxsKSB7XG4gICAgICAgIHpvbmUgPSBjcmVhdGVfYm94KCdkaXYnLCB7XG4gICAgICAgICAgaWQ6IGltcG9ydHpvbmVpZFxuICAgICAgICB9LCBjb250YWluZXIpO1xuICAgICAgfTtcbiAgICAgIGZpbGV0b2xvYWQgPSBjcmVhdGVfYm94KCdpbnB1dCcsIHtcbiAgICAgICAgdHlwZTogXCJoaWRkZW5cIixcbiAgICAgICAgaWQ6IG9wdGlvbnMuc2VsZWN0b3JzLmlucHV0bmFtZSxcbiAgICAgICAgbmFtZTogb3B0aW9ucy5zZWxlY3RvcnMuaW5wdXRuYW1lLFxuICAgICAgICBjbGFzczogXCJmb3JtLWlucHV0XCIsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICB9LCB6b25lKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gY3JlYXRlX2JveCgnZGl2Jywge1xuICAgICAgICBjbGFzczogXCJyZXNwb25zZS1zdW1tYXJ5XCJcbiAgICAgIH0sIHpvbmUpO1xuICAgICAgY3JlYXRlX2JveCgnZGl2Jywge1xuICAgICAgICBpZDogXCJ0b3RhbC1vYmplY3RzXCIsXG4gICAgICAgIGNsYXNzOiBjc3MuaW5mbyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHRleHQ6IFwiVG90YWwgb2JqZWN0c1wiXG4gICAgICAgIH1cbiAgICAgIH0sIHJlc3BvbnNlKTtcbiAgICAgIGNyZWF0ZV9ib3goJ2RpdicsIHtcbiAgICAgICAgaWQ6IFwidG90YWwtdHN2XCIsXG4gICAgICAgIGNsYXNzOiBjc3MuaW5mbyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHRleHQ6IFwiVG90YWwgVFNWXCJcbiAgICAgICAgfVxuICAgICAgfSwgcmVzcG9uc2UpO1xuICAgIH1cbiAgfVxuICBhc3luYyBmdW5jdGlvbiBzaG93U2VsZWN0aW9uKHJlZnJlc2ggPSBmYWxzZSkge1xuICAgIGNvbnN0IGFwcGx5X2ZpbHRlcnMgPSAoKSA9PiB7XG4gICAgICBsZXQgZmlsdGVycyA9IHR5cGVpbXBvcnQuc3BsaXQoJy0nKTtcbiAgICAgIGZpbHRlcnMgPSBmaWx0ZXJzLm1hcChmaWx0ZXIgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IFNldChbLi4uKGZpbHRlcl9maWxlc1tmaWx0ZXJdID8gZmlsdGVyX2ZpbGVzW2ZpbHRlcl0gOiBbXSldKTtcbiAgICAgIH0pO1xuICAgICAgbXlGaWxlcy5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtZnR5cGVdJykuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICAgIGlmIChmaWx0ZXJzLmhhcyhlbnRyeS5kYXRhc2V0LmZ0eXBlKSkgZW50cnkuY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgZWxzZSBlbnRyeS5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGRpc3BsYXlzZWxlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvcHRpb25zLnNlbGVjdG9ycy5zb3VyY2V6b25lKTtcbiAgICBpZiAoIWRpc3BsYXlzZWxlY3Rpb24pIHJldHVybjtcbiAgICBpZiAoIW15RmlsZXMpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgSnNNeUZpbGVzXG4gICAgICB9ID0gYXdhaXQgaW1wb3J0KCcuLi9tb2R1bGVzL2pzLW15LWZpbGVzLmpzJyk7XG4gICAgICBteUZpbGVzID0gbmV3IEpzTXlGaWxlcyhkaXNwbGF5c2VsZWN0aW9uLCB7XG4gICAgICAgIGltcG9ydDogdXJsLnRvaW1wb3J0LFxuICAgICAgICB1cmw6IHVybC5kaXJsaXN0LFxuICAgICAgICBicm93c2U6IG9wdGlvbnMuYnJvd3NlLFxuICAgICAgICB1cGxvYWQ6IHtcbiAgICAgICAgICBsYWJlbDogKGRpc3BsYXlzZWxlY3Rpb24uZGF0YXNldC51cGxvYWRsYWJlbCkgPyAoZGlzcGxheXNlbGVjdGlvbi5kYXRhc2V0LnVwbG9hZGxhYmVsKSA6ICd1cGxvYWQnLFxuICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICBzaG93U3VibWl0KGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgTW9kdWxlRXZlbnRFbWl0dGVyLm9uKGV2ZW50bmFtZXMuc2VsZWN0LCAoZSkgPT4ge1xuICAgICAgICBteUZpbGVzLmRldGFjaERyb3B6b25lKCk7XG4gICAgICB9LCBteUZpbGVzLnV1aWQpO1xuICAgICAgYWRkSW1wb3J0Q29udHJvbHMobXlGaWxlcy5qc0Rpckxpc3QsIG15RmlsZXMudXVpZCk7XG4gICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtaW1wb3J0XScpLmZvckVhY2goYXN5bmMgKGl0ZW0pID0+IHtcbiAgICAgICAgaXRlbS5kYXRhc2V0LnJlcXVlc3QgPSBpdGVtLmRhdGFzZXQuaW1wb3J0O1xuICAgICAgICBhd2FpdCBBY3RpdlJlcXVlc3QubWFrZVJlcXVlc3QoaXRlbSk7XG4gICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLChlKSA9PiB7XG4gICAgICAgIHNob3dTdWJtaXQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IG90aGVyPSBpdGVtLnByZXZpb3VzRWxlbWVudFNpYmxpbmcgfHwgaXRlbS5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgIGlmIChvdGhlciAmJiBvdGhlci5kYXRhc2V0LnN1bW1hcnkpIG90aGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoZSkgPT4ge1xuICAgICAgICBzaG93U3VibWl0KGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGl0ZW0uanN0cmVlLmVudHJ5Y29udHJvbHMub3B0aW9ucy5jb250cm9scyA9IHt9O1xuICAgICAgICBhZGRJbXBvcnRDb250cm9scyhpdGVtLmpzdHJlZSwgaXRlbS5qc3RyZWUudXVpZCwgW2VudHJ5VHlwZXMuYnJhbmNoLCBlbnRyeVR5cGVzLm5vZGVdKTtcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmIChyZWZyZXNoID09PSB0cnVlKSBhcHBseV9maWx0ZXJzKCk7XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZEltcG9ydFBhdGgodmFsdWUpIHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvcHRpb25zLnNlbGVjdG9yLmltcG9ydHpvbmUpLnZhbHVlID0gdmFsdWU7XG4gICAgY29uc3QgZGlzcGxheXJlc3VsdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG9wdGlvbnMuc2VsZWN0b3IuZGlzcGxheXJlc3VsdCk7XG4gICAgaWYgKGRpc3BsYXlyZXN1bHQpIGRpc3BsYXlyZXN1bHQuaW5uZXJIVE1MID0gYDxsaT4ke3ZhbHVlLnNwbGl0KCcvJykucG9wKCl9PC9saT5gO1xuICAgIGNvbnN0IG9wdGlvbnMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignIycgKyBvcHRpb25zLnNlbGVjdG9yLmltcG9ydG9wdGlvbnMpO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkSW1wb3J0RW50cnkoZW50cnkpIHtcbiAgICBmaWxldG9sb2FkLnZhbHVlID0gZW50cnkuZ2V0Q3VycmVudFBhdGgoKS5qb2luKGRpcnNlcGFyYXRvcik7XG4gICAgc2hvd1N1Ym1pdCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkSW1wb3J0Q29udHJvbHMoZW50cnlsaXN0LCB1cGxvYWR1dWlkLCB0eXBlbnRyaWVzID0gbnVsbCkge1xuICAgIGxldCBzZWxlY3RlZCA9IG51bGw7XG5cbiAgICBmdW5jdGlvbiBhZGRfcmVtb3ZlX2ltcG9ydChlKSB7XG4gICAgICBpZiAoc2VsZWN0ZWQpIHtcbiAgICAgICAgZGVsZXRlIHNlbGVjdGVkLmxhYmVsLmRhdGFzZXQuc2VsZWN0ZWQ7XG4gICAgICAgIHNlbGVjdGVkLnNldFNlbGVjdGVkKGZhbHNlKTtcblxuICAgICAgfVxuICAgICAgY29uc3QgYWN0aXZlbnRyeSA9IGVudHJ5bGlzdC5nZXRBY3RpdmVudHJ5KCk7XG4gICAgICBpZiAoc2VsZWN0ZWQgPT09IGFjdGl2ZW50cnkpIHtcbiAgICAgICAgc2VsZWN0ZWQgPSBudWxsO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBjbCA9IGFjdGl2ZW50cnkub3B0aW9ucy5jc3Muc2VsZWN0ZWQ7XG4gICAgICBhY3RpdmVudHJ5LnNldFNlbGVjdGVkKHRydWUpO1xuICAgICAgYWN0aXZlbnRyeS5sYWJlbC5kYXRhc2V0LnNlbGVjdGVkID0gb3B0aW9ucy50ZXh0aW1wb3J0O1xuICAgICAgZW50cnlsaXN0LmVudHJ5Y29udHJvbHMuc2hvd0NvbnRyb2xzKGZhbHNlKTtcbiAgICAgIHNlbGVjdGVkID0gYWN0aXZlbnRyeTtcbiAgICB9XG4gICAgY29uc3QgY29udHJvbCA9IHtcbiAgICAgIGltcG9ydDoge1xuICAgICAgICBhY3Rpb246ICdpbXBvcnQnLFxuICAgICAgICBpY29uOiAnaWNvbi1jaGVjaycsXG4gICAgICAgIHR5cGVudHJpZXM6ICh0eXBlbnRyaWVzKSA/IHR5cGVudHJpZXMgOiBbZW50cnlUeXBlcy5icmFuY2hdLFxuICAgICAgICB0ZXh0OiAnaW1wb3J0IGludG8gcHJvamVjdCcsXG4gICAgICAgIGNhbGxiYWNrOiBhZGRfcmVtb3ZlX2ltcG9ydFxuICAgICAgfVxuICAgIH07XG5cbiAgICBlbnRyeWxpc3QuZW50cnljb250cm9scy5vcHRpb25zLmNvbnRyb2xzID0ge1xuICAgICAgLi4uZW50cnlsaXN0LmVudHJ5Y29udHJvbHMub3B0aW9ucy5jb250cm9scyxcbiAgICAgIC4uLmNvbnRyb2xcbiAgICB9O1xuICAgIGNvbnN0IGltcG9ydF9hY3Rpb24gPSBmdW5jdGlvbihlbnRyeSkge1xuICAgICAgaWYgKGVudHJ5bGlzdC5hY3RpdmVudHJ5KSBlbnRyeWxpc3QuYWN0aXZlbnRyeS5zZXRTZWxlY3RlZChmYWxzZSk7XG4gICAgICBhZGRJbXBvcnRFbnRyeShlbnRyeSk7XG4gICAgICBNb2R1bGVFdmVudEVtaXR0ZXIuZW1pdChldmVudG5hbWVzLnNlbGVjdCwge1xuICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgIH0sIHVwbG9hZHV1aWQpO1xuXG4gICAgfVxuICAgIGVudHJ5bGlzdC5lbnRyeWNvbnRyb2xzLmFkZENvbnRyb2woY29udHJvbC5pbXBvcnQsIDAsIGltcG9ydF9hY3Rpb24pO1xuICAgIGVudHJ5bGlzdC5lbnRyeWNvbnRyb2xzLmFjdGl2YXRlQ29udHJvbChjb250cm9sLmltcG9ydCk7XG4gICAgY29uc29sZS5sb2coJ2VudHJ5bGlzdCBjb250cm9scyAnLCBlbnRyeWxpc3QuZW50cnljb250cm9scylcblxuICB9XG5cbiAgZnVuY3Rpb24gc2hvd1N1Ym1pdChzaG93ID0gdHJ1ZSkge1xuICAgIGNvbnN0IHN1Ym1pdCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbdHlwZT1cInN1Ym1pdFwiXScpO1xuICAgIGlmIChzaG93KSB7XG4gICAgICBzdWJtaXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xuICAgICAgc3VibWl0LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfSBlbHNlIHN1Ym1pdC5kaXNhYmxlZCA9IHRydWU7XG4gIH1cblxuICBmdW5jdGlvbiBwcm9jZXNzSW1wb3J0KCkge1xuICAgIGlmIChmaWxldG9sb2FkLnZhbHVlID09PSBcIlwiKSB7XG4gICAgICBhbGVydCgnbm90aGluZyB0byB1cGxvYWQnKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaW5pdCgpO1xufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/modules/js-import.js\n")}}]);
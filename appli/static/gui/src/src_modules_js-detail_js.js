/*! For license information please see src_modules_js-detail_js.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["src_modules_js-detail_js"],{"./src/modules/js-detail.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsDetail: () => (/* binding */ JsDetail)\n/* harmony export */ });\n/* harmony import */ var dompurify__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dompurify */ \"./node_modules/dompurify/dist/purify.es.mjs\");\n/* harmony import */ var _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../modules/modules-config.js */ \"./src/modules/modules-config.js\");\n/* harmony import */ var _modules_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../modules/utils.js */ \"./src/modules/utils.js\");\n\n\n\n//special details info - about in project lists\nfunction JsDetail(options) {\n  let current = null; // current item - only one this.current at a time  / toggle when accordion style\n  let wrapper, detail, content;\n  const defaultOptions = {\n    istable: true, //called by element in table cell\n    over: false, // display over or \"inline vertical\"\n    waitdiv: null\n  }\n  options = { ...defaultOptions,\n    ...options\n  };\n  Object.freeze(options);\n\n  function applyTo(item, container) {\n    if (!(container instanceof HTMLElement)) return;\n    wrapper = container;\n    wrapper.classList.add(_modules_modules_config_js__WEBPACK_IMPORTED_MODULE_1__.css.relative);\n    // item is either an id or the element\n    if (item instanceof HTMLElement) return;\n    detail = (0,_modules_utils_js__WEBPACK_IMPORTED_MODULE_2__.create_box)('div', {\n      id: item,\n      class: _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_1__.css.hide\n    }, wrapper);\n    if (options.waitdiv) {\n      options.waitdiv.textContent = (options.waitdiv.dataset.wait) ? options.waitdiv.dataset.wait : _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_1__.default_messages.wait;\n      detail.append(options.waitdiv);\n    }\n    content = (0,_modules_utils_js__WEBPACK_IMPORTED_MODULE_2__.create_box)('div', {}, detail);\n    // todo : listener window resize\n    return detail;\n  }\n\n  function expandDetail(el, html = null) {\n    // illusion of row expanding\n\n    if (current && current !== el) shrinkDetail(current);\n    current = el;\n    if (options.waitdiv) options.waitdiv.classList.add(_modules_modules_config_js__WEBPACK_IMPORTED_MODULE_1__.css.hide);\n    if (html !== null) content.innerHTML = dompurify__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sanitize(html);\n    el.append(detail);\n    const padding = 6;\n    const cell = (options.istable) ? el.closest('td') : el;\n    let t = (options.istable) ? parseInt(wrapper.querySelector('table').offsetTop) : 0;\n    t = t + (parseInt(cell.offsetTop) + parseInt(el.offsetHeight) + padding) + 'px';\n    const h = (parseInt(cell.offsetHeight) + parseInt(detail.offsetHeight) + padding) + 'px';\n    const w = (parseInt(wrapper.offsetWidth)) + 'px';\n    requestAnimationFrame(() => {\n      detail.style.minWidth = w;\n      detail.style.width = w;\n      cell.style.overflow = 'visible';\n      el.style.overflowX = 'visible';\n      detail.style.top = t;\n      cell.style.minHeight = h;\n      cell.style.height = h;\n    });\n    return current;\n  }\n\n  function shrinkDetail(el) {\n    // illusion of row shrink\n    const cell = (options.istable) ? el.closest('td') : el;\n    //cell.style.maxHeight = cell.dataset.maxh;\n    const ellipsis = el.closest('.overflow');\n    if (ellipsis) {\n      ellipsis.classList.remove('overflow');\n      ellipsis.style.maxWidth = ellipsis.dataset.maxw;\n    }\n    cell.style.minHeight = 'none';\n    cell.style.height = 'auto';\n    cell.style.overflow = el.style.overflowX = el.parentElement.style.overflowX = 'hidden';\n    detail.classList.add(_modules_modules_config_js__WEBPACK_IMPORTED_MODULE_1__.css.hide);\n    wrapper.append(detail);\n    current = null;\n    return current;\n  }\n\n  function activeDetail(activ, clear = false) {\n    if (activ === true) {\n      detail.lastElementChild.innerHTML = ``;\n      detail.classList.remove(_modules_modules_config_js__WEBPACK_IMPORTED_MODULE_1__.css.hide);\n      if (options.waitdiv) options.waitdiv.classList.remove(_modules_modules_config_js__WEBPACK_IMPORTED_MODULE_1__.css.hide);\n\n    } else {\n      detail.classList.add(_modules_modules_config_js__WEBPACK_IMPORTED_MODULE_1__.css.hide);\n      if (options.waitdiv) options.waitdiv.classList.add(_modules_modules_config_js__WEBPACK_IMPORTED_MODULE_1__.css.hide);\n      if (current) shrinkDetail(current);\n      if (clear === true) detail.lastElementChild.innerHTML = ``;\n      current = null;\n    }\n    return current;\n  }\n  return {\n    applyTo,\n    activeDetail,\n    expandDetail,\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbW9kdWxlcy9qcy1kZXRhaWwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFrQztBQUlJO0FBR1Q7QUFDN0I7QUFDTztBQUNQLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwyREFBRztBQUM3QjtBQUNBO0FBQ0EsYUFBYSw2REFBVTtBQUN2QjtBQUNBLGFBQWEsMkRBQUc7QUFDaEIsS0FBSztBQUNMO0FBQ0Esb0dBQW9HLHdFQUFnQjtBQUNwSDtBQUNBO0FBQ0EsY0FBYyw2REFBVSxVQUFVO0FBQ2xDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx1REFBdUQsMkRBQUc7QUFDMUQsMkNBQTJDLGlEQUFTO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwyREFBRztBQUM1QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsMkRBQUc7QUFDakMsNERBQTRELDJEQUFHOztBQUUvRCxNQUFNO0FBQ04sMkJBQTJCLDJEQUFHO0FBQzlCLHlEQUF5RCwyREFBRztBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbW9kdWxlcy9qcy1kZXRhaWwuanM/ZGM1YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRE9NUHVyaWZ5IGZyb20gJ2RvbXB1cmlmeSc7XG5pbXBvcnQge1xuICBjc3MsXG4gIGRlZmF1bHRfbWVzc2FnZXNcbn0gZnJvbSAnLi4vbW9kdWxlcy9tb2R1bGVzLWNvbmZpZy5qcyc7XG5pbXBvcnQge1xuICBjcmVhdGVfYm94XG59IGZyb20gJy4uL21vZHVsZXMvdXRpbHMuanMnO1xuLy9zcGVjaWFsIGRldGFpbHMgaW5mbyAtIGFib3V0IGluIHByb2plY3QgbGlzdHNcbmV4cG9ydCBmdW5jdGlvbiBKc0RldGFpbChvcHRpb25zKSB7XG4gIGxldCBjdXJyZW50ID0gbnVsbDsgLy8gY3VycmVudCBpdGVtIC0gb25seSBvbmUgdGhpcy5jdXJyZW50IGF0IGEgdGltZSAgLyB0b2dnbGUgd2hlbiBhY2NvcmRpb24gc3R5bGVcbiAgbGV0IHdyYXBwZXIsIGRldGFpbCwgY29udGVudDtcbiAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgaXN0YWJsZTogdHJ1ZSwgLy9jYWxsZWQgYnkgZWxlbWVudCBpbiB0YWJsZSBjZWxsXG4gICAgb3ZlcjogZmFsc2UsIC8vIGRpc3BsYXkgb3ZlciBvciBcImlubGluZSB2ZXJ0aWNhbFwiXG4gICAgd2FpdGRpdjogbnVsbFxuICB9XG4gIG9wdGlvbnMgPSB7IC4uLmRlZmF1bHRPcHRpb25zLFxuICAgIC4uLm9wdGlvbnNcbiAgfTtcbiAgT2JqZWN0LmZyZWV6ZShvcHRpb25zKTtcblxuICBmdW5jdGlvbiBhcHBseVRvKGl0ZW0sIGNvbnRhaW5lcikge1xuICAgIGlmICghKGNvbnRhaW5lciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkgcmV0dXJuO1xuICAgIHdyYXBwZXIgPSBjb250YWluZXI7XG4gICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKGNzcy5yZWxhdGl2ZSk7XG4gICAgLy8gaXRlbSBpcyBlaXRoZXIgYW4gaWQgb3IgdGhlIGVsZW1lbnRcbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSByZXR1cm47XG4gICAgZGV0YWlsID0gY3JlYXRlX2JveCgnZGl2Jywge1xuICAgICAgaWQ6IGl0ZW0sXG4gICAgICBjbGFzczogY3NzLmhpZGVcbiAgICB9LCB3cmFwcGVyKTtcbiAgICBpZiAob3B0aW9ucy53YWl0ZGl2KSB7XG4gICAgICBvcHRpb25zLndhaXRkaXYudGV4dENvbnRlbnQgPSAob3B0aW9ucy53YWl0ZGl2LmRhdGFzZXQud2FpdCkgPyBvcHRpb25zLndhaXRkaXYuZGF0YXNldC53YWl0IDogZGVmYXVsdF9tZXNzYWdlcy53YWl0O1xuICAgICAgZGV0YWlsLmFwcGVuZChvcHRpb25zLndhaXRkaXYpO1xuICAgIH1cbiAgICBjb250ZW50ID0gY3JlYXRlX2JveCgnZGl2Jywge30sIGRldGFpbCk7XG4gICAgLy8gdG9kbyA6IGxpc3RlbmVyIHdpbmRvdyByZXNpemVcbiAgICByZXR1cm4gZGV0YWlsO1xuICB9XG5cbiAgZnVuY3Rpb24gZXhwYW5kRGV0YWlsKGVsLCBodG1sID0gbnVsbCkge1xuICAgIC8vIGlsbHVzaW9uIG9mIHJvdyBleHBhbmRpbmdcblxuICAgIGlmIChjdXJyZW50ICYmIGN1cnJlbnQgIT09IGVsKSBzaHJpbmtEZXRhaWwoY3VycmVudCk7XG4gICAgY3VycmVudCA9IGVsO1xuICAgIGlmIChvcHRpb25zLndhaXRkaXYpIG9wdGlvbnMud2FpdGRpdi5jbGFzc0xpc3QuYWRkKGNzcy5oaWRlKTtcbiAgICBpZiAoaHRtbCAhPT0gbnVsbCkgY29udGVudC5pbm5lckhUTUwgPSBET01QdXJpZnkuc2FuaXRpemUoaHRtbCk7XG4gICAgZWwuYXBwZW5kKGRldGFpbCk7XG4gICAgY29uc3QgcGFkZGluZyA9IDY7XG4gICAgY29uc3QgY2VsbCA9IChvcHRpb25zLmlzdGFibGUpID8gZWwuY2xvc2VzdCgndGQnKSA6IGVsO1xuICAgIGxldCB0ID0gKG9wdGlvbnMuaXN0YWJsZSkgPyBwYXJzZUludCh3cmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJ3RhYmxlJykub2Zmc2V0VG9wKSA6IDA7XG4gICAgdCA9IHQgKyAocGFyc2VJbnQoY2VsbC5vZmZzZXRUb3ApICsgcGFyc2VJbnQoZWwub2Zmc2V0SGVpZ2h0KSArIHBhZGRpbmcpICsgJ3B4JztcbiAgICBjb25zdCBoID0gKHBhcnNlSW50KGNlbGwub2Zmc2V0SGVpZ2h0KSArIHBhcnNlSW50KGRldGFpbC5vZmZzZXRIZWlnaHQpICsgcGFkZGluZykgKyAncHgnO1xuICAgIGNvbnN0IHcgPSAocGFyc2VJbnQod3JhcHBlci5vZmZzZXRXaWR0aCkpICsgJ3B4JztcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgZGV0YWlsLnN0eWxlLm1pbldpZHRoID0gdztcbiAgICAgIGRldGFpbC5zdHlsZS53aWR0aCA9IHc7XG4gICAgICBjZWxsLnN0eWxlLm92ZXJmbG93ID0gJ3Zpc2libGUnO1xuICAgICAgZWwuc3R5bGUub3ZlcmZsb3dYID0gJ3Zpc2libGUnO1xuICAgICAgZGV0YWlsLnN0eWxlLnRvcCA9IHQ7XG4gICAgICBjZWxsLnN0eWxlLm1pbkhlaWdodCA9IGg7XG4gICAgICBjZWxsLnN0eWxlLmhlaWdodCA9IGg7XG4gICAgfSk7XG4gICAgcmV0dXJuIGN1cnJlbnQ7XG4gIH1cblxuICBmdW5jdGlvbiBzaHJpbmtEZXRhaWwoZWwpIHtcbiAgICAvLyBpbGx1c2lvbiBvZiByb3cgc2hyaW5rXG4gICAgY29uc3QgY2VsbCA9IChvcHRpb25zLmlzdGFibGUpID8gZWwuY2xvc2VzdCgndGQnKSA6IGVsO1xuICAgIC8vY2VsbC5zdHlsZS5tYXhIZWlnaHQgPSBjZWxsLmRhdGFzZXQubWF4aDtcbiAgICBjb25zdCBlbGxpcHNpcyA9IGVsLmNsb3Nlc3QoJy5vdmVyZmxvdycpO1xuICAgIGlmIChlbGxpcHNpcykge1xuICAgICAgZWxsaXBzaXMuY2xhc3NMaXN0LnJlbW92ZSgnb3ZlcmZsb3cnKTtcbiAgICAgIGVsbGlwc2lzLnN0eWxlLm1heFdpZHRoID0gZWxsaXBzaXMuZGF0YXNldC5tYXh3O1xuICAgIH1cbiAgICBjZWxsLnN0eWxlLm1pbkhlaWdodCA9ICdub25lJztcbiAgICBjZWxsLnN0eWxlLmhlaWdodCA9ICdhdXRvJztcbiAgICBjZWxsLnN0eWxlLm92ZXJmbG93ID0gZWwuc3R5bGUub3ZlcmZsb3dYID0gZWwucGFyZW50RWxlbWVudC5zdHlsZS5vdmVyZmxvd1ggPSAnaGlkZGVuJztcbiAgICBkZXRhaWwuY2xhc3NMaXN0LmFkZChjc3MuaGlkZSk7XG4gICAgd3JhcHBlci5hcHBlbmQoZGV0YWlsKTtcbiAgICBjdXJyZW50ID0gbnVsbDtcbiAgICByZXR1cm4gY3VycmVudDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFjdGl2ZURldGFpbChhY3RpdiwgY2xlYXIgPSBmYWxzZSkge1xuICAgIGlmIChhY3RpdiA9PT0gdHJ1ZSkge1xuICAgICAgZGV0YWlsLmxhc3RFbGVtZW50Q2hpbGQuaW5uZXJIVE1MID0gYGA7XG4gICAgICBkZXRhaWwuY2xhc3NMaXN0LnJlbW92ZShjc3MuaGlkZSk7XG4gICAgICBpZiAob3B0aW9ucy53YWl0ZGl2KSBvcHRpb25zLndhaXRkaXYuY2xhc3NMaXN0LnJlbW92ZShjc3MuaGlkZSk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgZGV0YWlsLmNsYXNzTGlzdC5hZGQoY3NzLmhpZGUpO1xuICAgICAgaWYgKG9wdGlvbnMud2FpdGRpdikgb3B0aW9ucy53YWl0ZGl2LmNsYXNzTGlzdC5hZGQoY3NzLmhpZGUpO1xuICAgICAgaWYgKGN1cnJlbnQpIHNocmlua0RldGFpbChjdXJyZW50KTtcbiAgICAgIGlmIChjbGVhciA9PT0gdHJ1ZSkgZGV0YWlsLmxhc3RFbGVtZW50Q2hpbGQuaW5uZXJIVE1MID0gYGA7XG4gICAgICBjdXJyZW50ID0gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIGN1cnJlbnQ7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBhcHBseVRvLFxuICAgIGFjdGl2ZURldGFpbCxcbiAgICBleHBhbmREZXRhaWwsXG4gIH1cbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/modules/js-detail.js\n")}}]);
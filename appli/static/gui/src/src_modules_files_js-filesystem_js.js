/*! For license information please see src_modules_files_js-filesystem_js.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["src_modules_files_js-filesystem_js"],{"./src/modules/files/js-filesystem.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsFilesStore: () => (/* binding */ JsFilesStore),\n/* harmony export */   objectEntry: () => (/* binding */ objectEntry)\n/* harmony export */ });\n/* harmony import */ var _modules_utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../modules/utils.js */ \"./src/modules/utils.js\");\n\nconst objectEntry = {\n  UUID: \"\",\n  entry: {},\n  status: 0 | 1 | 2,\n  source: 'local' | 'server' | 'zip'\n}\n\nclass JsFilesStore {\n  name = 'filesstore';\n  store;\n  writestream;\n  _events = {};\n  eventnames = {\n    added: 'item.added',\n    found: 'item.found',\n    notfound: 'item.notfound'\n  }\n\n  constructor(name = null, callback = null, options = {}) {\n\n\n\n    this.name = (name) ? name : this.name;\n    this.init(options);\n\n  }\n\n  async init(options) {\n\n    if (navigator.storage && navigator.storage.estimate) {\n      const quota = await navigator.storage.estimate();\n      // quota.usage -> Number of bytes used.\n      // quota.quota -> Maximum number of bytes available.\n      const percentageUsed = (quota.usage / quota.quota) * 100;\n      console.log(`You've used ${percentageUsed}% of the available storage.`);\n      const remaining = quota.quota - quota.usage;\n      console.log(`You can write up to ${remaining} more bytes.`);\n      console.log('quota', quota)\n    }\n    /*  const type = (options.type) ? options.type : '.zip';\n      const root = await navigator.storage.getDirectory();\n      const opts = {\n        types: [{\n          description: 'Temp file',\n          accept: {\n            'application/zip': ['.zip'],\n          },\n        }, ],\n        create: true\n      };\n      this.store = await root.getFileHandle(this.name + type, opts);\n      this.writestream = await this.store.createWritable({\n        keepExistingData: false\n      });*/\n  }\n\n\n\n  async addItem(item) {\n    return true;\n  }\n\n  async getItem(key) {\n    return true;\n  }\n  async getFile() {\n    return this.store.getFile();\n  }\n  async addItems(items) {\n    if (!Array.isArray(items)) return;\n    items.forEach(async item => {\n      return true;\n    });\n  }\n  async getItems(source = null, keys = null, keysonly = true, objs = null) {\n    if (!Array.isArray(keys)) return;\n\n    if (source === null && keys === null) {\n      return true;\n    } else if (keys !== null) {\n      const items = [];\n      if (source !== null) return items.filter(item => (item.source === source));\n      else return items;\n    } else return [];\n  }\n  async updateItem(uuid, item) {\n    if (!this.getItem(item.uuid)) return false;\n    return await this.addItem(item);\n  }\n\n\n  async closeStream() {\n    //await this.writestream.close();\n    const file = await this.getFile();\n    console.log(file)\n\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbW9kdWxlcy9maWxlcy9qcy1maWxlc3lzdGVtLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUVnQztBQUN6QjtBQUNQO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx3REFBd0Q7Ozs7QUFJeEQ7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGVBQWU7QUFDaEQ7QUFDQSx5Q0FBeUMsV0FBVztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLEVBQUU7QUFDVDs7OztBQUlBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL2ZpbGVzL2pzLWZpbGVzeXN0ZW0uanM/ODViMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBhZGRfY3VzdG9tX2V2ZW50c1xufSBmcm9tICcuLi8uLi9tb2R1bGVzL3V0aWxzLmpzJztcbmV4cG9ydCBjb25zdCBvYmplY3RFbnRyeSA9IHtcbiAgVVVJRDogXCJcIixcbiAgZW50cnk6IHt9LFxuICBzdGF0dXM6IDAgfCAxIHwgMixcbiAgc291cmNlOiAnbG9jYWwnIHwgJ3NlcnZlcicgfCAnemlwJ1xufVxuXG5leHBvcnQgY2xhc3MgSnNGaWxlc1N0b3JlIHtcbiAgbmFtZSA9ICdmaWxlc3N0b3JlJztcbiAgc3RvcmU7XG4gIHdyaXRlc3RyZWFtO1xuICBfZXZlbnRzID0ge307XG4gIGV2ZW50bmFtZXMgPSB7XG4gICAgYWRkZWQ6ICdpdGVtLmFkZGVkJyxcbiAgICBmb3VuZDogJ2l0ZW0uZm91bmQnLFxuICAgIG5vdGZvdW5kOiAnaXRlbS5ub3Rmb3VuZCdcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKG5hbWUgPSBudWxsLCBjYWxsYmFjayA9IG51bGwsIG9wdGlvbnMgPSB7fSkge1xuXG5cblxuICAgIHRoaXMubmFtZSA9IChuYW1lKSA/IG5hbWUgOiB0aGlzLm5hbWU7XG4gICAgdGhpcy5pbml0KG9wdGlvbnMpO1xuXG4gIH1cblxuICBhc3luYyBpbml0KG9wdGlvbnMpIHtcblxuICAgIGlmIChuYXZpZ2F0b3Iuc3RvcmFnZSAmJiBuYXZpZ2F0b3Iuc3RvcmFnZS5lc3RpbWF0ZSkge1xuICAgICAgY29uc3QgcXVvdGEgPSBhd2FpdCBuYXZpZ2F0b3Iuc3RvcmFnZS5lc3RpbWF0ZSgpO1xuICAgICAgLy8gcXVvdGEudXNhZ2UgLT4gTnVtYmVyIG9mIGJ5dGVzIHVzZWQuXG4gICAgICAvLyBxdW90YS5xdW90YSAtPiBNYXhpbXVtIG51bWJlciBvZiBieXRlcyBhdmFpbGFibGUuXG4gICAgICBjb25zdCBwZXJjZW50YWdlVXNlZCA9IChxdW90YS51c2FnZSAvIHF1b3RhLnF1b3RhKSAqIDEwMDtcbiAgICAgIGNvbnNvbGUubG9nKGBZb3UndmUgdXNlZCAke3BlcmNlbnRhZ2VVc2VkfSUgb2YgdGhlIGF2YWlsYWJsZSBzdG9yYWdlLmApO1xuICAgICAgY29uc3QgcmVtYWluaW5nID0gcXVvdGEucXVvdGEgLSBxdW90YS51c2FnZTtcbiAgICAgIGNvbnNvbGUubG9nKGBZb3UgY2FuIHdyaXRlIHVwIHRvICR7cmVtYWluaW5nfSBtb3JlIGJ5dGVzLmApO1xuICAgICAgY29uc29sZS5sb2coJ3F1b3RhJywgcXVvdGEpXG4gICAgfVxuICAgIC8qICBjb25zdCB0eXBlID0gKG9wdGlvbnMudHlwZSkgPyBvcHRpb25zLnR5cGUgOiAnLnppcCc7XG4gICAgICBjb25zdCByb290ID0gYXdhaXQgbmF2aWdhdG9yLnN0b3JhZ2UuZ2V0RGlyZWN0b3J5KCk7XG4gICAgICBjb25zdCBvcHRzID0ge1xuICAgICAgICB0eXBlczogW3tcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1RlbXAgZmlsZScsXG4gICAgICAgICAgYWNjZXB0OiB7XG4gICAgICAgICAgICAnYXBwbGljYXRpb24vemlwJzogWycuemlwJ10sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSwgXSxcbiAgICAgICAgY3JlYXRlOiB0cnVlXG4gICAgICB9O1xuICAgICAgdGhpcy5zdG9yZSA9IGF3YWl0IHJvb3QuZ2V0RmlsZUhhbmRsZSh0aGlzLm5hbWUgKyB0eXBlLCBvcHRzKTtcbiAgICAgIHRoaXMud3JpdGVzdHJlYW0gPSBhd2FpdCB0aGlzLnN0b3JlLmNyZWF0ZVdyaXRhYmxlKHtcbiAgICAgICAga2VlcEV4aXN0aW5nRGF0YTogZmFsc2VcbiAgICAgIH0pOyovXG4gIH1cblxuXG5cbiAgYXN5bmMgYWRkSXRlbShpdGVtKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBhc3luYyBnZXRJdGVtKGtleSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGFzeW5jIGdldEZpbGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmUuZ2V0RmlsZSgpO1xuICB9XG4gIGFzeW5jIGFkZEl0ZW1zKGl0ZW1zKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGl0ZW1zKSkgcmV0dXJuO1xuICAgIGl0ZW1zLmZvckVhY2goYXN5bmMgaXRlbSA9PiB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcbiAgfVxuICBhc3luYyBnZXRJdGVtcyhzb3VyY2UgPSBudWxsLCBrZXlzID0gbnVsbCwga2V5c29ubHkgPSB0cnVlLCBvYmpzID0gbnVsbCkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShrZXlzKSkgcmV0dXJuO1xuXG4gICAgaWYgKHNvdXJjZSA9PT0gbnVsbCAmJiBrZXlzID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKGtleXMgIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IGl0ZW1zID0gW107XG4gICAgICBpZiAoc291cmNlICE9PSBudWxsKSByZXR1cm4gaXRlbXMuZmlsdGVyKGl0ZW0gPT4gKGl0ZW0uc291cmNlID09PSBzb3VyY2UpKTtcbiAgICAgIGVsc2UgcmV0dXJuIGl0ZW1zO1xuICAgIH0gZWxzZSByZXR1cm4gW107XG4gIH1cbiAgYXN5bmMgdXBkYXRlSXRlbSh1dWlkLCBpdGVtKSB7XG4gICAgaWYgKCF0aGlzLmdldEl0ZW0oaXRlbS51dWlkKSkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmFkZEl0ZW0oaXRlbSk7XG4gIH1cblxuXG4gIGFzeW5jIGNsb3NlU3RyZWFtKCkge1xuICAgIC8vYXdhaXQgdGhpcy53cml0ZXN0cmVhbS5jbG9zZSgpO1xuICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0aGlzLmdldEZpbGUoKTtcbiAgICBjb25zb2xlLmxvZyhmaWxlKVxuXG4gIH1cbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/modules/files/js-filesystem.js\n")}}]);
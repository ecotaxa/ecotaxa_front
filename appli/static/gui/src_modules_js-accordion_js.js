/*! For license information please see src_modules_js-accordion_js.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["src_modules_js-accordion_js"],{"./src/modules/js-accordion.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsAccordion: () => (/* binding */ JsAccordion)\n/* harmony export */ });\n//from css tricks\n// used in tables about project stats details\n// used in tables imports when cells contains lots of data\n// apply mostly to details tags\nclass JsAccordion {\n  // animation and specific display on accordions list / details tag open \n  constructor(el, callbackopen = null, callbackclose = null, content = null, options = {}, summary = null) {\n    // Store the <details> element\n    this.el = el;\n    this.summary = (summary) ? ((summary instanceof HTMLElement) ? summary : el.querySelector(summary)) : ((el.querySelector('summary')) ? el.querySelector('summary') : el);\n    if (!this.summary) return;\n    this.content = (content) ? ((content instanceof HTMLElement) ? content : el.querySelector(content)) : el.nextElementSibling;\n    if (!this.content) return;\n    const defaultOptions = {\n      shrink: {\n        opacity: [100, 0],\n        scaleY: [1, 0]\n      },\n      expand: {\n        opacity: [0, 100],\n        scaleY: [0, 1]\n      }\n    }\n    this.options = Object.assign(defaultOptions, options);\n    Object.freeze(this.options);\n    this.animation = null;\n    this.isClosing = false;\n    this.isExpanding = false;\n    this.summary.addEventListener('click', (e) => this.onClick(e));\n    this.callbackopen = callbackopen;\n    this.callbackclose = callbackclose;\n  }\n  onClick(e) {\n    e.preventDefault();\n    // Check if the element is being closed or is already closed\n    if (this.isClosing || !this.el.open) {\n      // for fetching data or other op.\n      if (this.callbackopen) {\n        this.callbackopen(this.el, () => {\n          this.open();\n        });\n      } else this.open();\n      // Check if the element is being openned or is already open\n    } else if (this.isExpanding || this.el.open) {\n      this.shrink();\n\n    }\n\n  }\n  // close the content with an animation\n  shrink() {\n    this.isClosing = true;\n    if (this.animation) this.animation.cancel();\n    // Start a WAAPI animation\n    this.animation = this.content.animate(this.options.shrink, {\n      duration: 400,\n      easing: 'ease-out'\n    });\n    this.animation.onfinish = () => this.onAnimationFinish(false);\n    this.animation.oncancel = () => this.isClosing = false;\n    if (this.callbackclose) this.callbackclose(this.el);\n  }\n\n  open() {\n    this.el.open = true;\n    window.requestAnimationFrame(() => this.expand());\n  }\n  expand() {\n    this.isExpanding = true;\n    if (this.animation) this.animation.cancel();\n    // Start a WAAPI animation\n    this.animation = this.content.animate(this.options.expand, {\n      duration: 400,\n      easing: 'ease-out'\n    });\n    this.animation.onfinish = () => this.onAnimationFinish(true);\n    this.animation.oncancel = () => this.isExpanding = false;\n  }\n\n  onAnimationFinish(open) {\n    this.el.open = open;\n    this.animation = null;\n    this.isClosing = false;\n    this.isExpanding = false;\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbW9kdWxlcy9qcy1hY2NvcmRpb24uanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLHlGQUF5RjtBQUN6RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxRQUFRO0FBQ1I7QUFDQSxNQUFNO0FBQ047O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvanMtYWNjb3JkaW9uLmpzPzhhMGEiXSwic291cmNlc0NvbnRlbnQiOlsiLy9mcm9tIGNzcyB0cmlja3Ncbi8vIHVzZWQgaW4gdGFibGVzIGFib3V0IHByb2plY3Qgc3RhdHMgZGV0YWlsc1xuLy8gdXNlZCBpbiB0YWJsZXMgaW1wb3J0cyB3aGVuIGNlbGxzIGNvbnRhaW5zIGxvdHMgb2YgZGF0YVxuLy8gYXBwbHkgbW9zdGx5IHRvIGRldGFpbHMgdGFnc1xuZXhwb3J0IGNsYXNzIEpzQWNjb3JkaW9uIHtcbiAgLy8gYW5pbWF0aW9uIGFuZCBzcGVjaWZpYyBkaXNwbGF5IG9uIGFjY29yZGlvbnMgbGlzdCAvIGRldGFpbHMgdGFnIG9wZW4gXG4gIGNvbnN0cnVjdG9yKGVsLCBjYWxsYmFja29wZW4gPSBudWxsLCBjYWxsYmFja2Nsb3NlID0gbnVsbCwgY29udGVudCA9IG51bGwsIG9wdGlvbnMgPSB7fSwgc3VtbWFyeSA9IG51bGwpIHtcbiAgICAvLyBTdG9yZSB0aGUgPGRldGFpbHM+IGVsZW1lbnRcbiAgICB0aGlzLmVsID0gZWw7XG4gICAgdGhpcy5zdW1tYXJ5ID0gKHN1bW1hcnkpID8gKChzdW1tYXJ5IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpID8gc3VtbWFyeSA6IGVsLnF1ZXJ5U2VsZWN0b3Ioc3VtbWFyeSkpIDogKChlbC5xdWVyeVNlbGVjdG9yKCdzdW1tYXJ5JykpID8gZWwucXVlcnlTZWxlY3Rvcignc3VtbWFyeScpIDogZWwpO1xuICAgIGlmICghdGhpcy5zdW1tYXJ5KSByZXR1cm47XG4gICAgdGhpcy5jb250ZW50ID0gKGNvbnRlbnQpID8gKChjb250ZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpID8gY29udGVudCA6IGVsLnF1ZXJ5U2VsZWN0b3IoY29udGVudCkpIDogZWwubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgIGlmICghdGhpcy5jb250ZW50KSByZXR1cm47XG4gICAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgICBzaHJpbms6IHtcbiAgICAgICAgb3BhY2l0eTogWzEwMCwgMF0sXG4gICAgICAgIHNjYWxlWTogWzEsIDBdXG4gICAgICB9LFxuICAgICAgZXhwYW5kOiB7XG4gICAgICAgIG9wYWNpdHk6IFswLCAxMDBdLFxuICAgICAgICBzY2FsZVk6IFswLCAxXVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcbiAgICBPYmplY3QuZnJlZXplKHRoaXMub3B0aW9ucyk7XG4gICAgdGhpcy5hbmltYXRpb24gPSBudWxsO1xuICAgIHRoaXMuaXNDbG9zaW5nID0gZmFsc2U7XG4gICAgdGhpcy5pc0V4cGFuZGluZyA9IGZhbHNlO1xuICAgIHRoaXMuc3VtbWFyeS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB0aGlzLm9uQ2xpY2soZSkpO1xuICAgIHRoaXMuY2FsbGJhY2tvcGVuID0gY2FsbGJhY2tvcGVuO1xuICAgIHRoaXMuY2FsbGJhY2tjbG9zZSA9IGNhbGxiYWNrY2xvc2U7XG4gIH1cbiAgb25DbGljayhlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIC8vIENoZWNrIGlmIHRoZSBlbGVtZW50IGlzIGJlaW5nIGNsb3NlZCBvciBpcyBhbHJlYWR5IGNsb3NlZFxuICAgIGlmICh0aGlzLmlzQ2xvc2luZyB8fCAhdGhpcy5lbC5vcGVuKSB7XG4gICAgICAvLyBmb3IgZmV0Y2hpbmcgZGF0YSBvciBvdGhlciBvcC5cbiAgICAgIGlmICh0aGlzLmNhbGxiYWNrb3Blbikge1xuICAgICAgICB0aGlzLmNhbGxiYWNrb3Blbih0aGlzLmVsLCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHRoaXMub3BlbigpO1xuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGVsZW1lbnQgaXMgYmVpbmcgb3Blbm5lZCBvciBpcyBhbHJlYWR5IG9wZW5cbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNFeHBhbmRpbmcgfHwgdGhpcy5lbC5vcGVuKSB7XG4gICAgICB0aGlzLnNocmluaygpO1xuXG4gICAgfVxuXG4gIH1cbiAgLy8gY2xvc2UgdGhlIGNvbnRlbnQgd2l0aCBhbiBhbmltYXRpb25cbiAgc2hyaW5rKCkge1xuICAgIHRoaXMuaXNDbG9zaW5nID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5hbmltYXRpb24pIHRoaXMuYW5pbWF0aW9uLmNhbmNlbCgpO1xuICAgIC8vIFN0YXJ0IGEgV0FBUEkgYW5pbWF0aW9uXG4gICAgdGhpcy5hbmltYXRpb24gPSB0aGlzLmNvbnRlbnQuYW5pbWF0ZSh0aGlzLm9wdGlvbnMuc2hyaW5rLCB7XG4gICAgICBkdXJhdGlvbjogNDAwLFxuICAgICAgZWFzaW5nOiAnZWFzZS1vdXQnXG4gICAgfSk7XG4gICAgdGhpcy5hbmltYXRpb24ub25maW5pc2ggPSAoKSA9PiB0aGlzLm9uQW5pbWF0aW9uRmluaXNoKGZhbHNlKTtcbiAgICB0aGlzLmFuaW1hdGlvbi5vbmNhbmNlbCA9ICgpID0+IHRoaXMuaXNDbG9zaW5nID0gZmFsc2U7XG4gICAgaWYgKHRoaXMuY2FsbGJhY2tjbG9zZSkgdGhpcy5jYWxsYmFja2Nsb3NlKHRoaXMuZWwpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLmVsLm9wZW4gPSB0cnVlO1xuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5leHBhbmQoKSk7XG4gIH1cbiAgZXhwYW5kKCkge1xuICAgIHRoaXMuaXNFeHBhbmRpbmcgPSB0cnVlO1xuICAgIGlmICh0aGlzLmFuaW1hdGlvbikgdGhpcy5hbmltYXRpb24uY2FuY2VsKCk7XG4gICAgLy8gU3RhcnQgYSBXQUFQSSBhbmltYXRpb25cbiAgICB0aGlzLmFuaW1hdGlvbiA9IHRoaXMuY29udGVudC5hbmltYXRlKHRoaXMub3B0aW9ucy5leHBhbmQsIHtcbiAgICAgIGR1cmF0aW9uOiA0MDAsXG4gICAgICBlYXNpbmc6ICdlYXNlLW91dCdcbiAgICB9KTtcbiAgICB0aGlzLmFuaW1hdGlvbi5vbmZpbmlzaCA9ICgpID0+IHRoaXMub25BbmltYXRpb25GaW5pc2godHJ1ZSk7XG4gICAgdGhpcy5hbmltYXRpb24ub25jYW5jZWwgPSAoKSA9PiB0aGlzLmlzRXhwYW5kaW5nID0gZmFsc2U7XG4gIH1cblxuICBvbkFuaW1hdGlvbkZpbmlzaChvcGVuKSB7XG4gICAgdGhpcy5lbC5vcGVuID0gb3BlbjtcbiAgICB0aGlzLmFuaW1hdGlvbiA9IG51bGw7XG4gICAgdGhpcy5pc0Nsb3NpbmcgPSBmYWxzZTtcbiAgICB0aGlzLmlzRXhwYW5kaW5nID0gZmFsc2U7XG4gIH1cbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/modules/js-accordion.js\n")}}]);
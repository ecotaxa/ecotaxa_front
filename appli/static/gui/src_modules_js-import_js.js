/*! For license information please see src_modules_js-import_js.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["src_modules_js-import_js"],{"./src/modules/js-import.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsImport: () => (/* binding */ JsImport)\n/* harmony export */ });\n/* harmony import */ var dompurify__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dompurify */ \"./node_modules/dompurify/dist/purify.js\");\n/* harmony import */ var dompurify__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dompurify__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _modules_js_my_files_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../modules/js-my-files.js */ \"./src/modules/js-my-files.js\");\n/* harmony import */ var _modules_form_submit_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../modules/form-submit.js */ \"./src/modules/form-submit.js\");\n/* harmony import */ var _modules_utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../modules/utils.js */ \"./src/modules/utils.js\");\n/* harmony import */ var _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../modules/modules-config.js */ \"./src/modules/modules-config.js\");\n\n\n\n\n\n\nclass JsImport {\n  typeimport;\n  myFiles;\n  constructor(container, options = {}) {\n    container = (container instanceof HTMLElement) ? container : document.querySelector(container);\n    if (!container) return;\n    this.container = container;\n    const defaultOptions = {\n\n      url: \"http://193.49.112.116:5001/gui/job/my_files/\",\n      selector: {\n        displayselection: 'dirlist',\n        displayresult: 'results',\n        typeimport: \"typeimport\",\n        importzone: \"file_to_load\",\n\n      }\n    };\n\n    this.options = Object.assign(defaultOptions, options);\n\n    this.init();\n  }\n\n  init() {\n    // init steps to display import sequence\n    this.container.querySelectorAll('input[name=\"' + this.options.selector.typeimport + '\"]').forEach(typeimport => {\n      typeimport.addEventListener('change', (e) => {\n        if (e.currentTarget.checked) {\n          console.log(e.currentTarget)\n          this.typeimport = e.currentTarget.value;\n          this.showSelection(true);\n        }\n      })\n    });\n    this.showSelection();\n  }\n  showSelection(refresh = false) {\n    const apply_filters = () => {\n      let filters = this.typeimport.split('-');\n      filters = filters.map(filter => {\n        return new Set([...(_modules_modules_config_js__WEBPACK_IMPORTED_MODULE_4__.filter_files[filter] ? _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_4__.filter_files[filter] : [])]);\n      });\n      this.myFiles.container.querySelectorAll('[data-ftype]').forEach(entry => {\n        if (filters.has(entry.dataset.ftype)) entry.classList.remove('disabled');\n        else entry.classList.add('disabled');\n      });\n    }\n    const displayselection = document.getElementById(this.options.selector.displayselection);\n    const displayresult = document.getElementById(this.options.selector.displayresult);\n    if (!displayselection || !displayresult) return;\n    if (!this.myFiles) {\n      this.myFiles = new _modules_js_my_files_js__WEBPACK_IMPORTED_MODULE_1__.JsMyFiles(displayselection, {\n        enableupload: true,\n        callback: () => {\n          this.activateDragDrop();\n        },\n        upload: {\n          label: (displayselection.dataset.uploadlabel) ? (displayselection.dataset.uploadlabel) : 'upload',\n          callback: (response) => {\n            console.log('response', response)\n            if (response.err) {\n              console.log('err', response.err);\n              return\n            }\n            this.addImportPath(response.response);\n            this.showSubmit();\n          }\n        }\n      });\n    }\n    if (!displayselection.dataset.loaded) {\n\n      this.myFiles.listDir('', displayselection, 0);\n\n      displayselection.dataset.loaded = true;\n\n    }\n    if (refresh === true) apply_filters();\n\n  }\n  addImportPath(value) {\n    document.getElementById(this.options.selector.importzone).value = value;\n    const displayresult = document.getElementById(this.options.selector.displayresult);\n    if (displayresult) displayresult.innerHTML = `<li>${value.split('/').pop()}</li>`;\n    const options = this.container.querySelector('#' + this.options.selector.importoptions);\n  }\n  activateDragDrop() {\n    const displayresult = document.getElementById(this.options.selector.displayresult);\n\n    const dragover_handler = (e) => {\n      e.preventDefault();\n      e.target.classList.add('active');\n      e.dataTransfer.dropEffect = \"copy\";\n    }\n\n    const drop_handler = (e) => {\n      e.target.classList.remove('active');\n      e.preventDefault();\n      const data = e.dataTransfer.getData(\"text/html\");\n      e.target.insertAdjacentHTML('beforeend', data);\n\n    }\n    displayresult.addEventListener('dragover', dragover_handler);\n    displayresult.addEventListener('drop', drop_handler);\n    const dragstart_handler = (e) => {\n      e.dataTransfer.dropEffect = \"copy\";\n      e.dataTransfer.setData(\"text/html\", e.target.outerHTML);\n    }\n    this.myFiles.container.querySelectorAll('[draggable]').forEach(draggable => {\n      draggable.addEventListener('dragstart', dragstart_handler);\n    });\n  }\n  showSubmit(show = true) {\n    const submit = this.container.querySelector('[type=\"submit\"]');\n    console.log('sub', submit)\n    if (show) {\n      submit.classList.remove('hide');\n      submit.disabled = false;\n    } else submit.disabled = true;\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbW9kdWxlcy9qcy1pbXBvcnQuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFrQztBQUdDO0FBR0E7QUFHTjtBQUlTOztBQUUvQjtBQUNQO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixvRUFBWSxXQUFXLG9FQUFZO0FBQy9ELE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qiw4REFBUztBQUNsQztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCx1QkFBdUI7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvanMtaW1wb3J0LmpzPzYwMjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IERPTVB1cmlmeSBmcm9tICdkb21wdXJpZnknO1xuaW1wb3J0IHtcbiAgSnNNeUZpbGVzXG59IGZyb20gJy4uL21vZHVsZXMvanMtbXktZmlsZXMuanMnO1xuaW1wb3J0IHtcbiAgRm9ybVN1Ym1pdFxufSBmcm9tICcuLi9tb2R1bGVzL2Zvcm0tc3VibWl0LmpzJztcbmltcG9ydCB7XG4gIGZldGNoU2V0dGluZ3MsXG59IGZyb20gJy4uL21vZHVsZXMvdXRpbHMuanMnO1xuaW1wb3J0IHtcbiAgY3NzLFxuICBmaWx0ZXJfZmlsZXNcbn0gZnJvbSAnLi4vbW9kdWxlcy9tb2R1bGVzLWNvbmZpZy5qcyc7XG5cbmV4cG9ydCBjbGFzcyBKc0ltcG9ydCB7XG4gIHR5cGVpbXBvcnQ7XG4gIG15RmlsZXM7XG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lciwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29udGFpbmVyID0gKGNvbnRhaW5lciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSA/IGNvbnRhaW5lciA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyKTtcbiAgICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuO1xuICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIGNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xuXG4gICAgICB1cmw6IFwiaHR0cDovLzE5My40OS4xMTIuMTE2OjUwMDEvZ3VpL2pvYi9teV9maWxlcy9cIixcbiAgICAgIHNlbGVjdG9yOiB7XG4gICAgICAgIGRpc3BsYXlzZWxlY3Rpb246ICdkaXJsaXN0JyxcbiAgICAgICAgZGlzcGxheXJlc3VsdDogJ3Jlc3VsdHMnLFxuICAgICAgICB0eXBlaW1wb3J0OiBcInR5cGVpbXBvcnRcIixcbiAgICAgICAgaW1wb3J0em9uZTogXCJmaWxlX3RvX2xvYWRcIixcblxuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcblxuICAgIHRoaXMuaW5pdCgpO1xuICB9XG5cbiAgaW5pdCgpIHtcbiAgICAvLyBpbml0IHN0ZXBzIHRvIGRpc3BsYXkgaW1wb3J0IHNlcXVlbmNlXG4gICAgdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbbmFtZT1cIicgKyB0aGlzLm9wdGlvbnMuc2VsZWN0b3IudHlwZWltcG9ydCArICdcIl0nKS5mb3JFYWNoKHR5cGVpbXBvcnQgPT4ge1xuICAgICAgdHlwZWltcG9ydC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgICBpZiAoZS5jdXJyZW50VGFyZ2V0LmNoZWNrZWQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlLmN1cnJlbnRUYXJnZXQpXG4gICAgICAgICAgdGhpcy50eXBlaW1wb3J0ID0gZS5jdXJyZW50VGFyZ2V0LnZhbHVlO1xuICAgICAgICAgIHRoaXMuc2hvd1NlbGVjdGlvbih0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KTtcbiAgICB0aGlzLnNob3dTZWxlY3Rpb24oKTtcbiAgfVxuICBzaG93U2VsZWN0aW9uKHJlZnJlc2ggPSBmYWxzZSkge1xuICAgIGNvbnN0IGFwcGx5X2ZpbHRlcnMgPSAoKSA9PiB7XG4gICAgICBsZXQgZmlsdGVycyA9IHRoaXMudHlwZWltcG9ydC5zcGxpdCgnLScpO1xuICAgICAgZmlsdGVycyA9IGZpbHRlcnMubWFwKGZpbHRlciA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgU2V0KFsuLi4oZmlsdGVyX2ZpbGVzW2ZpbHRlcl0gPyBmaWx0ZXJfZmlsZXNbZmlsdGVyXSA6IFtdKV0pO1xuICAgICAgfSk7XG4gICAgICB0aGlzLm15RmlsZXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWZ0eXBlXScpLmZvckVhY2goZW50cnkgPT4ge1xuICAgICAgICBpZiAoZmlsdGVycy5oYXMoZW50cnkuZGF0YXNldC5mdHlwZSkpIGVudHJ5LmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XG4gICAgICAgIGVsc2UgZW50cnkuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBkaXNwbGF5c2VsZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5vcHRpb25zLnNlbGVjdG9yLmRpc3BsYXlzZWxlY3Rpb24pO1xuICAgIGNvbnN0IGRpc3BsYXlyZXN1bHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLm9wdGlvbnMuc2VsZWN0b3IuZGlzcGxheXJlc3VsdCk7XG4gICAgaWYgKCFkaXNwbGF5c2VsZWN0aW9uIHx8ICFkaXNwbGF5cmVzdWx0KSByZXR1cm47XG4gICAgaWYgKCF0aGlzLm15RmlsZXMpIHtcbiAgICAgIHRoaXMubXlGaWxlcyA9IG5ldyBKc015RmlsZXMoZGlzcGxheXNlbGVjdGlvbiwge1xuICAgICAgICBlbmFibGV1cGxvYWQ6IHRydWUsXG4gICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5hY3RpdmF0ZURyYWdEcm9wKCk7XG4gICAgICAgIH0sXG4gICAgICAgIHVwbG9hZDoge1xuICAgICAgICAgIGxhYmVsOiAoZGlzcGxheXNlbGVjdGlvbi5kYXRhc2V0LnVwbG9hZGxhYmVsKSA/IChkaXNwbGF5c2VsZWN0aW9uLmRhdGFzZXQudXBsb2FkbGFiZWwpIDogJ3VwbG9hZCcsXG4gICAgICAgICAgY2FsbGJhY2s6IChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3Jlc3BvbnNlJywgcmVzcG9uc2UpXG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnInLCByZXNwb25zZS5lcnIpO1xuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYWRkSW1wb3J0UGF0aChyZXNwb25zZS5yZXNwb25zZSk7XG4gICAgICAgICAgICB0aGlzLnNob3dTdWJtaXQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoIWRpc3BsYXlzZWxlY3Rpb24uZGF0YXNldC5sb2FkZWQpIHtcblxuICAgICAgdGhpcy5teUZpbGVzLmxpc3REaXIoJycsIGRpc3BsYXlzZWxlY3Rpb24sIDApO1xuXG4gICAgICBkaXNwbGF5c2VsZWN0aW9uLmRhdGFzZXQubG9hZGVkID0gdHJ1ZTtcblxuICAgIH1cbiAgICBpZiAocmVmcmVzaCA9PT0gdHJ1ZSkgYXBwbHlfZmlsdGVycygpO1xuXG4gIH1cbiAgYWRkSW1wb3J0UGF0aCh2YWx1ZSkge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMub3B0aW9ucy5zZWxlY3Rvci5pbXBvcnR6b25lKS52YWx1ZSA9IHZhbHVlO1xuICAgIGNvbnN0IGRpc3BsYXlyZXN1bHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLm9wdGlvbnMuc2VsZWN0b3IuZGlzcGxheXJlc3VsdCk7XG4gICAgaWYgKGRpc3BsYXlyZXN1bHQpIGRpc3BsYXlyZXN1bHQuaW5uZXJIVE1MID0gYDxsaT4ke3ZhbHVlLnNwbGl0KCcvJykucG9wKCl9PC9saT5gO1xuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjJyArIHRoaXMub3B0aW9ucy5zZWxlY3Rvci5pbXBvcnRvcHRpb25zKTtcbiAgfVxuICBhY3RpdmF0ZURyYWdEcm9wKCkge1xuICAgIGNvbnN0IGRpc3BsYXlyZXN1bHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLm9wdGlvbnMuc2VsZWN0b3IuZGlzcGxheXJlc3VsdCk7XG5cbiAgICBjb25zdCBkcmFnb3Zlcl9oYW5kbGVyID0gKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9IFwiY29weVwiO1xuICAgIH1cblxuICAgIGNvbnN0IGRyb3BfaGFuZGxlciA9IChlKSA9PiB7XG4gICAgICBlLnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBlLmRhdGFUcmFuc2Zlci5nZXREYXRhKFwidGV4dC9odG1sXCIpO1xuICAgICAgZS50YXJnZXQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBkYXRhKTtcblxuICAgIH1cbiAgICBkaXNwbGF5cmVzdWx0LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgZHJhZ292ZXJfaGFuZGxlcik7XG4gICAgZGlzcGxheXJlc3VsdC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgZHJvcF9oYW5kbGVyKTtcbiAgICBjb25zdCBkcmFnc3RhcnRfaGFuZGxlciA9IChlKSA9PiB7XG4gICAgICBlLmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gXCJjb3B5XCI7XG4gICAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKFwidGV4dC9odG1sXCIsIGUudGFyZ2V0Lm91dGVySFRNTCk7XG4gICAgfVxuICAgIHRoaXMubXlGaWxlcy5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnW2RyYWdnYWJsZV0nKS5mb3JFYWNoKGRyYWdnYWJsZSA9PiB7XG4gICAgICBkcmFnZ2FibGUuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgZHJhZ3N0YXJ0X2hhbmRsZXIpO1xuICAgIH0pO1xuICB9XG4gIHNob3dTdWJtaXQoc2hvdyA9IHRydWUpIHtcbiAgICBjb25zdCBzdWJtaXQgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbdHlwZT1cInN1Ym1pdFwiXScpO1xuICAgIGNvbnNvbGUubG9nKCdzdWInLCBzdWJtaXQpXG4gICAgaWYgKHNob3cpIHtcbiAgICAgIHN1Ym1pdC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7XG4gICAgICBzdWJtaXQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9IGVsc2Ugc3VibWl0LmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/modules/js-import.js\n")},"./src/modules/js-my-files.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsMyFiles: () => (/* binding */ JsMyFiles)\n/* harmony export */ });\n/* harmony import */ var dompurify__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dompurify */ \"./node_modules/dompurify/dist/purify.js\");\n/* harmony import */ var dompurify__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dompurify__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _modules_js_upload_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../modules/js-upload.js */ \"./src/modules/js-upload.js\");\n/* harmony import */ var _modules_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../modules/utils.js */ \"./src/modules/utils.js\");\n/* harmony import */ var _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../modules/modules-config.js */ \"./src/modules/modules-config.js\");\n\n\n\n\n\nclass JsMyFiles {\n  jsUpload = null;\n  constructor(container, options = {\n    enableupload: true\n  }) {\n    container = (container instanceof HTMLElement) ? container : document.querySelector(container);\n    if (!container) return;\n    this.container = container;\n    const defaultOptions = {\n\n      url: \"/gui/job/my_files\",\n      displaylist: 'dirlist',\n      upload: {\n        label: 'upload'\n      },\n      selector: {\n        doupload: '.target-upload',\n\n      },\n      css: {\n        dropzone: 'dropzone'\n      }\n    };\n    this.options = Object.assign(defaultOptions, options);\n    if (this.options.enableupload === true) this.addUploadDialog(this.container, this.options.upload.callback);\n\n  }\n\n\n  listDir(subdir = '', parent, tag, indent) {\n    parent = parent ? parent : this.options.displaylist;\n    tag = (tag) ? ((tag === 'select') ? 'optiongroup' : tag) : this.options.enableupload ? 'select' : 'ul';\n    const subtag = (tag === 'ul') ? 'li' : 'option';\n    indent = indent ? indent + 2 : 0;\n    fetch(this.options.url + '/' + subdir, (0,_modules_utils_js__WEBPACK_IMPORTED_MODULE_2__.fetchSettings)()).then(response => response.json()).then(json => {\n      //    json = DOMPurify.sanitize(json);\n\n      if (json.entries && json.entries.length) {\n        if (parent.dataset.label) parent.insertAdjacentHTML('afterbegin', `<label>${parent.dataset.label}</label>`);\n        let html = [`<${tag} class=\"entries ml-${indent}\">`];\n        const list_entries = (entries, html) => {\n          entries.forEach(entry => {\n            const ext = entry.name.split('.').pop();\n            html.push(`<${subtag} ${(entry.type==='D')?`draggable=\"true\"`:``} data-name=\"${entry.name}\"><span class=\"entry${entry.type}\"><i class=\"icon icon-${((entry.type === \"D\") ? 'folder-sm' : ((_modules_modules_config_js__WEBPACK_IMPORTED_MODULE_3__.filter_files.tsv.split(',').indexOf(ext)>=0)?'document-sm':'photo-sm'))} align-text-bottom mb-0.5 mr-0.5\"></i>${entry.name}</span>`);\n            //upload in subdir - later- if (entry.type === \"D\" && this.options.enableupload === true) html.push(`<a class=\"${this.options.selector.doupload.slice(1)}\" parent=\"${subdir}\"><i class=\"icon icon-plus-sm\" align-text-bottom  mb-0.5 ml-0.5 title=\"${this.container.dataset.label}\"></i></a>`);\n            html.push(`</${subtag}>`);\n          });\n\n        }\n        list_entries(json.entries, html);\n        html.push(`</${tag}>`);\n        parent.insertAdjacentHTML('beforeend', html.join(``));\n\n\n        parent.querySelectorAll('.entryD').forEach(dir => dir.addEventListener('click', (e) => {\n          e.stopImmediatePropagation();\n          const dir = e.currentTarget.parentElement;\n          dir.classList.toggle('on');\n          const ico = e.currentTarget.querySelector('i.icon');\n          if (ico) {\n            ico.classList.toggle('icon-folder-sm');\n            ico.classList.toggle('icon-folder-open-sm');\n          }\n          console.log('dir', dir)\n          if (dir.classList.contains('on')) {\n            if (!dir.dataset.load) {\n              this.listDir(subdir + '/' + dir.dataset.name, dir, tag, indent);\n              dir.dataset.load = true;\n            }\n          }\n          if (dir.lastElementChild) dir.lastElementChild.classList.toggle('hidden');\n\n        }));\n      }\n      if (this.options.callback) this.options.callback();\n    })\n  }\n  addUploadDialog(item, callback) {\n    item = (item) ? item : this.container;\n    callback = (callback) ? callback : null;\n    if (!this.jsUpload) this.jsUpload = new _modules_js_upload_js__WEBPACK_IMPORTED_MODULE_1__.JsUpload(this.container, callback);\n    this.jsUpload.attachDropzone(item);\n    /*  item.querySelectorAll(this.options.selector.doupload).forEach(target => {\n          target.addEventListener('click', (e) => {\n            e.preventDefault();\n            const dropzone = target.querySelector(this.jsUpload.options.selector.droptarget);\n            if (!dropzone || this.jsUpload.targetdir !== target.parentElement.dataset.name) this.jsUpload.attachDropzone(target);\n            //else this.jsUpload.detachDropzone();\n\n          });\n        });*/\n\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbW9kdWxlcy9qcy1teS1maWxlcy5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBa0M7QUFHRDtBQUdKO0FBSVM7O0FBRS9CO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUEsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxnRUFBYTtBQUN4RDs7QUFFQTtBQUNBLG9GQUFvRixxQkFBcUI7QUFDekcsd0JBQXdCLEtBQUssb0JBQW9CLE9BQU87QUFDeEQ7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLFFBQVEsRUFBRSwwQ0FBMEMsYUFBYSxXQUFXLHNCQUFzQixXQUFXLHdCQUF3Qix3Q0FBd0MsOEVBQXNCLG1EQUFtRCx1Q0FBdUMsV0FBVztBQUNsVSw2SEFBNkgsd0NBQXdDLFlBQVksT0FBTyx5RUFBeUUsNkJBQTZCO0FBQzlSLDJCQUEyQixPQUFPO0FBQ2xDLFdBQVc7O0FBRVg7QUFDQTtBQUNBLHVCQUF1QixJQUFJO0FBQzNCOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLDJEQUFRO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFdBQVc7QUFDWCxTQUFTLEVBQUU7O0FBRVg7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL2pzLW15LWZpbGVzLmpzPzEzYjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IERPTVB1cmlmeSBmcm9tICdkb21wdXJpZnknO1xuaW1wb3J0IHtcbiAgSnNVcGxvYWRcbn0gZnJvbSAnLi4vbW9kdWxlcy9qcy11cGxvYWQuanMnO1xuaW1wb3J0IHtcbiAgZmV0Y2hTZXR0aW5ncyxcbn0gZnJvbSAnLi4vbW9kdWxlcy91dGlscy5qcyc7XG5pbXBvcnQge1xuICBjc3MsXG4gIGZpbHRlcl9maWxlc1xufSBmcm9tICcuLi9tb2R1bGVzL21vZHVsZXMtY29uZmlnLmpzJztcblxuZXhwb3J0IGNsYXNzIEpzTXlGaWxlcyB7XG4gIGpzVXBsb2FkID0gbnVsbDtcbiAgY29uc3RydWN0b3IoY29udGFpbmVyLCBvcHRpb25zID0ge1xuICAgIGVuYWJsZXVwbG9hZDogdHJ1ZVxuICB9KSB7XG4gICAgY29udGFpbmVyID0gKGNvbnRhaW5lciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSA/IGNvbnRhaW5lciA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyKTtcbiAgICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuO1xuICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIGNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xuXG4gICAgICB1cmw6IFwiL2d1aS9qb2IvbXlfZmlsZXNcIixcbiAgICAgIGRpc3BsYXlsaXN0OiAnZGlybGlzdCcsXG4gICAgICB1cGxvYWQ6IHtcbiAgICAgICAgbGFiZWw6ICd1cGxvYWQnXG4gICAgICB9LFxuICAgICAgc2VsZWN0b3I6IHtcbiAgICAgICAgZG91cGxvYWQ6ICcudGFyZ2V0LXVwbG9hZCcsXG5cbiAgICAgIH0sXG4gICAgICBjc3M6IHtcbiAgICAgICAgZHJvcHpvbmU6ICdkcm9wem9uZSdcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xuICAgIGlmICh0aGlzLm9wdGlvbnMuZW5hYmxldXBsb2FkID09PSB0cnVlKSB0aGlzLmFkZFVwbG9hZERpYWxvZyh0aGlzLmNvbnRhaW5lciwgdGhpcy5vcHRpb25zLnVwbG9hZC5jYWxsYmFjayk7XG5cbiAgfVxuXG5cbiAgbGlzdERpcihzdWJkaXIgPSAnJywgcGFyZW50LCB0YWcsIGluZGVudCkge1xuICAgIHBhcmVudCA9IHBhcmVudCA/IHBhcmVudCA6IHRoaXMub3B0aW9ucy5kaXNwbGF5bGlzdDtcbiAgICB0YWcgPSAodGFnKSA/ICgodGFnID09PSAnc2VsZWN0JykgPyAnb3B0aW9uZ3JvdXAnIDogdGFnKSA6IHRoaXMub3B0aW9ucy5lbmFibGV1cGxvYWQgPyAnc2VsZWN0JyA6ICd1bCc7XG4gICAgY29uc3Qgc3VidGFnID0gKHRhZyA9PT0gJ3VsJykgPyAnbGknIDogJ29wdGlvbic7XG4gICAgaW5kZW50ID0gaW5kZW50ID8gaW5kZW50ICsgMiA6IDA7XG4gICAgZmV0Y2godGhpcy5vcHRpb25zLnVybCArICcvJyArIHN1YmRpciwgZmV0Y2hTZXR0aW5ncygpKS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSkudGhlbihqc29uID0+IHtcbiAgICAgIC8vICAgIGpzb24gPSBET01QdXJpZnkuc2FuaXRpemUoanNvbik7XG5cbiAgICAgIGlmIChqc29uLmVudHJpZXMgJiYganNvbi5lbnRyaWVzLmxlbmd0aCkge1xuICAgICAgICBpZiAocGFyZW50LmRhdGFzZXQubGFiZWwpIHBhcmVudC5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyYmVnaW4nLCBgPGxhYmVsPiR7cGFyZW50LmRhdGFzZXQubGFiZWx9PC9sYWJlbD5gKTtcbiAgICAgICAgbGV0IGh0bWwgPSBbYDwke3RhZ30gY2xhc3M9XCJlbnRyaWVzIG1sLSR7aW5kZW50fVwiPmBdO1xuICAgICAgICBjb25zdCBsaXN0X2VudHJpZXMgPSAoZW50cmllcywgaHRtbCkgPT4ge1xuICAgICAgICAgIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICAgICAgICBjb25zdCBleHQgPSBlbnRyeS5uYW1lLnNwbGl0KCcuJykucG9wKCk7XG4gICAgICAgICAgICBodG1sLnB1c2goYDwke3N1YnRhZ30gJHsoZW50cnkudHlwZT09PSdEJyk/YGRyYWdnYWJsZT1cInRydWVcImA6YGB9IGRhdGEtbmFtZT1cIiR7ZW50cnkubmFtZX1cIj48c3BhbiBjbGFzcz1cImVudHJ5JHtlbnRyeS50eXBlfVwiPjxpIGNsYXNzPVwiaWNvbiBpY29uLSR7KChlbnRyeS50eXBlID09PSBcIkRcIikgPyAnZm9sZGVyLXNtJyA6ICgoZmlsdGVyX2ZpbGVzLnRzdi5zcGxpdCgnLCcpLmluZGV4T2YoZXh0KT49MCk/J2RvY3VtZW50LXNtJzoncGhvdG8tc20nKSl9IGFsaWduLXRleHQtYm90dG9tIG1iLTAuNSBtci0wLjVcIj48L2k+JHtlbnRyeS5uYW1lfTwvc3Bhbj5gKTtcbiAgICAgICAgICAgIC8vdXBsb2FkIGluIHN1YmRpciAtIGxhdGVyLSBpZiAoZW50cnkudHlwZSA9PT0gXCJEXCIgJiYgdGhpcy5vcHRpb25zLmVuYWJsZXVwbG9hZCA9PT0gdHJ1ZSkgaHRtbC5wdXNoKGA8YSBjbGFzcz1cIiR7dGhpcy5vcHRpb25zLnNlbGVjdG9yLmRvdXBsb2FkLnNsaWNlKDEpfVwiIHBhcmVudD1cIiR7c3ViZGlyfVwiPjxpIGNsYXNzPVwiaWNvbiBpY29uLXBsdXMtc21cIiBhbGlnbi10ZXh0LWJvdHRvbSAgbWItMC41IG1sLTAuNSB0aXRsZT1cIiR7dGhpcy5jb250YWluZXIuZGF0YXNldC5sYWJlbH1cIj48L2k+PC9hPmApO1xuICAgICAgICAgICAgaHRtbC5wdXNoKGA8LyR7c3VidGFnfT5gKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICB9XG4gICAgICAgIGxpc3RfZW50cmllcyhqc29uLmVudHJpZXMsIGh0bWwpO1xuICAgICAgICBodG1sLnB1c2goYDwvJHt0YWd9PmApO1xuICAgICAgICBwYXJlbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBodG1sLmpvaW4oYGApKTtcblxuXG4gICAgICAgIHBhcmVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZW50cnlEJykuZm9yRWFjaChkaXIgPT4gZGlyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIGNvbnN0IGRpciA9IGUuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgIGRpci5jbGFzc0xpc3QudG9nZ2xlKCdvbicpO1xuICAgICAgICAgIGNvbnN0IGljbyA9IGUuY3VycmVudFRhcmdldC5xdWVyeVNlbGVjdG9yKCdpLmljb24nKTtcbiAgICAgICAgICBpZiAoaWNvKSB7XG4gICAgICAgICAgICBpY28uY2xhc3NMaXN0LnRvZ2dsZSgnaWNvbi1mb2xkZXItc20nKTtcbiAgICAgICAgICAgIGljby5jbGFzc0xpc3QudG9nZ2xlKCdpY29uLWZvbGRlci1vcGVuLXNtJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnNvbGUubG9nKCdkaXInLCBkaXIpXG4gICAgICAgICAgaWYgKGRpci5jbGFzc0xpc3QuY29udGFpbnMoJ29uJykpIHtcbiAgICAgICAgICAgIGlmICghZGlyLmRhdGFzZXQubG9hZCkge1xuICAgICAgICAgICAgICB0aGlzLmxpc3REaXIoc3ViZGlyICsgJy8nICsgZGlyLmRhdGFzZXQubmFtZSwgZGlyLCB0YWcsIGluZGVudCk7XG4gICAgICAgICAgICAgIGRpci5kYXRhc2V0LmxvYWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZGlyLmxhc3RFbGVtZW50Q2hpbGQpIGRpci5sYXN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xuXG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2FsbGJhY2spIHRoaXMub3B0aW9ucy5jYWxsYmFjaygpO1xuICAgIH0pXG4gIH1cbiAgYWRkVXBsb2FkRGlhbG9nKGl0ZW0sIGNhbGxiYWNrKSB7XG4gICAgaXRlbSA9IChpdGVtKSA/IGl0ZW0gOiB0aGlzLmNvbnRhaW5lcjtcbiAgICBjYWxsYmFjayA9IChjYWxsYmFjaykgPyBjYWxsYmFjayA6IG51bGw7XG4gICAgaWYgKCF0aGlzLmpzVXBsb2FkKSB0aGlzLmpzVXBsb2FkID0gbmV3IEpzVXBsb2FkKHRoaXMuY29udGFpbmVyLCBjYWxsYmFjayk7XG4gICAgdGhpcy5qc1VwbG9hZC5hdHRhY2hEcm9wem9uZShpdGVtKTtcbiAgICAvKiAgaXRlbS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMub3B0aW9ucy5zZWxlY3Rvci5kb3VwbG9hZCkuZm9yRWFjaCh0YXJnZXQgPT4ge1xuICAgICAgICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBjb25zdCBkcm9wem9uZSA9IHRhcmdldC5xdWVyeVNlbGVjdG9yKHRoaXMuanNVcGxvYWQub3B0aW9ucy5zZWxlY3Rvci5kcm9wdGFyZ2V0KTtcbiAgICAgICAgICAgIGlmICghZHJvcHpvbmUgfHwgdGhpcy5qc1VwbG9hZC50YXJnZXRkaXIgIT09IHRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQubmFtZSkgdGhpcy5qc1VwbG9hZC5hdHRhY2hEcm9wem9uZSh0YXJnZXQpO1xuICAgICAgICAgICAgLy9lbHNlIHRoaXMuanNVcGxvYWQuZGV0YWNoRHJvcHpvbmUoKTtcblxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTsqL1xuXG4gIH1cbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/modules/js-my-files.js\n")}}]);
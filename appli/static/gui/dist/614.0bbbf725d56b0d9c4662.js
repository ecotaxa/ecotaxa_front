/*! For license information please see 614.0bbbf725d56b0d9c4662.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[614],{3614:(e,t,n)=>{n.d(t,{jobMonitor:()=>r});var s=n(7737),i=n(2817);function r(e){const t=e.dataset.id,n={E:"Error",F:"Done",R:"Running",A:"Question",P:"Waiting"};if(!t)return;if(e.dataset.state&&["E","F","A"].indexOf(e.dataset.state)>=0)return;const r=document.getElementById("divstate");let a=document.getElementById("responsediv");null===a&&(a=document.createElement("div"),a.id="responsediv",e.prepend(a));let o=!1,c="is-pending";const d=(e,t)=>{if(e&&0!==e.length&&e.length&&"E"!=t&&"F"!==t){const t=a.querySelector(".alert");null===t?a.insertAdjacentHTML("beforeend",`<div class="alert danger inverse" data-dismissible="true">${e.join("<br>")}</div> `):t.insertAdjacentHTML("beforeend",e.join("<br>"))}};let l=[];const u=()=>{fetch("/gui/job/status/"+t,s.wv).then((e=>e.json())).then((e=>{if(e){switch(e.state&&(t=e.state,r&&(r.innerText=n[t]),function(e){const t=document.getElementById("spinner-icon");if(null!==t)switch(e){case"R":case"P":t&&t.classList.remove(i.iv.hide),null===t.querySelector("svg")&&t.insertAdjacentHTML("afterbegin",(0,s.IW)("text-stone-700"));break;default:t.remove()}}(e.state),function(e,t=0,n=""){t||(t=0);const s=document.getElementById("progressbar");if(a.textContent=n,r&&(r.textContent=n),null!==s){s.firstChild.textContent=t+"%";const n=s.querySelector(".percent");if(n){switch(n.classList.remove(c),c="is-running",e){case"E":c="is-error";break;case"F":c="is-done";break;case"A":c="is-warning"}n.classList.contains(c)||n.classList.add(c),n.style.width=t+"%"}}}(e.state,e.progress_pct,e.progress_msg)),e.state){case"A":o=!0,a.innerHTML="Question waiting for an answer "+((e,t,n="secondary")=>`<a href="${e}" class="button  is-${n}">${t}</a>`)(window.location.origin+"/Job/Question/"+e.id,"Go","warning");break;case"F":o=!0,e.finalaction&&l.push(e.finalaction);break;case"E":e.errors.length&&d(e.errors,e.state),o=!0;break;case"P":break;case"R":d(e.errors,e.state)}if(e.state&&"E"===e.state||"F"===e.state||"Prediction"===e.type)return void(a&&(a.insertAdjacentHTML("afterbegin",l.join("")),a.classList.remove(i.iv.hide)))}var t;!1===o&&setTimeout(u,1e3)})).catch((e=>{console.log("err",e)}))};u()}}}]);
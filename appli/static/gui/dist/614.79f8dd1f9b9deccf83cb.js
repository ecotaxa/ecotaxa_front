/*! For license information please see 614.79f8dd1f9b9deccf83cb.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[614],{3614:(e,t,n)=>{n.d(t,{jobMonitor:()=>i});var s=n(7737);function i(e){const t=e.dataset.id,n={E:"Error",F:"Done",R:"Running",A:"Question",P:"Waiting"};if(!t)return;if(e.dataset.state&&["E","F","A"].indexOf(e.dataset.state)>=0)return;const i=document.getElementById("divstate");let r=document.getElementById("responsediv");null===r&&(r=document.createElement("div"),r.id="responsediv",e.prepend(r));let a=!1,o="is-pending";const c=(e,t)=>{if(e&&0!==e.length&&e.length&&"E"!=t&&"F"!==t){const t=r.querySelector(".alert");null===t?r.insertAdjacentHTML("beforeend",`<div class="alert danger inverse" data-dismissible="true">${e.join("<br>")}</div> `):t.insertAdjacentHTML("beforeend",e.join("<br>"))}};let d=[];const l=()=>{fetch("/gui/job/status/"+t,s.wv).then((e=>e.json())).then((e=>{if(e){switch(e.state&&(t=e.state,i&&(i.innerText=n[t]),function(e){const t=document.getElementById("spinner-icon");if(null!==t)switch(e){case"R":case"P":t&&t.classList.remove("hidden"),null===t.querySelector("svg")&&t.insertAdjacentHTML("afterbegin",(0,s.IW)("text-stone-700"));break;default:t.remove()}}(e.state),function(e,t=0,n=""){t||(t=0);const s=document.getElementById("progressbar");if(r.textContent=n,i&&(i.textContent=n),null!==s){s.firstChild.textContent=t+"%";const n=s.querySelector(".percent");if(n){switch(n.classList.remove(o),o="is-running",e){case"E":o="is-error";break;case"F":o="is-done";break;case"A":o="is-warning"}n.classList.contains(o)||n.classList.add(o),n.style.width=t+"%"}}}(e.state,e.progress_pct,e.progress_msg)),e.state){case"A":a=!0,r.innerHTML="Question waiting for an answer "+((e,t,n="secondary")=>`<a href="${e}" class="button  is-${n}">${t}</a>`)(window.location.origin+"/Job/Question/"+e.id,"Go","warning");break;case"F":a=!0,e.finalaction&&d.push(e.finalaction);break;case"E":e.errors.length&&c(e.errors,e.state),a=!0;break;case"P":break;case"R":c(e.errors,e.state)}if(e.state&&"E"==e.state||"F"==e.state&&!e.out)return void(r&&(r.insertAdjacentHTML("afterbegin",d.join("")),r.classList.remove("hidden")))}var t;!1===a&&setTimeout(l,1e3)})).catch((e=>{console.log("err",e)}))};l()}}}]);
/*! For license information please see 265.342319c89084d0b88dba.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[265],{1265:(t,o,e)=>{e.d(o,{JsImport:()=>l});e(2838);var i=e(4860),s=e(7114);s.AH.displayimport="displayimport";class l{typeimport;myFiles;eventnames={import:"import"};url={};constructor(t,o={}){if(!(t=t instanceof HTMLElement?t:document.querySelector(t)))return;this.container=t;this.options=Object.assign({selector:{typeimport:"typeimport",importzone:"file_to_load",showfiles:".showfiles"},url:{import:"gui/import",dirlist:"gui/files"},importzone:"import-list",sourcezone:"dirlist"},o),this.url.dirlist=t.dataset.dirlist?t.dataset.dirlist:this.options.url.dirlist,this.url.import=t.dataset.import?t.dataset.import:this.options.url.import;const e=t.dataset.importzone?t.dataset.importzone:this.options.importzone;console.log("container "+e,t),this.init(e)}init(t){this.addImportZone(t),this.container.querySelectorAll('input[name="'+this.options.selector.typeimport+'"]').forEach((t=>{t.addEventListener("change",(t=>{t.currentTarget.checked&&(console.log(t.currentTarget),this.typeimport=t.currentTarget.value,this.showSelection(!0))}))})),this.showSelection()}addImportZone(t){let o=document.getElementById(t);if(console.log("importzone "+t,o),o.classList.add(s.AH.displayimport),null!==o){if(0===o.children.length){(0,i.xJ)("input",{type:"hidden",id:"files_to_load",name:"files_to_load",class:"form-input",required:!0});const t=(0,i.xJ)("div",{class:"response-summary"});(0,i.xJ)("div",{id:"total-objects",class:"info",data:{text:"Total objects"}},t),(0,i.xJ)("div",{id:"total-tsv",class:"info",data:{text:"Total TSV"}},t)}return o}}async showSelection(t=!1){console.log("showselection");const o=document.getElementById(this.options.sourcezone),i=document.getElementById(this.options.importzone);if(o&&i){if(console.log("displayselection",o),!this.myFiles){const{JsMyFiles:t}=await e.e(470).then(e.bind(e,3470));this.myFiles=new t(o,{import:this.url.toimport,url:this.url.dirlist,upload:{label:o.dataset.uploadlabel?o.dataset.uploadlabel:"upload",callback:()=>{this.showSubmit()}}}),this.addImportControls()}!0===t&&(()=>{let t=this.typeimport.split("-");t=t.map((t=>new Set([...filter_files[t]?filter_files[t]:[]]))),this.myFiles.container.querySelectorAll("[data-ftype]").forEach((o=>{t.has(o.dataset.ftype)?o.classList.remove("disabled"):o.classList.add("disabled")}))})()}}addImportPath(t){document.getElementById(this.options.selector.importzone).value=t;const o=document.getElementById(this.options.selector.displayresult);o&&(o.innerHTML=`<li>${t.split("/").pop()}</li>`);this.container.querySelector("#"+this.options.selector.importoptions)}addImportControls(){const t={import:{action:"import",icon:"icon-arrow-down-on-square-stack",typentries:["D","F"],text:"import into project",callback:t=>{}}};this.myFiles.jsDirList.options.entrycontrols.controls={...t,...this.myFiles.jsDirList.options.entrycontrols.controls},this.myFiles.jsDirList.import=t=>{console.log("yes good , very googd",t)}}showSubmit(t=!0){const o=this.container.querySelector('[type="submit"]');console.log("sub",o),t?(o.classList.remove("hide"),o.disabled=!1):o.disabled=!0}}}}]);
/*! For license information please see 942.09269747db1c793a6771.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[942],{8942:(t,e,s)=>{s.r(e),s.d(e,{default:()=>o,initImport:()=>l});var a=s(7114),r=s(4982),n=s.n(r);a.AH.lastused="last-used",a.AH.small="tdsmall";const l=async t=>{const{DataImport:e}=await Promise.all([s.e(324),s.e(455),s.e(4),s.e(484)]).then(s.bind(s,2484));if(t.dataImport=new e(t),t.importfields=t.grid.columns.filter((t=>t.selectcells)),t.importfields=t.importfields.length?t.importfields[0].selectcells:null,t.dataImport.itemRemove=function(e,s){if(t.params.import&&t.params.import===a.IB.project){const s=t.dom.querySelector("["+t.dataImport.selector+'="'+e+'"]');t.dataImport.indexToCheck();if(s){const e=s.closest("tr");t.dataImport.resetSelector(e);s.parentElement.querySelectorAll("button, input").forEach(((t,e)=>{this.disableSelector(s,!1),this.toImport(t.parentElement,e,!1)}))}}},t.params.import&&t.params.import===a.IB.project){const{ImportList:e}=await s.e(523).then(s.bind(s,5523));e(t,t.dataImport)}t.dataImport.initList&&t.dataImport.initList(),t.waitdiv.remove()};function o(t){let e=0;if(document.styleSheets&&document.styleSheets.length&&document.styleSheets[0].cssRules&&Object.values(document.styleSheets[0].cssRules).forEach(((t,s)=>{t.selectorText&&".progress data"===t.selectorText.trim()&&(e=t.style.cssText.split(";"),e.forEach((t=>{"max-width"===(t=t.split(":"))[0].trim()&&t.length>1&&(e=parseInt(t[1].trim()))})))})),e=e>0?e:64,t.cellidname=a.Jn.projid,t.initImport=l,t.params.lastused){const e=JSON.parse(t.params.lastused);t.setRowAttributes=(t,s,r)=>(r&&e.indexOf(r)>=0&&s.classList.add(a.AH.lastused),s)}return{contact:(e,s,r,n={})=>{const l=!!Array.isArray(e)&&Boolean(e[1]);null===(e=Array.isArray(e)?String(e[0]).trim():String(e).trim())&&(e="");let o=[];const i=t.getCellData(s,a.Jn.projid);let c=t.getCellData(s,a.Jn.contact),d=!1;if(null===c?(c=t.getCellData(s,a.Jn.managers),c=c&&c.length?c[0]:null):d=!0,c){const s={nodename:"A",attributes:{href:`mailto:${c.email}`,class:"contact",target:"_blank"},childnodes:[t.setTextNode(c.name)]};d&&(s.attributes["data-contact"]=d),o=[t.setTextNode(e),s]}else o=[t.setTextNode(e)];return n.childnodes=!0===l?[{nodename:"DETAILS",attributes:{"data-id":i,"data-what":a.Jn.about},childnodes:[{nodename:"SUMMARY",childnodes:o}]}]:o,n},imports:(e,s,r,l={})=>{const o=t.getCellData(s,a.Jn.projid),i=t.grid.columns[r];if(i.hasOwnProperty("selectcells")){let e=[],r=t.params.btn?t.params.btn:"import";switch(i.what){case a.Jn.taxo:(i.parts?i.parts:i.selectcells).forEach(((a,l)=>{let o=t.getCellData(s,a);o=null===o||n()(o,{})?" disabled":"",l>0&&(r=t.params.btn1?t.params.btn1:"extra"),e.push({nodename:"BUTTON",attributes:{class:`btn is-preset${o}`,type:"button"},childnodes:[{nodename:"I",attributes:{class:"icon-md  "+(""===o?"icon-plus-sm":""),type:"button"},childnodes:[]},t.setTextNode(r)]})}));break;case a.Jn.project:e.push({nodename:"INPUT",attributes:{type:"checkbox",name:`${a.Jn.project}[]`,class:"form-checkbox",value:o}});break;case a.Jn.settings:case a.Jn.privileges:case a.Jn.fields:e.push({nodename:"BUTTON",attributes:{class:"btn is-preset",type:"button"},childnodes:[t.setTextNode(r)]})}l.childnodes=e}else l.childnodes=[];return l},controls:(e,s,r,n={})=>{let l=[];const o=t.getCellData(s,a.Jn.projid);return Object.entries(e).forEach((([e,r])=>{let n={nodename:"A"};switch(e){case"A":n.attributes={class:"btn is-annotate order-1",href:`/prj/${o}`};break;case"V":n.attributes={class:"btn is-view order-1",href:`/prj/${o}`};break;case"M":n.attributes={class:"btn is-manage order-2",href:`/gui/prj/edit/${o}`};break;case"R":const e=t.getCellData(s,a.Jn.contact);n.attributes={class:"btn is-request order-2",href:`mailto:${e.email}?${o}`}}n.childnodes=[t.setTextNode(r)],l.push(n)})),n.attributes=n.hasOwnProperty("attributes")?n.attributes:{},n.attributes.class=n.attributes.class?n.attributes.class+" "+a.AH.component.table.controls:a.AH.component.table.controls,n.childnodes=l,n},progress:(s,r,n,l={})=>{null===s&&(s=0),s=parseInt(s)-parseFloat(s).toFixed(2)==0?parseInt(s):parseFloat(s).toFixed(2);const o=parseFloat(s*(e/100)).toFixed(2),i={nodename:"DATA",attributes:{style:`width:${o}px`,"data-w":`${o}`}};return l.attributes=l.hasOwnProperty("attributes")?l.attributes:{},l.attributes.class=l.attributes.class?l.attributes.class+" "+a.AH.progress:a.AH.progress,l.childnodes=[t.setTextNode(String(s)+"%"),i],l},access:(t,e,s,a={})=>(a.html=t,a),status:(t,e,s,r={})=>(r.attributes=r.hasOwnProperty("attributes")?r.attributes:{},r.attributes.class=r.attributes.class?r.attributes.class+a.AH.small:a.AH.small,r.html=t,r),privileges:(e,s,a,r={})=>{e&&""!==e||(r.childnodes=[t.setTextNode("")]);let n=[];return Object.entries(e).forEach((([e,s])=>{let a=[];s.length&&(s.forEach((t=>{a.push(t.name)})),n.push({nodename:"DIV",attributes:{class:"rights","data-r":e},childnodes:[t.setTextNode(a.join(", "))]}))})),r.childnodes=n,r},taxons:(e,s,r,n={})=>{null===e&&(n.childnodes=[t.setTextNode("")]);const l=Object.keys(e).length;return l>0?(e=Object.values(e).join(", "),n.childnodes=[{nodename:"DIV",attributes:{class:a.AH.component.table.tip,"data-num":l},childnodes:[t.setTextNode(e)]}]):n.childnodes=[t.setTextNode("")],n}}}}}]);
/*! For license information please see 523.165dea87d2878445edb7.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[523],{5523:(e,t,r)=>{r.d(t,{ImportList:()=>a});r(7114);var s=r(4860);function a(e,t=null){const r=e.getCellId(e.cellidname),a=function(e,t,r){e.hidden=t};function n(){const t=e.dataImport;if(t.targetimport){let e=null;"select"===t.targetimport.tagName.toLowerCase()?(e=[...t.targetimport.options].filter((e=>e.selected)),e=e.map((e=>parseInt(e.value)))):e=t.targetimport.value,t.selectors.forEach((t=>{e.indexOf(parseInt(t.value))>=0&&t.click()}))}}function i(t,s){const n=["instrument","access"],i=[];if(n.forEach((t=>{const r=e.getCellId(t);r>-1&&i.push(r)})),i.length!==n.length)return;let o=e.grid.data;const l=[];o=o.filter(((e,a)=>{let n=!0;return a!==s&&i.forEach((r=>{n=n&&t[r]===e[r]})),n&&l.push(String(e[r])),n})),e.displaySelected(i,l,r,a)}function o(){e.displaySelected([],[],r,a)}if(!t)return{filterByRecord:i,resetFilter:o,initList:n};t.filterByRecord=i,t.resetFilter=o,t.compileProjectRecords=async function(t=!0,r=["creator_users","creator_organisations"]){const a=e.dataImport.importzone.tomselect,n=a?a.items:Array.from(e.dataImport.importzone.selectedOptions).map((e=>e.value));if(0===n.length)return null;const i="/gui/collection/aggregated?"+new URLSearchParams({project_ids:n.join(","),simulate:"y"}),o=await fetch(i,(0,s.Uc)({method:"GET"}));let l=await o.json();l.excluded,delete l.excluded;const c=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}).creator.forEach((e=>{if(Object.keys(l).indexOf(e+"_users")>=0&&!0===t){l[e+"_organisations"]=l[e+"_users"].map((e=>e.organisation)),l[e+"_organisations"].sort();const t=l[e+"_users"].map((e=>({key:e.id,value:e.name,text:e.name+" "+e.email})));l[e+"_users"]=t,l[e+"_users"].sort(((e,t)=>c.compare(e.value,t.value)))}}));return l},t.initList=n}}}]);
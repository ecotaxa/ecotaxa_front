/*! For license information please see 523.09fb066a04c2afb740c0.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[523],{5523:(e,t,r)=>{r.d(t,{ImportList:()=>a});r(7114);var o=r(4860);function a(e,t=null){const r=e.getCellId(e.cellidname),a=function(e,t,r){e.hidden=t};function i(){const t=e.dataImport;if(t.targetimport){let e=null;"select"===t.targetimport.tagName.toLowerCase()?(e=[...t.targetimport.options].filter((e=>e.selected)),e=e.map((e=>parseInt(e.value)))):e=t.targetimport.value,t.selectors.forEach((t=>{e.indexOf(parseInt(t.value))>=0&&t.click()}))}}function n(t,o){const i=["instrument","visible"],n=[];if(i.forEach((t=>{const r=e.getCellId(t);r>-1&&n.push(r)})),n.length!==i.length)return;let s=e.grid.data;const c=[];s=s.filter(((e,a)=>{let i=!0;return a!==o&&n.forEach((r=>{i=i&&t[r]===e[r]})),i&&c.push(String(e[r])),i})),e.displaySelected(n,c,r,a)}function s(){e.displaySelected([],[],r,a)}if(!t)return{filterByRecord:n,resetFilter:s,initList:i};t.filterByRecord=n,t.resetFilter=s,t.compileProjectRecords=async function(t=!0){const r=e.dataImport.importzone.tomselect,a=r?r.items:Array.from(e.dataImport.importzone.selectedOptions).map((e=>e.value));if(0===a.length)return null;const i="/gui/collection/aggregated?"+new URLSearchParams({project_ids:a.join(",")}),n=await fetch(i,(0,o.Uc)({method:"GET"}));let s=await n.json();s.excluded,delete s.excluded;const c=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});if(Object.keys(s).indexOf("creator_users")>=0&&!0===t){s.creator_organisations=s.creator_users.map((e=>e.organisation)),s.creator_organisations.sort();const e=s.creator_users.map((e=>({key:e.id,value:e.name,text:e.name+" "+e.email})));s.creator_users=e,s.creator_users.sort(((e,t)=>c.compare(e.value,t.value)))}return s},t.initList=i}}}]);
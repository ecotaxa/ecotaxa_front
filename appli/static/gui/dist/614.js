/*! For license information please see 614.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[614],{3614:(e,t,n)=>{n.d(t,{jobMonitor:()=>r});var s=n(9162);function r(e){const t=e.dataset.id,n={E:"Error",F:"Done",R:"Running",A:"Question",P:"Waiting"};if(!t)return;const r=document.getElementById("spinner-icon"),i=document.getElementById("divstate");let o=document.getElementById("responsediv");null===o&&(o=document.createElement("div"),o.id="responsediv",e.prepend(o));let a=!1,c="is-pending";const d=(e,t)=>{if(e&&0!==e.length&&e.length&&"E"!=t&&"F"!==t){const t=o.querySelector(".alert");null===t?o.insertAdjacentHTML("beforeend",`<div class="alert alert-danger inverse" data-dismissible="true">${e.join("<br>")}</div> `):t.insertAdjacentHTML("beforeend",e.join("<br>"))}};let l=[];const u=()=>{fetch("/gui/job/status/"+t,s.wv).then((e=>e.json())).then((e=>{if(e){switch((e=>{i&&(i.innerText=n[e.state])})(e),r&&r.classList.remove("hidden"),((e,t=0,n="")=>{t||(t=0);const s=document.getElementById("progressbar");if(o.textContent=n,i&&(i.textContent=n),null!==s){s.firstChild.textContent=t+"%";const n=s.querySelector(".percent");if(n){switch(n.classList.remove(c),c="is-running",e){case"E":c="is-error";break;case"F":c="is-done";break;case"A":c="is-warning"}n.classList.contains(c)||n.classList.add(c),n.style.width=t+"%"}}})(e.state,e.progress_pct,e.progress_msg),e.state){case"A":a=!0,r&&r.remove(),o.innerHTML="Question waiting for an answer "+((e,t,n="secondary")=>`<a href="${e}" class="button  is-${n}">${t}</a>`)(window.location.origin+"/Job/Question/"+e.id,"Go","warning");break;case"F":a=!0,r&&r.remove(),e.finalaction&&l.push(e.finalaction);break;case"E":e.errors.length&&d(e.errors,e.state),a=!0,r&&r.remove();break;case"P":break;case"R":d(e.errors,e.state)}if(e.state&&"E"==e.state||"F"==e.state&&!e.out)return void(o&&(o.insertAdjacentHTML("afterbegin",l.join("")),o.classList.remove("hidden")))}!1===a&&setTimeout(u,1e3)}))};u()}}}]);
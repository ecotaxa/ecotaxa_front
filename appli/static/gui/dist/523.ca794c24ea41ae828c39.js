/*! For license information please see 523.ca794c24ea41ae828c39.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[523],{5523:(e,t,r)=>{r.d(t,{ImportList:()=>i});r(7114);var n=r(4860);function i(e,t=null){const r=e.getCellId(e.cellidname),i=function(e,t,r){e.hidden=t};function s(){const t=e.dataImport;if(t.targetimport){let e=null;"select"===t.targetimport.tagName.toLowerCase()?(e=[...t.targetimport.options].filter((e=>e.selected)),e=e.map((e=>parseInt(e.value)))):e=t.targetimport.value,t.selectors.forEach((t=>{e.indexOf(parseInt(t.value))>=0&&t.click()}))}}function o(t,n){const s=["instrument","access"],o=[];if(s.forEach((t=>{const r=e.getCellId(t);r>-1&&o.push(r)})),o.length!==s.length)return;let a=e.grid.data;const l=[];a=a.filter(((e,i)=>{let s=!0;return i!==n&&o.forEach((r=>{s=s&&t[r]===e[r]})),s&&l.push(String(e[r])),s})),e.displaySelected(o,l,r,i)}function a(){e.displaySelected([],[],r,i)}if(!t)return{filterByRecord:o,resetFilter:a,initList:s};t.filterByRecord=o,t.resetFilter=a,t.compileProjectRecords=async function(t=0){const r=e.dataImport.importzone.tomselect,i=r?r.items:Array.from(e.dataImport.importzone.selectedOptions).map((e=>e.value));if(0===i.length)return null;const s="/gui/collection/aggregated?"+new URLSearchParams({project_ids:i.join(","),simulate:"y"}),o=await fetch(s,(0,n.Uc)({method:"GET"}));let a=await o.json();a.excluded,delete a.excluded;const l=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),c="creator";if(0===t&&Object.keys(a).indexOf(c+"_users")>=0){const e=a[c+"_users"].map((e=>({key:e.id,value:e.name,text:e.name+" "+e.email})));a[c+"_persons"]=e,delete a[c+"_users"],a[c+"_persons"].sort(((e,t)=>l.compare(e.value,t.value)))}return a},t.initList=s}}}]);
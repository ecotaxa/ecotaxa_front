/*! For license information please see 284.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[284],{5614:(e,r,t)=>{t.d(r,{JsScanDir:()=>o});var n=t(9162);let s=null;class o{_events={};eventnames={complete:"complete",processed:"file.processed",error:"file.error"};nextaction;constructor(){return s||(this.init(),s=this,s)}init(e){(0,n.TG)(this),this.on(this.eventnames.error,(e=>{consoile.log("scandir recevie error messgae",e)})),this.on(this.eventnames.processed,(async e=>{console.log("e",e)}))}async processFile(e,r=null){r&&await r()}stopOnError(e){console.log("err",e)}fileType(e){const r=new Uint8Array(e);let t=[];for(let e=0;e<4;e++)t.push(r[e].toString(16));return{input:r,mimetype:(e=>{switch(e){case"89504E47":return"image/png";case"47494638":return"image/gif";case"25504446":return"application/pdf";case"FFD8FFDB":case"FFD8FFE0":case"FFD8FFE1":return"image/jpeg";case"504B0304":return"application/zip";case"EFBBBF22":return"text/tsv";default:return console.log("unknownsign",e),"unknown"}})(e=t.join("").toUpperCase())}}async readDirectory(e,r){const t=this;let n=!1,s=[];const o=onerror||(e=>{console.log("on_error",e),n||(n=!0)}),i=e.createReader(),a=async function(e){if(e.length&&!n)s=[...s,...e],await i.readEntries(a,o);else if(n)console.log("treat error readdir");else{const e=async function(){if(r&&0===s.length)r();else{const r=s.shift();r.isDirectory?await t.readDirectory(r,e):await t.processFile(r,e)}};await e()}};await i.readEntries(a,o)}}}}]);
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[114],{6114:(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var a=s(9162),l=s(2817),r=s(251),o=s.n(r);const i=async e=>{const{DataImport:t}=await Promise.all([s.e(31),s.e(690),s.e(153)]).then(s.bind(s,5941));Object.entries(e.columns).forEach((([s,a],l)=>{const r=e.grid.dom.querySelectorAll("thead th");e.importfields.indexOf(s)>=0&&(r[l].dataset.name=s),a.hasOwnProperty("selectcells")&&(r[l].dataset.selectcells=a.selectcells,a.what&&(r[l].dataset.what=a.what)),["autocomplete","parts","value"].forEach((e=>{a.hasOwnProperty(e)&&(r[l].dataset[e]=a[e])})),e.dataImport=new t(e.grid,e.params.import),e.waitdiv.remove()}))};function c(e){return e.initImport=async()=>{e.importfields&&await i(e)},{contact:(t,s,a,r)=>{const o=!!Array.isArray(t)&&Boolean(t[1]);null===(t=Array.isArray(t)?t[0]:t)&&(t="");let i=[];const c=e.getCellData(a,l.Cq.projid);let d=e.getCellData(a,l.Cq.contact),n=!1;if(null===d?(d=e.getCellData(a,l.Cq.managers),d=d&&d.length?d[0]:null):n=!0,d){const s={nodeName:"A",attributes:{href:`mailto:${d.email}`,class:"contact",target:"_blank"},childNodes:[e.setTextNode(d.name)]};n&&(s.attributes["data-contact"]=n),i=[e.setTextNode(t),s]}else i=[e.setTextNode(t)];s.childNodes=!0===o?[{nodeName:"DETAILS",attributes:{"data-id":c,"data-what":l.Cq.about},childNodes:[{nodeName:"SUMMARY",childNodes:i}]}]:i},imports:(t,s,a,r)=>{e.getCellData(a,l.Cq.projid);const i=Object.values(e.columns)[r];if(i.hasOwnProperty("selectcells")){let t=[],r=e.params.btn?e.params.btn:"import";switch(i.what){case l.Cq.taxo:(i.parts?i.parts:i.selectcells).forEach(((s,l)=>{let i=e.getCellData(a,s);i=null===i||o()(i,{})?" disabled":"",l>0&&(r=e.params.btn1?e.params.btn1:"extra"),t.push({nodeName:"BUTTON",attributes:{class:`btn is-preset${i}`},childNodes:[{nodeName:"I",attributes:{class:"icon-md  "+(""===i?"icon-plus-sm":"")},childNodes:[]},e.setTextNode(r)]})}));break;case l.Cq.settings:case l.Cq.privileges:case l.Cq.fields:t.push({nodeName:"BUTTON",attributes:{class:"btn is-preset"},childNodes:[e.setTextNode(r)]})}s.childNodes=t}else s.childNodes=[]},controls:(t,s,a,r)=>{let o=[];const i=e.getCellData(a,l.Cq.projid);Object.entries(t).forEach((([t,s])=>{let r={nodeName:"A"};switch(t){case"A":r.attributes={class:"btn is-annotate order-1",href:`/prj/${i}`};break;case"V":r.attributes={class:"btn is-view order-1",href:`/prj/${i}`};break;case"M":r.attributes={class:"btn is-manage order-2",href:`/gui/prj/edit/${i}`};break;case"R":const t=e.getCellData(a,l.Cq.contact);r.attributes={class:"btn is-request order-2",href:`mailto:${t.email}?${i}`}}r.childNodes=[e.setTextNode(s)],o.push(r)})),s.attributes=s.hasOwnProperty("attributes")?s.attributes:{},s.attributes.class=s.attributes.class?s.attributes.class+" "+l.iv.component.table.controls:l.iv.component.table.controls,s.childNodes=o},progress:(t,s,a,r)=>{null===t&&(t=0),t=parseInt(t)-parseFloat(t).toFixed(2)==0?parseInt(t):parseFloat(t).toFixed(2);const o=parseFloat(.64*t).toFixed(2),i={nodeName:"DATA",attributes:{style:`width:${o}%`,"data-w":`${o}`}};s.attributes=s.hasOwnProperty("attributes")?s.attributes:{},s.attributes.class=s.attributes.class?s.attributes.class+" "+l.iv.progress:l.iv.progress,s.childNodes=[e.setTextNode(String(t)+"%"),i]},license:(e,t,s,l)=>(0,a.format_license)(e),privileges:(t,s,a,l)=>{t&&""!==t||(s.childNodes=[e.setTextNode("")]);let r=[];Object.entries(t).forEach((([t,s])=>{let a=[];s.length&&(s.forEach((e=>{a.push(e.name)})),r.push({nodeName:"DIV",attributes:{class:"rights","data-r":t},childNodes:[e.setTextNode(a.join(", "))]}))})),s.childNodes=r},taxons:(t,s,a,r)=>{null===t&&(s.childNodes=[e.setTextNode("")]);const o=Object.keys(t).length;o>0?(t=Object.values(t).join(", "),s.childNodes=[{nodeName:"DIV",attributes:{class:l.iv.component.table.tip,"data-num":o},childNodes:[e.setTextNode(t)]}]):s.childNodes=[e.setTextNode("")]}}}}}]);
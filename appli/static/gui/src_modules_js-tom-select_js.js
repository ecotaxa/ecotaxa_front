/*! For license information please see src_modules_js-tom-select_js.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([["src_modules_js-tom-select_js"],{"./node_modules/mini-css-extract-plugin/dist/loader.js??ruleSet[1].rules[2].use[1]!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/postcss-loader/dist/cjs.js!./src/css/tom-select.css":()=>{eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4vZGlzdC9sb2FkZXIuanM/P3J1bGVTZXRbMV0ucnVsZXNbMl0udXNlWzFdIS4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMV0ucnVsZXNbMl0udXNlWzJdIS4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3JjL2Nzcy90b20tc2VsZWN0LmNzcy5qcyIsIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jc3MvdG9tLXNlbGVjdC5jc3M/ZDQwMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/mini-css-extract-plugin/dist/loader.js??ruleSet[1].rules[2].use[1]!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/postcss-loader/dist/cjs.js!./src/css/tom-select.css\n")},"./src/css/tom-select.css":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleDomAPI.js */ "./node_modules/style-loader/dist/runtime/styleDomAPI.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertBySelector.js */ "./node_modules/style-loader/dist/runtime/insertBySelector.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertStyleElement.js */ "./node_modules/style-loader/dist/runtime/insertStyleElement.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleTagTransform.js */ "./node_modules/style-loader/dist/runtime/styleTagTransform.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../node_modules/mini-css-extract-plugin/dist/loader.js??ruleSet[1].rules[2].use[1]!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../node_modules/postcss-loader/dist/cjs.js!./tom-select.css */ "./node_modules/mini-css-extract-plugin/dist/loader.js??ruleSet[1].rules[2].use[1]!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/postcss-loader/dist/cjs.js!./src/css/tom-select.css");\n/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6__) if(__WEBPACK_IMPORT_KEY__ !== "default") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\n\n      options.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");\n    \noptions.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()((_node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6___default()), options);\n\n\n\n\n       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((_node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6___default()) && (_node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6___default().locals) ? (_node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6___default().locals) : undefined);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY3NzL3RvbS1zZWxlY3QuY3NzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxNQUFrRztBQUNsRyxNQUF3RjtBQUN4RixNQUErRjtBQUMvRixNQUFrSDtBQUNsSCxNQUEyRztBQUMzRyxNQUEyRztBQUMzRyxNQUEyUTtBQUMzUTtBQUNBOztBQUVBOztBQUVBLDRCQUE0QixxR0FBbUI7QUFDL0Msd0JBQXdCLGtIQUFhOztBQUVyQyx1QkFBdUIsdUdBQWE7QUFDcEM7QUFDQSxpQkFBaUIsK0ZBQU07QUFDdkIsNkJBQTZCLHNHQUFrQjs7QUFFL0MsYUFBYSwwR0FBRyxDQUFDLHdPQUFPOzs7O0FBSXFOO0FBQzdPLE9BQU8saUVBQWUsd09BQU8sSUFBSSwrT0FBYyxHQUFHLCtPQUFjLFlBQVksRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jc3MvdG9tLXNlbGVjdC5jc3M/YTVlOCJdLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9taW5pLWNzcy1leHRyYWN0LXBsdWdpbi9kaXN0L2xvYWRlci5qcz8/cnVsZVNldFsxXS5ydWxlc1syXS51c2VbMV0hLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMV0ucnVsZXNbMl0udXNlWzJdIS4uLy4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3RvbS1zZWxlY3QuY3NzXCI7XG4gICAgICBcbiAgICAgIFxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtID0gc3R5bGVUYWdUcmFuc2Zvcm1Gbjtcbm9wdGlvbnMuc2V0QXR0cmlidXRlcyA9IHNldEF0dHJpYnV0ZXM7XG5cbiAgICAgIG9wdGlvbnMuaW5zZXJ0ID0gaW5zZXJ0Rm4uYmluZChudWxsLCBcImhlYWRcIik7XG4gICAgXG5vcHRpb25zLmRvbUFQSSA9IGRvbUFQSTtcbm9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50ID0gaW5zZXJ0U3R5bGVFbGVtZW50O1xuXG52YXIgdXBkYXRlID0gQVBJKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0ICogZnJvbSBcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL21pbmktY3NzLWV4dHJhY3QtcGx1Z2luL2Rpc3QvbG9hZGVyLmpzPz9ydWxlU2V0WzFdLnJ1bGVzWzJdLnVzZVsxXSEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cnVsZVNldFsxXS5ydWxlc1syXS51c2VbMl0hLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vdG9tLXNlbGVjdC5jc3NcIjtcbiAgICAgICBleHBvcnQgZGVmYXVsdCBjb250ZW50ICYmIGNvbnRlbnQubG9jYWxzID8gY29udGVudC5sb2NhbHMgOiB1bmRlZmluZWQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/css/tom-select.css\n')},"./src/modules/js-tom-select.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"JsTomSelect\": () => (/* binding */ JsTomSelect)\n/* harmony export */ });\n/* harmony import */ var dompurify__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dompurify */ \"./node_modules/dompurify/dist/purify.js\");\n/* harmony import */ var dompurify__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dompurify__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var tom_select_dist_js_tom_select_base_min_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tom-select/dist/js/tom-select.base.min.js */ \"./node_modules/tom-select/dist/js/tom-select.base.min.js\");\n/* harmony import */ var tom_select_dist_js_tom_select_base_min_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(tom_select_dist_js_tom_select_base_min_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _css_tom_select_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../css/tom-select.css */ \"./src/css/tom-select.css\");\n/* harmony import */ var _modules_utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../modules/utils.js */ \"./src/modules/utils.js\");\n/* harmony import */ var _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../modules/modules-config.js */ \"./src/modules/modules-config.js\");\n\n\n\n\n\nlet users_list = {};\n\n// settings for autocomplete select component - users , instruments , taxons\nclass JsTomSelect {\n  applyTo(item, siblings = null) {\n    const id = item.getAttribute('id');\n    const multiple = item.hasAttribute('multiple');\n    const type = item.dataset.type;\n    let option = {\n        url: '',\n        settings: {}\n      },\n      init_canceltag = (tag) => {\n        tag.addEventListener('click', (e) => {\n          const v = e.currentTarget.closest(_modules_modules_config_js__WEBPACK_IMPORTED_MODULE_4__.domselectors.component.tomselect.item).dataset.value;\n          if (v) {\n            e.stopImmediatePropagation();\n            item.tomselect.removeItem(v);\n          }\n        })\n      };\n\n    switch (type) {\n      case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_4__.models.project:\n        option.url = \"/gui/prjlist/\";\n        option.settings = {\n          valueField: 'id',\n          searchField: 'text',\n          labelField: 'text',\n          openOnFocus: false,\n          maxItems: 1,\n          allowEmptyOption: false,\n          onItemAdd: function(e) {\n            if (e != item.dataset.value) {\n              let href = window.location.href.split('/');\n              href.pop();\n              href = href.join('/') + '/' + e;\n\n              window.open(href, '_blank').focus();\n            }\n            this.removeItem(e);\n            return;\n          }\n        };\n        break;\n\n      case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_4__.models.user:\n        option.url = \"/api/users/search?by_name=\";\n        option.settings = {\n          valueField: 'id',\n          searchField: 'name',\n          labelField: 'name',\n          onInitialize: function() {\n            item.tomselect.items.forEach(e => {\n              users_list[e] = true;\n            });\n          },\n          onItemAdd: function(e) {\n            if (users_list[e]) {\n              if (!this.revertSettings || this.revertSettings.tabIndex < 0 || !item.querySelectorAll('option')) return;\n              const revert = item.querySelectorAll('option')[this.revertSettings.tabIndex].value;\n              this.removeOption(e);\n              this.addItem(revert);\n              users_list[e] = false;\n            } else users_list[e] = true;\n          },\n          onItemRemove: function(e) {\n            if (users_list[e]) delete users_list[e];\n            if (!this.revertSettings || this.revertSettings.tabIndex < 0) return;\n            const revert = item.querySelectorAll('option')[this.revertSettings.tabIndex].value;\n            if (users_list[revert] !== undefined) delete users_list[revert];\n          }\n        };\n        break;\n      case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_4__.models.instr:\n        option.url = \"/search/instruments\";\n        option.settings = {\n          valueField: 'id',\n          labelField: 'text',\n          searchField: 'id',\n          maxItems: 1,\n          preload: true\n        };\n        break;\n      case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_4__.models.taxo:\n        tom_select_dist_js_tom_select_base_min_js__WEBPACK_IMPORTED_MODULE_1___default().define('no_close', () => {\n          this.close = () => {};\n        });\n        //option.settings.plugins.push('no-close')\n        option.url = \"/search/taxo\";\n        option.settings = {\n          valueField: 'id',\n          labelField: 'text',\n          searchField: 'text',\n          onInitialize: () => {\n            const wrapper = document.getElementById(id).nextElementSibling;\n            if (!wrapper.classList.contains('ts-wrapper')) return;\n            const tags = wrapper.querySelectorAll(_modules_modules_config_js__WEBPACK_IMPORTED_MODULE_4__.domselectors.component.tomselect.tsdelet);\n            tags.forEach(tag => {\n              init_canceltag(tag);\n            })\n          }\n\n        }\n        break;\n    }\n    const default_settings = {\n      create: false,\n      maxOptions: null,\n      preload: false,\n      hideSelected: true,\n      duplicates: false,\n      allowEmptyOption: true,\n      closeAfterSelect: true,\n      placeholder: (item.placeholder) ? item.placeholder : ((item.dataset.placeholder) ? item.dataset.placeholder : ''),\n      onDropdownClose: function() {\n\n      },\n      shouldLoad: function(query) {\n        return query.length > 2\n      },\n\n      load: function(query, callback) {\n        query = dompurify__WEBPACK_IMPORTED_MODULE_0___default().sanitize(query);\n\n        const self = this;\n        if (self.loading > 10) {\n\n          callback();\n          return;\n        }\n        let url = '';\n        switch (type) {\n          case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_4__.models.user:\n            url = option.url + encodeURIComponent('%' + query + '%');\n            break;\n          case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_4__.models.instr:\n          case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_4__.models.taxo:\n            url = option.url;\n            if (query) url += '?q=' + encodeURIComponent(query);\n\n            break;\n          case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_4__.models.project:\n            url = option.url;\n            if (query) url += '?filt_title=' + encodeURIComponent(query); //+ '&filt_instrum=' + encodeURIComponent(query);\n            break;\n        }\n        if (url !== null) fetch(url, (0,_modules_utils_js__WEBPACK_IMPORTED_MODULE_3__.fetchSettings)()).then(response => response.json()).then(json => {\n          if (type === _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_4__.models.project) {\n            if (json.data && json.data.length) json = json.data.map(row => {\n              return {\n                id: row[1],\n                text: row[3][0]\n              }\n\n            });\n          }\n          if (type === _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_4__.models.instr && json.length) json = json.reduce((result, a, v) => {\n            a = dompurify__WEBPACK_IMPORTED_MODULE_0___default().sanitize(a);\n            let obj = {\n              id: a,\n              text: a\n            }\n            result.push(obj);\n            return result;\n          }, []);\n\n          if (json.length && typeof json == 'object') json = Object.entries(json);\n          return callback(json);\n\n        }).catch(err => {\n          console.log('tomselect-err', err);\n        });\n      },\n\n      render: {\n        option: function(el, escape) {\n          if (el === undefined || el === null) return ``;\n          // add optgroup\n          const optgroup = (el.optgroup) ? `data-optgroup=${el.optgroup}` : ``;\n          return `<div class=\"py-2 flex  ${ ((multiple)?'inline-flex':'') } \" ${optgroup} data-value=\"${el[option.settings.valueField]}\">${ escape(el[this.settings.labelField]) }</div>`;\n        },\n        item: function(el, escape) {\n          if (el === undefined || el === null) return ``; // add optgroup\n          const optgroup = (el.optgroup) ? `item-${el.optgroup}` : ``;\n          // add cancel icon for multiple selections\n          const cancel = ((multiple) ? `<i class=\"${_modules_modules_config_js__WEBPACK_IMPORTED_MODULE_4__.domselectors.component.tomselect.tsdelet.substr(1)}\"></i>` : ``);\n          return dompurify__WEBPACK_IMPORTED_MODULE_0___default().sanitize(`<div class=\"` + ((multiple) ? `flex inline-flex ` : ``) + ` ${optgroup}\" data-value=\"${el[this.settings.valueField]}\">${ escape(el[this.settings.labelField])} ${ cancel }</div>`);\n        },\n        no_results: function(data, escape) {\n          return dompurify__WEBPACK_IMPORTED_MODULE_0___default().sanitize('<div class=\"no-results\">' + ((item.dataset.noresults) ? item.dataset.noresults : 'No result found for ') + escape(data.input) + '</div>');\n        },\n      }\n    }\n\n    option.settings = Object.assign(default_settings, option.settings)\n    if (id !== null) {\n      const ts = new (tom_select_dist_js_tom_select_base_min_js__WEBPACK_IMPORTED_MODULE_1___default())('#' + id, option.settings);\n\n      ts.wrapper.classList.remove(_modules_modules_config_js__WEBPACK_IMPORTED_MODULE_4__.domselectors.component.tomselect.ident);\n      ts.wrapper.classList.remove('js');\n      // add\n      ts.wrapper.setAttribute('data-component', 'tom-select');\n      switch (type) {\n        case 'taxo':\n          ts.on('item_add', (v, el) => {\n            if (el !== null) el.classList.add('new');\n            el = el.querySelector('.ts-delet');\n            if (el !== null) init_canceltag(el);\n          });\n          break;\n        case 'user':\n          if (item.dataset.priv) ts.on(\"item_add\", function(v, el) {\n            el = el.querySelector(_modules_modules_config_js__WEBPACK_IMPORTED_MODULE_4__.domselectors.component.tomselect.tsdelet);\n            if (el !== null) init_canceltag(el);\n          });\n          break;\n      }\n      return ts;\n    } else console.log('noid');\n\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbW9kdWxlcy9qcy10b20tc2VsZWN0LmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQWtDO0FBQ2dDO0FBQ2pCO0FBR3BCO0FBSVM7QUFDdEM7O0FBRUE7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSw0Q0FBNEMsNkZBQXFDO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0EsV0FBVyxzRUFBYztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxXQUFXLG1FQUFXO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxvRUFBWTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLG1FQUFXO0FBQ3RCLFFBQVEsdUZBQWdCO0FBQ3hCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxnR0FBd0M7QUFDMUY7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQSxnQkFBZ0IseURBQWtCOztBQUVsQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1FQUFXO0FBQzFCO0FBQ0E7QUFDQSxlQUFlLG9FQUFZO0FBQzNCLGVBQWUsbUVBQVc7QUFDMUI7QUFDQTs7QUFFQTtBQUNBLGVBQWUsc0VBQWM7QUFDN0I7QUFDQSwwRUFBMEU7QUFDMUU7QUFDQTtBQUNBLHFDQUFxQyxnRUFBYTtBQUNsRCx1QkFBdUIsc0VBQWM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxhQUFhO0FBQ2I7QUFDQSx1QkFBdUIsb0VBQVk7QUFDbkMsZ0JBQWdCLHlEQUFrQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7O0FBRUEsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNULE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsWUFBWTtBQUN4RSw0Q0FBNEMsZ0NBQWdDLElBQUksVUFBVSxjQUFjLCtCQUErQixLQUFLLHNDQUFzQztBQUNsTCxTQUFTO0FBQ1Q7QUFDQSwwREFBMEQ7QUFDMUQsbURBQW1ELFlBQVk7QUFDL0Q7QUFDQSxvREFBb0QsdUdBQStDLElBQUk7QUFDdkcsaUJBQWlCLHlEQUFrQixnRUFBZ0UsU0FBUyxnQkFBZ0IsNkJBQTZCLEtBQUssc0NBQXNDLEdBQUcsUUFBUTtBQUMvTSxTQUFTO0FBQ1Q7QUFDQSxpQkFBaUIseURBQWtCO0FBQ25DLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxxQkFBcUIsa0ZBQVM7O0FBRTlCLGtDQUFrQyw4RkFBc0M7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxnR0FBd0M7QUFDMUU7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsTUFBTTs7QUFFTjtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvanMtdG9tLXNlbGVjdC5qcz9mNDAyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBET01QdXJpZnkgZnJvbSAnZG9tcHVyaWZ5JztcbmltcG9ydCBUb21TZWxlY3QgZnJvbSAndG9tLXNlbGVjdC9kaXN0L2pzL3RvbS1zZWxlY3QuYmFzZS5taW4uanMnO1xuaW1wb3J0IHRvbVNlbGVjdGNzcyBmcm9tIFwiLi4vY3NzL3RvbS1zZWxlY3QuY3NzXCI7XG5pbXBvcnQge1xuICBmZXRjaFNldHRpbmdzXG59IGZyb20gJy4uL21vZHVsZXMvdXRpbHMuanMnO1xuaW1wb3J0IHtcbiAgbW9kZWxzLFxuICBkb21zZWxlY3RvcnNcbn0gZnJvbSAnLi4vbW9kdWxlcy9tb2R1bGVzLWNvbmZpZy5qcyc7XG5sZXQgdXNlcnNfbGlzdCA9IHt9O1xuXG4vLyBzZXR0aW5ncyBmb3IgYXV0b2NvbXBsZXRlIHNlbGVjdCBjb21wb25lbnQgLSB1c2VycyAsIGluc3RydW1lbnRzICwgdGF4b25zXG5leHBvcnQgY2xhc3MgSnNUb21TZWxlY3Qge1xuICBhcHBseVRvKGl0ZW0sIHNpYmxpbmdzID0gbnVsbCkge1xuICAgIGNvbnN0IGlkID0gaXRlbS5nZXRBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgY29uc3QgbXVsdGlwbGUgPSBpdGVtLmhhc0F0dHJpYnV0ZSgnbXVsdGlwbGUnKTtcbiAgICBjb25zdCB0eXBlID0gaXRlbS5kYXRhc2V0LnR5cGU7XG4gICAgbGV0IG9wdGlvbiA9IHtcbiAgICAgICAgdXJsOiAnJyxcbiAgICAgICAgc2V0dGluZ3M6IHt9XG4gICAgICB9LFxuICAgICAgaW5pdF9jYW5jZWx0YWcgPSAodGFnKSA9PiB7XG4gICAgICAgIHRhZy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgY29uc3QgdiA9IGUuY3VycmVudFRhcmdldC5jbG9zZXN0KGRvbXNlbGVjdG9ycy5jb21wb25lbnQudG9tc2VsZWN0Lml0ZW0pLmRhdGFzZXQudmFsdWU7XG4gICAgICAgICAgaWYgKHYpIHtcbiAgICAgICAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBpdGVtLnRvbXNlbGVjdC5yZW1vdmVJdGVtKHYpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH07XG5cbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgbW9kZWxzLnByb2plY3Q6XG4gICAgICAgIG9wdGlvbi51cmwgPSBcIi9ndWkvcHJqbGlzdC9cIjtcbiAgICAgICAgb3B0aW9uLnNldHRpbmdzID0ge1xuICAgICAgICAgIHZhbHVlRmllbGQ6ICdpZCcsXG4gICAgICAgICAgc2VhcmNoRmllbGQ6ICd0ZXh0JyxcbiAgICAgICAgICBsYWJlbEZpZWxkOiAndGV4dCcsXG4gICAgICAgICAgb3Blbk9uRm9jdXM6IGZhbHNlLFxuICAgICAgICAgIG1heEl0ZW1zOiAxLFxuICAgICAgICAgIGFsbG93RW1wdHlPcHRpb246IGZhbHNlLFxuICAgICAgICAgIG9uSXRlbUFkZDogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKGUgIT0gaXRlbS5kYXRhc2V0LnZhbHVlKSB7XG4gICAgICAgICAgICAgIGxldCBocmVmID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJy8nKTtcbiAgICAgICAgICAgICAgaHJlZi5wb3AoKTtcbiAgICAgICAgICAgICAgaHJlZiA9IGhyZWYuam9pbignLycpICsgJy8nICsgZTtcblxuICAgICAgICAgICAgICB3aW5kb3cub3BlbihocmVmLCAnX2JsYW5rJykuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVtb3ZlSXRlbShlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIG1vZGVscy51c2VyOlxuICAgICAgICBvcHRpb24udXJsID0gXCIvYXBpL3VzZXJzL3NlYXJjaD9ieV9uYW1lPVwiO1xuICAgICAgICBvcHRpb24uc2V0dGluZ3MgPSB7XG4gICAgICAgICAgdmFsdWVGaWVsZDogJ2lkJyxcbiAgICAgICAgICBzZWFyY2hGaWVsZDogJ25hbWUnLFxuICAgICAgICAgIGxhYmVsRmllbGQ6ICduYW1lJyxcbiAgICAgICAgICBvbkluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaXRlbS50b21zZWxlY3QuaXRlbXMuZm9yRWFjaChlID0+IHtcbiAgICAgICAgICAgICAgdXNlcnNfbGlzdFtlXSA9IHRydWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9uSXRlbUFkZDogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKHVzZXJzX2xpc3RbZV0pIHtcbiAgICAgICAgICAgICAgaWYgKCF0aGlzLnJldmVydFNldHRpbmdzIHx8IHRoaXMucmV2ZXJ0U2V0dGluZ3MudGFiSW5kZXggPCAwIHx8ICFpdGVtLnF1ZXJ5U2VsZWN0b3JBbGwoJ29wdGlvbicpKSByZXR1cm47XG4gICAgICAgICAgICAgIGNvbnN0IHJldmVydCA9IGl0ZW0ucXVlcnlTZWxlY3RvckFsbCgnb3B0aW9uJylbdGhpcy5yZXZlcnRTZXR0aW5ncy50YWJJbmRleF0udmFsdWU7XG4gICAgICAgICAgICAgIHRoaXMucmVtb3ZlT3B0aW9uKGUpO1xuICAgICAgICAgICAgICB0aGlzLmFkZEl0ZW0ocmV2ZXJ0KTtcbiAgICAgICAgICAgICAgdXNlcnNfbGlzdFtlXSA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHVzZXJzX2xpc3RbZV0gPSB0cnVlO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb25JdGVtUmVtb3ZlOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAodXNlcnNfbGlzdFtlXSkgZGVsZXRlIHVzZXJzX2xpc3RbZV07XG4gICAgICAgICAgICBpZiAoIXRoaXMucmV2ZXJ0U2V0dGluZ3MgfHwgdGhpcy5yZXZlcnRTZXR0aW5ncy50YWJJbmRleCA8IDApIHJldHVybjtcbiAgICAgICAgICAgIGNvbnN0IHJldmVydCA9IGl0ZW0ucXVlcnlTZWxlY3RvckFsbCgnb3B0aW9uJylbdGhpcy5yZXZlcnRTZXR0aW5ncy50YWJJbmRleF0udmFsdWU7XG4gICAgICAgICAgICBpZiAodXNlcnNfbGlzdFtyZXZlcnRdICE9PSB1bmRlZmluZWQpIGRlbGV0ZSB1c2Vyc19saXN0W3JldmVydF07XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgbW9kZWxzLmluc3RyOlxuICAgICAgICBvcHRpb24udXJsID0gXCIvc2VhcmNoL2luc3RydW1lbnRzXCI7XG4gICAgICAgIG9wdGlvbi5zZXR0aW5ncyA9IHtcbiAgICAgICAgICB2YWx1ZUZpZWxkOiAnaWQnLFxuICAgICAgICAgIGxhYmVsRmllbGQ6ICd0ZXh0JyxcbiAgICAgICAgICBzZWFyY2hGaWVsZDogJ2lkJyxcbiAgICAgICAgICBtYXhJdGVtczogMSxcbiAgICAgICAgICBwcmVsb2FkOiB0cnVlXG4gICAgICAgIH07XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBtb2RlbHMudGF4bzpcbiAgICAgICAgVG9tU2VsZWN0LmRlZmluZSgnbm9fY2xvc2UnLCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5jbG9zZSA9ICgpID0+IHt9O1xuICAgICAgICB9KTtcbiAgICAgICAgLy9vcHRpb24uc2V0dGluZ3MucGx1Z2lucy5wdXNoKCduby1jbG9zZScpXG4gICAgICAgIG9wdGlvbi51cmwgPSBcIi9zZWFyY2gvdGF4b1wiO1xuICAgICAgICBvcHRpb24uc2V0dGluZ3MgPSB7XG4gICAgICAgICAgdmFsdWVGaWVsZDogJ2lkJyxcbiAgICAgICAgICBsYWJlbEZpZWxkOiAndGV4dCcsXG4gICAgICAgICAgc2VhcmNoRmllbGQ6ICd0ZXh0JyxcbiAgICAgICAgICBvbkluaXRpYWxpemU6ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICAgICAgaWYgKCF3cmFwcGVyLmNsYXNzTGlzdC5jb250YWlucygndHMtd3JhcHBlcicpKSByZXR1cm47XG4gICAgICAgICAgICBjb25zdCB0YWdzID0gd3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKGRvbXNlbGVjdG9ycy5jb21wb25lbnQudG9tc2VsZWN0LnRzZGVsZXQpO1xuICAgICAgICAgICAgdGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgICAgICAgIGluaXRfY2FuY2VsdGFnKHRhZyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjb25zdCBkZWZhdWx0X3NldHRpbmdzID0ge1xuICAgICAgY3JlYXRlOiBmYWxzZSxcbiAgICAgIG1heE9wdGlvbnM6IG51bGwsXG4gICAgICBwcmVsb2FkOiBmYWxzZSxcbiAgICAgIGhpZGVTZWxlY3RlZDogdHJ1ZSxcbiAgICAgIGR1cGxpY2F0ZXM6IGZhbHNlLFxuICAgICAgYWxsb3dFbXB0eU9wdGlvbjogdHJ1ZSxcbiAgICAgIGNsb3NlQWZ0ZXJTZWxlY3Q6IHRydWUsXG4gICAgICBwbGFjZWhvbGRlcjogKGl0ZW0ucGxhY2Vob2xkZXIpID8gaXRlbS5wbGFjZWhvbGRlciA6ICgoaXRlbS5kYXRhc2V0LnBsYWNlaG9sZGVyKSA/IGl0ZW0uZGF0YXNldC5wbGFjZWhvbGRlciA6ICcnKSxcbiAgICAgIG9uRHJvcGRvd25DbG9zZTogZnVuY3Rpb24oKSB7XG5cbiAgICAgIH0sXG4gICAgICBzaG91bGRMb2FkOiBmdW5jdGlvbihxdWVyeSkge1xuICAgICAgICByZXR1cm4gcXVlcnkubGVuZ3RoID4gMlxuICAgICAgfSxcblxuICAgICAgbG9hZDogZnVuY3Rpb24ocXVlcnksIGNhbGxiYWNrKSB7XG4gICAgICAgIHF1ZXJ5ID0gRE9NUHVyaWZ5LnNhbml0aXplKHF1ZXJ5KTtcblxuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgICAgaWYgKHNlbGYubG9hZGluZyA+IDEwKSB7XG5cbiAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdXJsID0gJyc7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgIGNhc2UgbW9kZWxzLnVzZXI6XG4gICAgICAgICAgICB1cmwgPSBvcHRpb24udXJsICsgZW5jb2RlVVJJQ29tcG9uZW50KCclJyArIHF1ZXJ5ICsgJyUnKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgbW9kZWxzLmluc3RyOlxuICAgICAgICAgIGNhc2UgbW9kZWxzLnRheG86XG4gICAgICAgICAgICB1cmwgPSBvcHRpb24udXJsO1xuICAgICAgICAgICAgaWYgKHF1ZXJ5KSB1cmwgKz0gJz9xPScgKyBlbmNvZGVVUklDb21wb25lbnQocXVlcnkpO1xuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIG1vZGVscy5wcm9qZWN0OlxuICAgICAgICAgICAgdXJsID0gb3B0aW9uLnVybDtcbiAgICAgICAgICAgIGlmIChxdWVyeSkgdXJsICs9ICc/ZmlsdF90aXRsZT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHF1ZXJ5KTsgLy8rICcmZmlsdF9pbnN0cnVtPScgKyBlbmNvZGVVUklDb21wb25lbnQocXVlcnkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVybCAhPT0gbnVsbCkgZmV0Y2godXJsLCBmZXRjaFNldHRpbmdzKCkpLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKS50aGVuKGpzb24gPT4ge1xuICAgICAgICAgIGlmICh0eXBlID09PSBtb2RlbHMucHJvamVjdCkge1xuICAgICAgICAgICAgaWYgKGpzb24uZGF0YSAmJiBqc29uLmRhdGEubGVuZ3RoKSBqc29uID0ganNvbi5kYXRhLm1hcChyb3cgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlkOiByb3dbMV0sXG4gICAgICAgICAgICAgICAgdGV4dDogcm93WzNdWzBdXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0eXBlID09PSBtb2RlbHMuaW5zdHIgJiYganNvbi5sZW5ndGgpIGpzb24gPSBqc29uLnJlZHVjZSgocmVzdWx0LCBhLCB2KSA9PiB7XG4gICAgICAgICAgICBhID0gRE9NUHVyaWZ5LnNhbml0aXplKGEpO1xuICAgICAgICAgICAgbGV0IG9iaiA9IHtcbiAgICAgICAgICAgICAgaWQ6IGEsXG4gICAgICAgICAgICAgIHRleHQ6IGFcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKG9iaik7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgIH0sIFtdKTtcblxuICAgICAgICAgIGlmIChqc29uLmxlbmd0aCAmJiB0eXBlb2YganNvbiA9PSAnb2JqZWN0JykganNvbiA9IE9iamVjdC5lbnRyaWVzKGpzb24pO1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhqc29uKTtcblxuICAgICAgICB9KS5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCd0b21zZWxlY3QtZXJyJywgZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuXG4gICAgICByZW5kZXI6IHtcbiAgICAgICAgb3B0aW9uOiBmdW5jdGlvbihlbCwgZXNjYXBlKSB7XG4gICAgICAgICAgaWYgKGVsID09PSB1bmRlZmluZWQgfHwgZWwgPT09IG51bGwpIHJldHVybiBgYDtcbiAgICAgICAgICAvLyBhZGQgb3B0Z3JvdXBcbiAgICAgICAgICBjb25zdCBvcHRncm91cCA9IChlbC5vcHRncm91cCkgPyBgZGF0YS1vcHRncm91cD0ke2VsLm9wdGdyb3VwfWAgOiBgYDtcbiAgICAgICAgICByZXR1cm4gYDxkaXYgY2xhc3M9XCJweS0yIGZsZXggICR7ICgobXVsdGlwbGUpPydpbmxpbmUtZmxleCc6JycpIH0gXCIgJHtvcHRncm91cH0gZGF0YS12YWx1ZT1cIiR7ZWxbb3B0aW9uLnNldHRpbmdzLnZhbHVlRmllbGRdfVwiPiR7IGVzY2FwZShlbFt0aGlzLnNldHRpbmdzLmxhYmVsRmllbGRdKSB9PC9kaXY+YDtcbiAgICAgICAgfSxcbiAgICAgICAgaXRlbTogZnVuY3Rpb24oZWwsIGVzY2FwZSkge1xuICAgICAgICAgIGlmIChlbCA9PT0gdW5kZWZpbmVkIHx8IGVsID09PSBudWxsKSByZXR1cm4gYGA7IC8vIGFkZCBvcHRncm91cFxuICAgICAgICAgIGNvbnN0IG9wdGdyb3VwID0gKGVsLm9wdGdyb3VwKSA/IGBpdGVtLSR7ZWwub3B0Z3JvdXB9YCA6IGBgO1xuICAgICAgICAgIC8vIGFkZCBjYW5jZWwgaWNvbiBmb3IgbXVsdGlwbGUgc2VsZWN0aW9uc1xuICAgICAgICAgIGNvbnN0IGNhbmNlbCA9ICgobXVsdGlwbGUpID8gYDxpIGNsYXNzPVwiJHtkb21zZWxlY3RvcnMuY29tcG9uZW50LnRvbXNlbGVjdC50c2RlbGV0LnN1YnN0cigxKX1cIj48L2k+YCA6IGBgKTtcbiAgICAgICAgICByZXR1cm4gRE9NUHVyaWZ5LnNhbml0aXplKGA8ZGl2IGNsYXNzPVwiYCArICgobXVsdGlwbGUpID8gYGZsZXggaW5saW5lLWZsZXggYCA6IGBgKSArIGAgJHtvcHRncm91cH1cIiBkYXRhLXZhbHVlPVwiJHtlbFt0aGlzLnNldHRpbmdzLnZhbHVlRmllbGRdfVwiPiR7IGVzY2FwZShlbFt0aGlzLnNldHRpbmdzLmxhYmVsRmllbGRdKX0gJHsgY2FuY2VsIH08L2Rpdj5gKTtcbiAgICAgICAgfSxcbiAgICAgICAgbm9fcmVzdWx0czogZnVuY3Rpb24oZGF0YSwgZXNjYXBlKSB7XG4gICAgICAgICAgcmV0dXJuIERPTVB1cmlmeS5zYW5pdGl6ZSgnPGRpdiBjbGFzcz1cIm5vLXJlc3VsdHNcIj4nICsgKChpdGVtLmRhdGFzZXQubm9yZXN1bHRzKSA/IGl0ZW0uZGF0YXNldC5ub3Jlc3VsdHMgOiAnTm8gcmVzdWx0IGZvdW5kIGZvciAnKSArIGVzY2FwZShkYXRhLmlucHV0KSArICc8L2Rpdj4nKTtcbiAgICAgICAgfSxcbiAgICAgIH1cbiAgICB9XG5cbiAgICBvcHRpb24uc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKGRlZmF1bHRfc2V0dGluZ3MsIG9wdGlvbi5zZXR0aW5ncylcbiAgICBpZiAoaWQgIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IHRzID0gbmV3IFRvbVNlbGVjdCgnIycgKyBpZCwgb3B0aW9uLnNldHRpbmdzKTtcblxuICAgICAgdHMud3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKGRvbXNlbGVjdG9ycy5jb21wb25lbnQudG9tc2VsZWN0LmlkZW50KTtcbiAgICAgIHRzLndyYXBwZXIuY2xhc3NMaXN0LnJlbW92ZSgnanMnKTtcbiAgICAgIC8vIGFkZFxuICAgICAgdHMud3JhcHBlci5zZXRBdHRyaWJ1dGUoJ2RhdGEtY29tcG9uZW50JywgJ3RvbS1zZWxlY3QnKTtcbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlICd0YXhvJzpcbiAgICAgICAgICB0cy5vbignaXRlbV9hZGQnLCAodiwgZWwpID0+IHtcbiAgICAgICAgICAgIGlmIChlbCAhPT0gbnVsbCkgZWwuY2xhc3NMaXN0LmFkZCgnbmV3Jyk7XG4gICAgICAgICAgICBlbCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy50cy1kZWxldCcpO1xuICAgICAgICAgICAgaWYgKGVsICE9PSBudWxsKSBpbml0X2NhbmNlbHRhZyhlbCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3VzZXInOlxuICAgICAgICAgIGlmIChpdGVtLmRhdGFzZXQucHJpdikgdHMub24oXCJpdGVtX2FkZFwiLCBmdW5jdGlvbih2LCBlbCkge1xuICAgICAgICAgICAgZWwgPSBlbC5xdWVyeVNlbGVjdG9yKGRvbXNlbGVjdG9ycy5jb21wb25lbnQudG9tc2VsZWN0LnRzZGVsZXQpO1xuICAgICAgICAgICAgaWYgKGVsICE9PSBudWxsKSBpbml0X2NhbmNlbHRhZyhlbCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHM7XG4gICAgfSBlbHNlIGNvbnNvbGUubG9nKCdub2lkJyk7XG5cbiAgfVxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/modules/js-tom-select.js\n")}}]);
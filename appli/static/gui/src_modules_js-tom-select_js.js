/*! For license information please see src_modules_js-tom-select_js.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([["src_modules_js-tom-select_js"],{"./node_modules/mini-css-extract-plugin/dist/loader.js??ruleSet[1].rules[2].use[1]!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/postcss-loader/dist/cjs.js!./src/css/tom-select.css":()=>{eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4vZGlzdC9sb2FkZXIuanM/P3J1bGVTZXRbMV0ucnVsZXNbMl0udXNlWzFdIS4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMV0ucnVsZXNbMl0udXNlWzJdIS4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3JjL2Nzcy90b20tc2VsZWN0LmNzcyIsIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jc3MvdG9tLXNlbGVjdC5jc3M/ZDQwMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/mini-css-extract-plugin/dist/loader.js??ruleSet[1].rules[2].use[1]!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/postcss-loader/dist/cjs.js!./src/css/tom-select.css\n")},"./src/css/tom-select.css":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleDomAPI.js */ "./node_modules/style-loader/dist/runtime/styleDomAPI.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertBySelector.js */ "./node_modules/style-loader/dist/runtime/insertBySelector.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertStyleElement.js */ "./node_modules/style-loader/dist/runtime/insertStyleElement.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleTagTransform.js */ "./node_modules/style-loader/dist/runtime/styleTagTransform.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../node_modules/mini-css-extract-plugin/dist/loader.js??ruleSet[1].rules[2].use[1]!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../node_modules/postcss-loader/dist/cjs.js!./tom-select.css */ "./node_modules/mini-css-extract-plugin/dist/loader.js??ruleSet[1].rules[2].use[1]!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/postcss-loader/dist/cjs.js!./src/css/tom-select.css");\n/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6__) if(__WEBPACK_IMPORT_KEY__ !== "default") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\n\n      options.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");\n    \noptions.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()((_node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6___default()), options);\n\n\n\n\n       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((_node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6___default()) && (_node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6___default().locals) ? (_node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6___default().locals) : undefined);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY3NzL3RvbS1zZWxlY3QuY3NzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxNQUFrRztBQUNsRyxNQUF3RjtBQUN4RixNQUErRjtBQUMvRixNQUFrSDtBQUNsSCxNQUEyRztBQUMzRyxNQUEyRztBQUMzRyxNQUEyUTtBQUMzUTtBQUNBOztBQUVBOztBQUVBLDRCQUE0QixxR0FBbUI7QUFDL0Msd0JBQXdCLGtIQUFhOztBQUVyQyx1QkFBdUIsdUdBQWE7QUFDcEM7QUFDQSxpQkFBaUIsK0ZBQU07QUFDdkIsNkJBQTZCLHNHQUFrQjs7QUFFL0MsYUFBYSwwR0FBRyxDQUFDLHdPQUFPOzs7O0FBSXFOO0FBQzdPLE9BQU8saUVBQWUsd09BQU8sSUFBSSwrT0FBYyxHQUFHLCtPQUFjLFlBQVksRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jc3MvdG9tLXNlbGVjdC5jc3M/YTVlOCJdLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9taW5pLWNzcy1leHRyYWN0LXBsdWdpbi9kaXN0L2xvYWRlci5qcz8/cnVsZVNldFsxXS5ydWxlc1syXS51c2VbMV0hLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMV0ucnVsZXNbMl0udXNlWzJdIS4uLy4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3RvbS1zZWxlY3QuY3NzXCI7XG4gICAgICBcbiAgICAgIFxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtID0gc3R5bGVUYWdUcmFuc2Zvcm1Gbjtcbm9wdGlvbnMuc2V0QXR0cmlidXRlcyA9IHNldEF0dHJpYnV0ZXM7XG5cbiAgICAgIG9wdGlvbnMuaW5zZXJ0ID0gaW5zZXJ0Rm4uYmluZChudWxsLCBcImhlYWRcIik7XG4gICAgXG5vcHRpb25zLmRvbUFQSSA9IGRvbUFQSTtcbm9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50ID0gaW5zZXJ0U3R5bGVFbGVtZW50O1xuXG52YXIgdXBkYXRlID0gQVBJKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0ICogZnJvbSBcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL21pbmktY3NzLWV4dHJhY3QtcGx1Z2luL2Rpc3QvbG9hZGVyLmpzPz9ydWxlU2V0WzFdLnJ1bGVzWzJdLnVzZVsxXSEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cnVsZVNldFsxXS5ydWxlc1syXS51c2VbMl0hLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vdG9tLXNlbGVjdC5jc3NcIjtcbiAgICAgICBleHBvcnQgZGVmYXVsdCBjb250ZW50ICYmIGNvbnRlbnQubG9jYWxzID8gY29udGVudC5sb2NhbHMgOiB1bmRlZmluZWQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/css/tom-select.css\n')},"./src/modules/js-tom-select.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsTomSelect: () => (/* binding */ JsTomSelect)\n/* harmony export */ });\n/* harmony import */ var dompurify__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dompurify */ \"./node_modules/dompurify/dist/purify.js\");\n/* harmony import */ var dompurify__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dompurify__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var tom_select_dist_js_tom_select_base_min_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tom-select/dist/js/tom-select.base.min.js */ \"./node_modules/tom-select/dist/js/tom-select.base.min.js\");\n/* harmony import */ var tom_select_dist_js_tom_select_base_min_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(tom_select_dist_js_tom_select_base_min_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var tom_select_dist_js_plugins_remove_button_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tom-select/dist/js/plugins/remove_button.js */ \"./node_modules/tom-select/dist/js/plugins/remove_button.js\");\n/* harmony import */ var tom_select_dist_js_plugins_remove_button_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(tom_select_dist_js_plugins_remove_button_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var tom_select_dist_js_plugins_clear_button_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tom-select/dist/js/plugins/clear_button.js */ \"./node_modules/tom-select/dist/js/plugins/clear_button.js\");\n/* harmony import */ var tom_select_dist_js_plugins_clear_button_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(tom_select_dist_js_plugins_clear_button_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var tom_select_dist_js_plugins_caret_position_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! tom-select/dist/js/plugins/caret_position.js */ \"./node_modules/tom-select/dist/js/plugins/caret_position.js\");\n/* harmony import */ var tom_select_dist_js_plugins_caret_position_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(tom_select_dist_js_plugins_caret_position_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _css_tom_select_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../css/tom-select.css */ \"./src/css/tom-select.css\");\n/* harmony import */ var _modules_utils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../modules/utils.js */ \"./src/modules/utils.js\");\n/* harmony import */ var _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../modules/modules-config.js */ \"./src/modules/modules-config.js\");\n\n\n\n\n\ntom_select_dist_js_tom_select_base_min_js__WEBPACK_IMPORTED_MODULE_1___default().define('remove_button', (tom_select_dist_js_plugins_remove_button_js__WEBPACK_IMPORTED_MODULE_2___default()));\ntom_select_dist_js_tom_select_base_min_js__WEBPACK_IMPORTED_MODULE_1___default().define('clear_button', (tom_select_dist_js_plugins_clear_button_js__WEBPACK_IMPORTED_MODULE_3___default()));\ntom_select_dist_js_tom_select_base_min_js__WEBPACK_IMPORTED_MODULE_1___default().define('caret_position', (tom_select_dist_js_plugins_caret_position_js__WEBPACK_IMPORTED_MODULE_4___default()));\n\n\n\nlet users_list = {};\n\n// settings for autocomplete select component - users , instruments , taxons\nclass JsTomSelect {\n  applyTo(item, settings = {}, siblings = null) {\n\n    const id = item.getAttribute('id');\n    const multiple = item.hasAttribute('multiple');\n    const type = item.dataset.type;\n\n    let option = {\n        url: '',\n        settings: settings\n      },\n      init_canceltag = (tag) => {\n        tag.addEventListener('click', (e) => {\n          const v = e.currentTarget.closest(_modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.domselectors.component.tomselect.item).dataset.value;\n          if (v) {\n            e.stopImmediatePropagation();\n            item.tomselect.removeItem(v);\n          }\n        })\n      }\n    if (item.dataset.create && item.dataset.create === 'true') {\n      //  option.settings.create = true;\n      //    option.settings.createOnBlur = true;\n      option.settings.create = true;\n      option.settings.addPrecedence = true;\n      console.log('option', option)\n    }\n    /*,\n          on_clear = function() {\n\n            if (item.tagName.toLowerCase() === 'select')\n              item.querySelectorAll('option:checked').forEach(option => {\n                option.removeAttribute('selected');\n              });\n            item.selectedIndex = -1;\n            return true;\n          }*/\n    ;\n\n    switch (type) {\n      case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.models.project:\n        // for top navigation search\n        option.url = \"/gui/prjlist/\";\n        option.settings = { ...option.settings,\n          ...{\n            valueField: 'id',\n            searchField: 'text',\n            labelField: 'text',\n            openOnFocus: false,\n            maxItems: 1,\n            allowEmptyOption: false,\n          }\n        };\n\n        break;\n      case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.models.user:\n        option.url = \"/api/users/search?by_name=\";\n        option.settings = { ...option.settings,\n          ...{\n            valueField: 'id',\n            searchField: 'name',\n            labelField: 'name',\n            onInitialize: function() {\n              item.tomselect.items.forEach(e => {\n                users_list[e] = true;\n              });\n            },\n            onItemAdd: function(e) {\n              if (e === \"\") return;\n              if (users_list[e]) {\n                users_list[e] = false;\n                if (multiple || !this.revertSettings || this.revertSettings.tabIndex < 0 || !item.options.length) return;\n                const revert = item.options[this.revertSettings.tabIndex].value;\n                this.removeOption(e);\n                this.addItem(revert);\n              } else users_list[e] = true;\n            },\n            onItemRemove: function(e) {\n              if (users_list[e]) delete users_list[e];\n              if (multiple || !this.revertSettings || (this.revertSettings.innerHTML === '' && this.revertSettings.tabIndex === 0) || this.revertSettings.tabIndex < 0) return;\n              const revert = item.options[this.revertSettings.tabIndex].value;\n              if (users_list[revert] !== undefined) delete users_list[revert];\n\n            }\n\n          }\n        };\n        break;\n      case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.models.instr:\n        option.url = \"/search/instruments\";\n        option.settings = {\n          valueField: 'id',\n          labelField: 'text',\n          searchField: 'id',\n          maxItems: 1,\n          preload: true\n        };\n        break;\n      case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.models.taxo:\n        tom_select_dist_js_tom_select_base_min_js__WEBPACK_IMPORTED_MODULE_1___default().define('no_close', () => {\n          this.close = () => {};\n        });\n\n        option.url = \"/search/taxo\";\n        option.settings = { ...option.settings,\n          ...{\n            valueField: 'id',\n            labelField: 'text',\n            searchField: 'text',\n            closeAfterSelect: false,\n            onInitialize: () => {\n              const wrapper = document.getElementById(id).nextElementSibling;\n              if (!wrapper.classList.contains('ts-wrapper')) return;\n              const tags = wrapper.querySelectorAll(_modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.domselectors.component.tomselect.tsdelet);\n              tags.forEach(tag => {\n                init_canceltag(tag);\n              })\n            }\n\n          }\n        }\n        break;\n    }\n    const default_settings = {\n      create: false,\n      minOptions: 0,\n      maxOptions: null,\n      preload: false,\n      hideSelected: true,\n      duplicates: false,\n      allowEmptyOption: true,\n      closeAfterSelect: true,\n      placeholder: (item.placeholder) ? item.placeholder : ((item.dataset.placeholder) ? item.dataset.placeholder : ''),\n      onDropdownClose: function() {\n\n      },\n      shouldLoad: function(query) {\n        return query.length > 2\n      },\n      onItemRemove: function() {\n        return true;\n      },\n      load: function(query, callback) {\n        query = dompurify__WEBPACK_IMPORTED_MODULE_0___default().sanitize(query);\n\n        const self = this;\n        if (self.loading > 10) {\n\n          callback();\n          return;\n        }\n        let url = '';\n        switch (type) {\n          case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.models.user:\n            url = option.url + encodeURIComponent('%' + query + '%');\n            break;\n          case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.models.instr:\n          case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.models.taxo:\n            url = option.url;\n            if (query) url += '?q=' + encodeURIComponent(query);\n\n            break;\n          case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.models.project:\n            url = option.url;\n\n            if (query) url += '?filt_title=' + encodeURIComponent(query); //+ '&filt_instrum=' + encodeURIComponent(query);\n            break;\n        }\n        if (url !== null) fetch(url, (0,_modules_utils_js__WEBPACK_IMPORTED_MODULE_6__.fetchSettings)()).then(response => response.json()).then(json => {\n          if (type === _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.models.project) {\n\n            if (json.data && json.data.length) json = json.data.map(row => {\n              return {\n                id: row[1],\n                text: row[3][0],\n                rights: row[0]\n              }\n\n            });\n          }\n          if (type === _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.models.instr && json.length) json = json.reduce((result, a, v) => {\n            a = dompurify__WEBPACK_IMPORTED_MODULE_0___default().sanitize(a);\n            let obj = {\n              id: a,\n              text: a\n            }\n            result.push(obj);\n\n            return result;\n          }, []);\n\n          if (json.length && typeof json == 'object') json = Object.entries(json);\n          return callback(json);\n\n        }).catch(err => {\n          console.log('tomselect-err', err);\n        });\n      },\n\n      render: {\n        option: function(el, escape) {\n          if (el === undefined || el === null) return ``;\n          // add optgroup\n          const optgroup = (el.hasOwnProperty('optgroup')) ? `data-optgroup=${el.optgroup}` : ``;\n          return `<div class=\"py-2 flex  ${ ((multiple)?'inline-flex':'') } \" ${optgroup} data-value=\"${el[option.settings.valueField]}\">${ escape(el[this.settings.labelField]) }</div>`;\n        },\n        item: function(el, escape) {\n          if (el === undefined || el === null) return ``; // add optgroup\n          const optgroup = (el.optgroup) ? `item-${el.optgroup}` : ``;\n          const inlist = (users_list[el[this.settings.valueField]]) ? `data-inlist` : ``;\n          // add cancel icon for multiple selections\n          //  const cancel = ((multiple) ? `<i class=\"${domselectors.component.tomselect.tsdelet.substr(1)}\"></i>` : ``);\n          // use ts plugin remove_button\n          const cancel = ``;\n          return dompurify__WEBPACK_IMPORTED_MODULE_0___default().sanitize(`<div class=\"${((multiple) ? `flex inline-flex ` : ``) } ${optgroup}\"  data-value=\"${el[this.settings.valueField]}\"  ${inlist}>${ escape(el[this.settings.labelField]) } ${ cancel }</div>`);\n        },\n        no_results: function(data, escape) {\n          return dompurify__WEBPACK_IMPORTED_MODULE_0___default().sanitize('<div class=\"no-results\">' + ((item.dataset.noresults) ? item.dataset.noresults : 'No result found for ') + escape(data.input) + '</div>');\n        },\n\n      }\n    }\n\n    option.settings.plugins = {\n      'clear_button': {\n        title: (item.dataset.clear) ? item.dataset.clear : 'Clear all',\n        html: (data) => {\n          return `<div class=\"${data.className}\" id=\"clear-${id}\" title=\"${data.title}\"><i class=\"icon ${(multiple)?``:'p-[0.125rem]'} icon-x-circle-sm ${(multiple)?``:` opacity-50`}\"></i></div>`;\n        }\n      }\n    }\n    option.settings.onClear = function() {\n      item.tomselect.clear();\n      return true;\n    }\n    if (multiple) {\n      option.settings.plugins = { ...option.settings.plugins,\n        ...{\n          'remove_button': {}\n        }\n\n      };\n      option.settings.plugins = { ...option.settings.plugins,\n        ...{\n          'caret_position': {}\n        }\n\n      };\n    }\n    option.settings = Object.assign(default_settings, option.settings)\n    if (id !== null) {\n      const ts = new (tom_select_dist_js_tom_select_base_min_js__WEBPACK_IMPORTED_MODULE_1___default())('#' + id, option.settings);\n\n      ts.wrapper.classList.remove(_modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.domselectors.component.tomselect.ident);\n      ts.wrapper.classList.remove('js');\n      // add\n      ts.wrapper.setAttribute('data-component', 'tom-select');\n      switch (type) {\n        case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.models.taxo:\n          ts.on('item_add', (v, el) => {\n            if (el !== null) el.classList.add('new');\n            //  el = el.querySelector('.ts-delet');\n            //  if (el !== null) init_canceltag(el);\n          });\n          break;\n        case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.models.project:\n          // add data-noaction just to select a project\n          if (item.dataset.dest) {\n\n            ts.on('item_add', (v, el) => {\n              if (v != item.dataset.value && ts.options[v] && !el.querySelector('a')) {\n                const links = {\n                  \"A\": \"/prj/\",\n                  \"V\": \"/prj/\",\n                  \"M\": \"/gui/prj/edit/\"\n                };\n                const rights = ts.options[v].rights;\n                const keys = Object.keys(rights);\n                if (keys) {\n                  if (keys.length > 1) {\n                    Object.entries(rights).forEach(([k, r]) => {\n                      el.insertAdjacentHTML('beforeend', ` <a data-k=\"${k}\" class=\"small-caps font-normal ml-2\">${r}</a>`);\n                    });\n                    el.querySelectorAll('a').forEach(lk => {\n                      lk.addEventListener('click', (e) => {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        window.open(links[e.target.dataset.k] + v, `_proj${v}`).focus();\n                        ts.removeItem(v);\n                      });\n                    })\n                  } else {\n                    console.log('lik', links[keys[0]])\n                    window.open(links[keys[0]] + v, `_proj${v}`).focus();\n                    ts.removeItem(v);\n                  }\n                }\n              }\n            });\n          }\n          break;\n          /*  case 'user':\n              if (item.dataset.priv) ts.on(\"item_add\", function(v, el) {\n                el = el.querySelector(domselectors.component.tomselect.tsdelet);\n                if (el !== null) init_canceltag(el);\n              });\n              break;*/\n      }\n      return ts;\n    } else console.log('noid');\n\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbW9kdWxlcy9qcy10b20tc2VsZWN0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWtDO0FBQ2dDO0FBQ2dCO0FBQ0Y7QUFDSTtBQUNwRix1RkFBZ0Isa0JBQWtCLG9GQUF1QjtBQUN6RCx1RkFBZ0IsaUJBQWlCLG1GQUFzQjtBQUN2RCx1RkFBZ0IsbUJBQW1CLHFGQUF3QjtBQUNWO0FBR3BCO0FBSVM7QUFDdEM7O0FBRUE7QUFDTztBQUNQLDZCQUE2Qjs7QUFFN0I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsNENBQTRDLG9FQUFZO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0EsV0FBVztBQUNYOztBQUVBO0FBQ0EsV0FBVyw4REFBTTtBQUNqQjtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFdBQVcsOERBQU07QUFDakI7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2YsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyw4REFBTTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLDhEQUFNO0FBQ2pCLFFBQVEsdUZBQWdCO0FBQ3hCO0FBQ0EsU0FBUzs7QUFFVDtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELG9FQUFZO0FBQ2hFO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxnQkFBZ0IseURBQWtCOztBQUVsQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDhEQUFNO0FBQ3JCO0FBQ0E7QUFDQSxlQUFlLDhEQUFNO0FBQ3JCLGVBQWUsOERBQU07QUFDckI7QUFDQTs7QUFFQTtBQUNBLGVBQWUsOERBQU07QUFDckI7O0FBRUEsMEVBQTBFO0FBQzFFO0FBQ0E7QUFDQSxxQ0FBcUMsZ0VBQWE7QUFDbEQsdUJBQXVCLDhEQUFNOztBQUU3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsYUFBYTtBQUNiO0FBQ0EsdUJBQXVCLDhEQUFNO0FBQzdCLGdCQUFnQix5REFBa0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFdBQVc7O0FBRVg7QUFDQTs7QUFFQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1QsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RSxZQUFZO0FBQzFGLDRDQUE0QyxnQ0FBZ0MsSUFBSSxVQUFVLGNBQWMsK0JBQStCLEtBQUssc0NBQXNDO0FBQ2xMLFNBQVM7QUFDVDtBQUNBLDBEQUEwRDtBQUMxRCxtREFBbUQsWUFBWTtBQUMvRDtBQUNBO0FBQ0Esd0RBQXdELG1EQUFtRDtBQUMzRztBQUNBO0FBQ0EsaUJBQWlCLHlEQUFrQixnQkFBZ0IsMENBQTBDLEVBQUUsU0FBUyxpQkFBaUIsNkJBQTZCLEtBQUssT0FBTyxJQUFJLHVDQUF1QyxHQUFHLFFBQVE7QUFDeE4sU0FBUztBQUNUO0FBQ0EsaUJBQWlCLHlEQUFrQjtBQUNuQyxTQUFTOztBQUVUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsZUFBZSxjQUFjLEdBQUcsV0FBVyxXQUFXLG1CQUFtQiw4QkFBOEIsbUJBQW1CLDRCQUE0QjtBQUN0TDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsa0ZBQVM7O0FBRTlCLGtDQUFrQyxvRUFBWTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsOERBQU07QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxhQUFhLDhEQUFNO0FBQ25CO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0VBQXdFLEVBQUUsd0NBQXdDLEVBQUU7QUFDcEgscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLEVBQUU7QUFDN0U7QUFDQSx1QkFBdUI7QUFDdkIscUJBQXFCO0FBQ3JCLG9CQUFvQjtBQUNwQjtBQUNBLDREQUE0RCxFQUFFO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZixvQkFBb0I7QUFDcEI7QUFDQTtBQUNBLE1BQU07O0FBRU47QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL2pzLXRvbS1zZWxlY3QuanM/ZjQwMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRE9NUHVyaWZ5IGZyb20gJ2RvbXB1cmlmeSc7XG5pbXBvcnQgVG9tU2VsZWN0IGZyb20gJ3RvbS1zZWxlY3QvZGlzdC9qcy90b20tc2VsZWN0LmJhc2UubWluLmpzJztcbmltcG9ydCBUb21TZWxlY3RfcmVtb3ZlX2J1dHRvbiBmcm9tICd0b20tc2VsZWN0L2Rpc3QvanMvcGx1Z2lucy9yZW1vdmVfYnV0dG9uLmpzJztcbmltcG9ydCBUb21TZWxlY3RfY2xlYXJfYnV0dG9uIGZyb20gJ3RvbS1zZWxlY3QvZGlzdC9qcy9wbHVnaW5zL2NsZWFyX2J1dHRvbi5qcyc7XG5pbXBvcnQgVG9tU2VsZWN0X2NhcmV0X3Bvc2l0aW9uIGZyb20gJ3RvbS1zZWxlY3QvZGlzdC9qcy9wbHVnaW5zL2NhcmV0X3Bvc2l0aW9uLmpzJztcblRvbVNlbGVjdC5kZWZpbmUoJ3JlbW92ZV9idXR0b24nLCBUb21TZWxlY3RfcmVtb3ZlX2J1dHRvbik7XG5Ub21TZWxlY3QuZGVmaW5lKCdjbGVhcl9idXR0b24nLCBUb21TZWxlY3RfY2xlYXJfYnV0dG9uKTtcblRvbVNlbGVjdC5kZWZpbmUoJ2NhcmV0X3Bvc2l0aW9uJywgVG9tU2VsZWN0X2NhcmV0X3Bvc2l0aW9uKTtcbmltcG9ydCB0b21TZWxlY3Rjc3MgZnJvbSBcIi4uL2Nzcy90b20tc2VsZWN0LmNzc1wiO1xuaW1wb3J0IHtcbiAgZmV0Y2hTZXR0aW5nc1xufSBmcm9tICcuLi9tb2R1bGVzL3V0aWxzLmpzJztcbmltcG9ydCB7XG4gIG1vZGVscyxcbiAgZG9tc2VsZWN0b3JzXG59IGZyb20gJy4uL21vZHVsZXMvbW9kdWxlcy1jb25maWcuanMnO1xubGV0IHVzZXJzX2xpc3QgPSB7fTtcblxuLy8gc2V0dGluZ3MgZm9yIGF1dG9jb21wbGV0ZSBzZWxlY3QgY29tcG9uZW50IC0gdXNlcnMgLCBpbnN0cnVtZW50cyAsIHRheG9uc1xuZXhwb3J0IGNsYXNzIEpzVG9tU2VsZWN0IHtcbiAgYXBwbHlUbyhpdGVtLCBzZXR0aW5ncyA9IHt9LCBzaWJsaW5ncyA9IG51bGwpIHtcblxuICAgIGNvbnN0IGlkID0gaXRlbS5nZXRBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgY29uc3QgbXVsdGlwbGUgPSBpdGVtLmhhc0F0dHJpYnV0ZSgnbXVsdGlwbGUnKTtcbiAgICBjb25zdCB0eXBlID0gaXRlbS5kYXRhc2V0LnR5cGU7XG5cbiAgICBsZXQgb3B0aW9uID0ge1xuICAgICAgICB1cmw6ICcnLFxuICAgICAgICBzZXR0aW5nczogc2V0dGluZ3NcbiAgICAgIH0sXG4gICAgICBpbml0X2NhbmNlbHRhZyA9ICh0YWcpID0+IHtcbiAgICAgICAgdGFnLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICBjb25zdCB2ID0gZS5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoZG9tc2VsZWN0b3JzLmNvbXBvbmVudC50b21zZWxlY3QuaXRlbSkuZGF0YXNldC52YWx1ZTtcbiAgICAgICAgICBpZiAodikge1xuICAgICAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGl0ZW0udG9tc2VsZWN0LnJlbW92ZUl0ZW0odik7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIGlmIChpdGVtLmRhdGFzZXQuY3JlYXRlICYmIGl0ZW0uZGF0YXNldC5jcmVhdGUgPT09ICd0cnVlJykge1xuICAgICAgLy8gIG9wdGlvbi5zZXR0aW5ncy5jcmVhdGUgPSB0cnVlO1xuICAgICAgLy8gICAgb3B0aW9uLnNldHRpbmdzLmNyZWF0ZU9uQmx1ciA9IHRydWU7XG4gICAgICBvcHRpb24uc2V0dGluZ3MuY3JlYXRlID0gdHJ1ZTtcbiAgICAgIG9wdGlvbi5zZXR0aW5ncy5hZGRQcmVjZWRlbmNlID0gdHJ1ZTtcbiAgICAgIGNvbnNvbGUubG9nKCdvcHRpb24nLCBvcHRpb24pXG4gICAgfVxuICAgIC8qLFxuICAgICAgICAgIG9uX2NsZWFyID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIGlmIChpdGVtLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3NlbGVjdCcpXG4gICAgICAgICAgICAgIGl0ZW0ucXVlcnlTZWxlY3RvckFsbCgnb3B0aW9uOmNoZWNrZWQnKS5mb3JFYWNoKG9wdGlvbiA9PiB7XG4gICAgICAgICAgICAgICAgb3B0aW9uLnJlbW92ZUF0dHJpYnV0ZSgnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpdGVtLnNlbGVjdGVkSW5kZXggPSAtMTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH0qL1xuICAgIDtcblxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBtb2RlbHMucHJvamVjdDpcbiAgICAgICAgLy8gZm9yIHRvcCBuYXZpZ2F0aW9uIHNlYXJjaFxuICAgICAgICBvcHRpb24udXJsID0gXCIvZ3VpL3Byamxpc3QvXCI7XG4gICAgICAgIG9wdGlvbi5zZXR0aW5ncyA9IHsgLi4ub3B0aW9uLnNldHRpbmdzLFxuICAgICAgICAgIC4uLntcbiAgICAgICAgICAgIHZhbHVlRmllbGQ6ICdpZCcsXG4gICAgICAgICAgICBzZWFyY2hGaWVsZDogJ3RleHQnLFxuICAgICAgICAgICAgbGFiZWxGaWVsZDogJ3RleHQnLFxuICAgICAgICAgICAgb3Blbk9uRm9jdXM6IGZhbHNlLFxuICAgICAgICAgICAgbWF4SXRlbXM6IDEsXG4gICAgICAgICAgICBhbGxvd0VtcHR5T3B0aW9uOiBmYWxzZSxcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIG1vZGVscy51c2VyOlxuICAgICAgICBvcHRpb24udXJsID0gXCIvYXBpL3VzZXJzL3NlYXJjaD9ieV9uYW1lPVwiO1xuICAgICAgICBvcHRpb24uc2V0dGluZ3MgPSB7IC4uLm9wdGlvbi5zZXR0aW5ncyxcbiAgICAgICAgICAuLi57XG4gICAgICAgICAgICB2YWx1ZUZpZWxkOiAnaWQnLFxuICAgICAgICAgICAgc2VhcmNoRmllbGQ6ICduYW1lJyxcbiAgICAgICAgICAgIGxhYmVsRmllbGQ6ICduYW1lJyxcbiAgICAgICAgICAgIG9uSW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGl0ZW0udG9tc2VsZWN0Lml0ZW1zLmZvckVhY2goZSA9PiB7XG4gICAgICAgICAgICAgICAgdXNlcnNfbGlzdFtlXSA9IHRydWU7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uSXRlbUFkZDogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICBpZiAoZSA9PT0gXCJcIikgcmV0dXJuO1xuICAgICAgICAgICAgICBpZiAodXNlcnNfbGlzdFtlXSkge1xuICAgICAgICAgICAgICAgIHVzZXJzX2xpc3RbZV0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAobXVsdGlwbGUgfHwgIXRoaXMucmV2ZXJ0U2V0dGluZ3MgfHwgdGhpcy5yZXZlcnRTZXR0aW5ncy50YWJJbmRleCA8IDAgfHwgIWl0ZW0ub3B0aW9ucy5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgICAgICAgICBjb25zdCByZXZlcnQgPSBpdGVtLm9wdGlvbnNbdGhpcy5yZXZlcnRTZXR0aW5ncy50YWJJbmRleF0udmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVPcHRpb24oZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRJdGVtKHJldmVydCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB1c2Vyc19saXN0W2VdID0gdHJ1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkl0ZW1SZW1vdmU6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgaWYgKHVzZXJzX2xpc3RbZV0pIGRlbGV0ZSB1c2Vyc19saXN0W2VdO1xuICAgICAgICAgICAgICBpZiAobXVsdGlwbGUgfHwgIXRoaXMucmV2ZXJ0U2V0dGluZ3MgfHwgKHRoaXMucmV2ZXJ0U2V0dGluZ3MuaW5uZXJIVE1MID09PSAnJyAmJiB0aGlzLnJldmVydFNldHRpbmdzLnRhYkluZGV4ID09PSAwKSB8fCB0aGlzLnJldmVydFNldHRpbmdzLnRhYkluZGV4IDwgMCkgcmV0dXJuO1xuICAgICAgICAgICAgICBjb25zdCByZXZlcnQgPSBpdGVtLm9wdGlvbnNbdGhpcy5yZXZlcnRTZXR0aW5ncy50YWJJbmRleF0udmFsdWU7XG4gICAgICAgICAgICAgIGlmICh1c2Vyc19saXN0W3JldmVydF0gIT09IHVuZGVmaW5lZCkgZGVsZXRlIHVzZXJzX2xpc3RbcmV2ZXJ0XTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgbW9kZWxzLmluc3RyOlxuICAgICAgICBvcHRpb24udXJsID0gXCIvc2VhcmNoL2luc3RydW1lbnRzXCI7XG4gICAgICAgIG9wdGlvbi5zZXR0aW5ncyA9IHtcbiAgICAgICAgICB2YWx1ZUZpZWxkOiAnaWQnLFxuICAgICAgICAgIGxhYmVsRmllbGQ6ICd0ZXh0JyxcbiAgICAgICAgICBzZWFyY2hGaWVsZDogJ2lkJyxcbiAgICAgICAgICBtYXhJdGVtczogMSxcbiAgICAgICAgICBwcmVsb2FkOiB0cnVlXG4gICAgICAgIH07XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBtb2RlbHMudGF4bzpcbiAgICAgICAgVG9tU2VsZWN0LmRlZmluZSgnbm9fY2xvc2UnLCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5jbG9zZSA9ICgpID0+IHt9O1xuICAgICAgICB9KTtcblxuICAgICAgICBvcHRpb24udXJsID0gXCIvc2VhcmNoL3RheG9cIjtcbiAgICAgICAgb3B0aW9uLnNldHRpbmdzID0geyAuLi5vcHRpb24uc2V0dGluZ3MsXG4gICAgICAgICAgLi4ue1xuICAgICAgICAgICAgdmFsdWVGaWVsZDogJ2lkJyxcbiAgICAgICAgICAgIGxhYmVsRmllbGQ6ICd0ZXh0JyxcbiAgICAgICAgICAgIHNlYXJjaEZpZWxkOiAndGV4dCcsXG4gICAgICAgICAgICBjbG9zZUFmdGVyU2VsZWN0OiBmYWxzZSxcbiAgICAgICAgICAgIG9uSW5pdGlhbGl6ZTogKCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgICAgICAgaWYgKCF3cmFwcGVyLmNsYXNzTGlzdC5jb250YWlucygndHMtd3JhcHBlcicpKSByZXR1cm47XG4gICAgICAgICAgICAgIGNvbnN0IHRhZ3MgPSB3cmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoZG9tc2VsZWN0b3JzLmNvbXBvbmVudC50b21zZWxlY3QudHNkZWxldCk7XG4gICAgICAgICAgICAgIHRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgICAgICAgICAgIGluaXRfY2FuY2VsdGFnKHRhZyk7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNvbnN0IGRlZmF1bHRfc2V0dGluZ3MgPSB7XG4gICAgICBjcmVhdGU6IGZhbHNlLFxuICAgICAgbWluT3B0aW9uczogMCxcbiAgICAgIG1heE9wdGlvbnM6IG51bGwsXG4gICAgICBwcmVsb2FkOiBmYWxzZSxcbiAgICAgIGhpZGVTZWxlY3RlZDogdHJ1ZSxcbiAgICAgIGR1cGxpY2F0ZXM6IGZhbHNlLFxuICAgICAgYWxsb3dFbXB0eU9wdGlvbjogdHJ1ZSxcbiAgICAgIGNsb3NlQWZ0ZXJTZWxlY3Q6IHRydWUsXG4gICAgICBwbGFjZWhvbGRlcjogKGl0ZW0ucGxhY2Vob2xkZXIpID8gaXRlbS5wbGFjZWhvbGRlciA6ICgoaXRlbS5kYXRhc2V0LnBsYWNlaG9sZGVyKSA/IGl0ZW0uZGF0YXNldC5wbGFjZWhvbGRlciA6ICcnKSxcbiAgICAgIG9uRHJvcGRvd25DbG9zZTogZnVuY3Rpb24oKSB7XG5cbiAgICAgIH0sXG4gICAgICBzaG91bGRMb2FkOiBmdW5jdGlvbihxdWVyeSkge1xuICAgICAgICByZXR1cm4gcXVlcnkubGVuZ3RoID4gMlxuICAgICAgfSxcbiAgICAgIG9uSXRlbVJlbW92ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSxcbiAgICAgIGxvYWQ6IGZ1bmN0aW9uKHF1ZXJ5LCBjYWxsYmFjaykge1xuICAgICAgICBxdWVyeSA9IERPTVB1cmlmeS5zYW5pdGl6ZShxdWVyeSk7XG5cbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICAgIGlmIChzZWxmLmxvYWRpbmcgPiAxMCkge1xuXG4gICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHVybCA9ICcnO1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICBjYXNlIG1vZGVscy51c2VyOlxuICAgICAgICAgICAgdXJsID0gb3B0aW9uLnVybCArIGVuY29kZVVSSUNvbXBvbmVudCgnJScgKyBxdWVyeSArICclJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIG1vZGVscy5pbnN0cjpcbiAgICAgICAgICBjYXNlIG1vZGVscy50YXhvOlxuICAgICAgICAgICAgdXJsID0gb3B0aW9uLnVybDtcbiAgICAgICAgICAgIGlmIChxdWVyeSkgdXJsICs9ICc/cT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHF1ZXJ5KTtcblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBtb2RlbHMucHJvamVjdDpcbiAgICAgICAgICAgIHVybCA9IG9wdGlvbi51cmw7XG5cbiAgICAgICAgICAgIGlmIChxdWVyeSkgdXJsICs9ICc/ZmlsdF90aXRsZT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHF1ZXJ5KTsgLy8rICcmZmlsdF9pbnN0cnVtPScgKyBlbmNvZGVVUklDb21wb25lbnQocXVlcnkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVybCAhPT0gbnVsbCkgZmV0Y2godXJsLCBmZXRjaFNldHRpbmdzKCkpLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKS50aGVuKGpzb24gPT4ge1xuICAgICAgICAgIGlmICh0eXBlID09PSBtb2RlbHMucHJvamVjdCkge1xuXG4gICAgICAgICAgICBpZiAoanNvbi5kYXRhICYmIGpzb24uZGF0YS5sZW5ndGgpIGpzb24gPSBqc29uLmRhdGEubWFwKHJvdyA9PiB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaWQ6IHJvd1sxXSxcbiAgICAgICAgICAgICAgICB0ZXh0OiByb3dbM11bMF0sXG4gICAgICAgICAgICAgICAgcmlnaHRzOiByb3dbMF1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHR5cGUgPT09IG1vZGVscy5pbnN0ciAmJiBqc29uLmxlbmd0aCkganNvbiA9IGpzb24ucmVkdWNlKChyZXN1bHQsIGEsIHYpID0+IHtcbiAgICAgICAgICAgIGEgPSBET01QdXJpZnkuc2FuaXRpemUoYSk7XG4gICAgICAgICAgICBsZXQgb2JqID0ge1xuICAgICAgICAgICAgICBpZDogYSxcbiAgICAgICAgICAgICAgdGV4dDogYVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzdWx0LnB1c2gob2JqKTtcblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICB9LCBbXSk7XG5cbiAgICAgICAgICBpZiAoanNvbi5sZW5ndGggJiYgdHlwZW9mIGpzb24gPT0gJ29iamVjdCcpIGpzb24gPSBPYmplY3QuZW50cmllcyhqc29uKTtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2soanNvbik7XG5cbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZygndG9tc2VsZWN0LWVycicsIGVycik7XG4gICAgICAgIH0pO1xuICAgICAgfSxcblxuICAgICAgcmVuZGVyOiB7XG4gICAgICAgIG9wdGlvbjogZnVuY3Rpb24oZWwsIGVzY2FwZSkge1xuICAgICAgICAgIGlmIChlbCA9PT0gdW5kZWZpbmVkIHx8IGVsID09PSBudWxsKSByZXR1cm4gYGA7XG4gICAgICAgICAgLy8gYWRkIG9wdGdyb3VwXG4gICAgICAgICAgY29uc3Qgb3B0Z3JvdXAgPSAoZWwuaGFzT3duUHJvcGVydHkoJ29wdGdyb3VwJykpID8gYGRhdGEtb3B0Z3JvdXA9JHtlbC5vcHRncm91cH1gIDogYGA7XG4gICAgICAgICAgcmV0dXJuIGA8ZGl2IGNsYXNzPVwicHktMiBmbGV4ICAkeyAoKG11bHRpcGxlKT8naW5saW5lLWZsZXgnOicnKSB9IFwiICR7b3B0Z3JvdXB9IGRhdGEtdmFsdWU9XCIke2VsW29wdGlvbi5zZXR0aW5ncy52YWx1ZUZpZWxkXX1cIj4keyBlc2NhcGUoZWxbdGhpcy5zZXR0aW5ncy5sYWJlbEZpZWxkXSkgfTwvZGl2PmA7XG4gICAgICAgIH0sXG4gICAgICAgIGl0ZW06IGZ1bmN0aW9uKGVsLCBlc2NhcGUpIHtcbiAgICAgICAgICBpZiAoZWwgPT09IHVuZGVmaW5lZCB8fCBlbCA9PT0gbnVsbCkgcmV0dXJuIGBgOyAvLyBhZGQgb3B0Z3JvdXBcbiAgICAgICAgICBjb25zdCBvcHRncm91cCA9IChlbC5vcHRncm91cCkgPyBgaXRlbS0ke2VsLm9wdGdyb3VwfWAgOiBgYDtcbiAgICAgICAgICBjb25zdCBpbmxpc3QgPSAodXNlcnNfbGlzdFtlbFt0aGlzLnNldHRpbmdzLnZhbHVlRmllbGRdXSkgPyBgZGF0YS1pbmxpc3RgIDogYGA7XG4gICAgICAgICAgLy8gYWRkIGNhbmNlbCBpY29uIGZvciBtdWx0aXBsZSBzZWxlY3Rpb25zXG4gICAgICAgICAgLy8gIGNvbnN0IGNhbmNlbCA9ICgobXVsdGlwbGUpID8gYDxpIGNsYXNzPVwiJHtkb21zZWxlY3RvcnMuY29tcG9uZW50LnRvbXNlbGVjdC50c2RlbGV0LnN1YnN0cigxKX1cIj48L2k+YCA6IGBgKTtcbiAgICAgICAgICAvLyB1c2UgdHMgcGx1Z2luIHJlbW92ZV9idXR0b25cbiAgICAgICAgICBjb25zdCBjYW5jZWwgPSBgYDtcbiAgICAgICAgICByZXR1cm4gRE9NUHVyaWZ5LnNhbml0aXplKGA8ZGl2IGNsYXNzPVwiJHsoKG11bHRpcGxlKSA/IGBmbGV4IGlubGluZS1mbGV4IGAgOiBgYCkgfSAke29wdGdyb3VwfVwiICBkYXRhLXZhbHVlPVwiJHtlbFt0aGlzLnNldHRpbmdzLnZhbHVlRmllbGRdfVwiICAke2lubGlzdH0+JHsgZXNjYXBlKGVsW3RoaXMuc2V0dGluZ3MubGFiZWxGaWVsZF0pIH0gJHsgY2FuY2VsIH08L2Rpdj5gKTtcbiAgICAgICAgfSxcbiAgICAgICAgbm9fcmVzdWx0czogZnVuY3Rpb24oZGF0YSwgZXNjYXBlKSB7XG4gICAgICAgICAgcmV0dXJuIERPTVB1cmlmeS5zYW5pdGl6ZSgnPGRpdiBjbGFzcz1cIm5vLXJlc3VsdHNcIj4nICsgKChpdGVtLmRhdGFzZXQubm9yZXN1bHRzKSA/IGl0ZW0uZGF0YXNldC5ub3Jlc3VsdHMgOiAnTm8gcmVzdWx0IGZvdW5kIGZvciAnKSArIGVzY2FwZShkYXRhLmlucHV0KSArICc8L2Rpdj4nKTtcbiAgICAgICAgfSxcblxuICAgICAgfVxuICAgIH1cblxuICAgIG9wdGlvbi5zZXR0aW5ncy5wbHVnaW5zID0ge1xuICAgICAgJ2NsZWFyX2J1dHRvbic6IHtcbiAgICAgICAgdGl0bGU6IChpdGVtLmRhdGFzZXQuY2xlYXIpID8gaXRlbS5kYXRhc2V0LmNsZWFyIDogJ0NsZWFyIGFsbCcsXG4gICAgICAgIGh0bWw6IChkYXRhKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGA8ZGl2IGNsYXNzPVwiJHtkYXRhLmNsYXNzTmFtZX1cIiBpZD1cImNsZWFyLSR7aWR9XCIgdGl0bGU9XCIke2RhdGEudGl0bGV9XCI+PGkgY2xhc3M9XCJpY29uICR7KG11bHRpcGxlKT9gYDoncC1bMC4xMjVyZW1dJ30gaWNvbi14LWNpcmNsZS1zbSAkeyhtdWx0aXBsZSk/YGA6YCBvcGFjaXR5LTUwYH1cIj48L2k+PC9kaXY+YDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBvcHRpb24uc2V0dGluZ3Mub25DbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgICAgaXRlbS50b21zZWxlY3QuY2xlYXIoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAobXVsdGlwbGUpIHtcbiAgICAgIG9wdGlvbi5zZXR0aW5ncy5wbHVnaW5zID0geyAuLi5vcHRpb24uc2V0dGluZ3MucGx1Z2lucyxcbiAgICAgICAgLi4ue1xuICAgICAgICAgICdyZW1vdmVfYnV0dG9uJzoge31cbiAgICAgICAgfVxuXG4gICAgICB9O1xuICAgICAgb3B0aW9uLnNldHRpbmdzLnBsdWdpbnMgPSB7IC4uLm9wdGlvbi5zZXR0aW5ncy5wbHVnaW5zLFxuICAgICAgICAuLi57XG4gICAgICAgICAgJ2NhcmV0X3Bvc2l0aW9uJzoge31cbiAgICAgICAgfVxuXG4gICAgICB9O1xuICAgIH1cbiAgICBvcHRpb24uc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKGRlZmF1bHRfc2V0dGluZ3MsIG9wdGlvbi5zZXR0aW5ncylcbiAgICBpZiAoaWQgIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IHRzID0gbmV3IFRvbVNlbGVjdCgnIycgKyBpZCwgb3B0aW9uLnNldHRpbmdzKTtcblxuICAgICAgdHMud3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKGRvbXNlbGVjdG9ycy5jb21wb25lbnQudG9tc2VsZWN0LmlkZW50KTtcbiAgICAgIHRzLndyYXBwZXIuY2xhc3NMaXN0LnJlbW92ZSgnanMnKTtcbiAgICAgIC8vIGFkZFxuICAgICAgdHMud3JhcHBlci5zZXRBdHRyaWJ1dGUoJ2RhdGEtY29tcG9uZW50JywgJ3RvbS1zZWxlY3QnKTtcbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIG1vZGVscy50YXhvOlxuICAgICAgICAgIHRzLm9uKCdpdGVtX2FkZCcsICh2LCBlbCkgPT4ge1xuICAgICAgICAgICAgaWYgKGVsICE9PSBudWxsKSBlbC5jbGFzc0xpc3QuYWRkKCduZXcnKTtcbiAgICAgICAgICAgIC8vICBlbCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy50cy1kZWxldCcpO1xuICAgICAgICAgICAgLy8gIGlmIChlbCAhPT0gbnVsbCkgaW5pdF9jYW5jZWx0YWcoZWwpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIG1vZGVscy5wcm9qZWN0OlxuICAgICAgICAgIC8vIGFkZCBkYXRhLW5vYWN0aW9uIGp1c3QgdG8gc2VsZWN0IGEgcHJvamVjdFxuICAgICAgICAgIGlmIChpdGVtLmRhdGFzZXQuZGVzdCkge1xuXG4gICAgICAgICAgICB0cy5vbignaXRlbV9hZGQnLCAodiwgZWwpID0+IHtcbiAgICAgICAgICAgICAgaWYgKHYgIT0gaXRlbS5kYXRhc2V0LnZhbHVlICYmIHRzLm9wdGlvbnNbdl0gJiYgIWVsLnF1ZXJ5U2VsZWN0b3IoJ2EnKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtzID0ge1xuICAgICAgICAgICAgICAgICAgXCJBXCI6IFwiL3Byai9cIixcbiAgICAgICAgICAgICAgICAgIFwiVlwiOiBcIi9wcmovXCIsXG4gICAgICAgICAgICAgICAgICBcIk1cIjogXCIvZ3VpL3Byai9lZGl0L1wiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCByaWdodHMgPSB0cy5vcHRpb25zW3ZdLnJpZ2h0cztcbiAgICAgICAgICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMocmlnaHRzKTtcbiAgICAgICAgICAgICAgICBpZiAoa2V5cykge1xuICAgICAgICAgICAgICAgICAgaWYgKGtleXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuZW50cmllcyhyaWdodHMpLmZvckVhY2goKFtrLCByXSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIGVsLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgYCA8YSBkYXRhLWs9XCIke2t9XCIgY2xhc3M9XCJzbWFsbC1jYXBzIGZvbnQtbm9ybWFsIG1sLTJcIj4ke3J9PC9hPmApO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgZWwucXVlcnlTZWxlY3RvckFsbCgnYScpLmZvckVhY2gobGsgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIGxrLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3BlbihsaW5rc1tlLnRhcmdldC5kYXRhc2V0LmtdICsgdiwgYF9wcm9qJHt2fWApLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cy5yZW1vdmVJdGVtKHYpO1xuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2xpaycsIGxpbmtzW2tleXNbMF1dKVxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3BlbihsaW5rc1trZXlzWzBdXSArIHYsIGBfcHJvaiR7dn1gKS5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICB0cy5yZW1vdmVJdGVtKHYpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIC8qICBjYXNlICd1c2VyJzpcbiAgICAgICAgICAgICAgaWYgKGl0ZW0uZGF0YXNldC5wcml2KSB0cy5vbihcIml0ZW1fYWRkXCIsIGZ1bmN0aW9uKHYsIGVsKSB7XG4gICAgICAgICAgICAgICAgZWwgPSBlbC5xdWVyeVNlbGVjdG9yKGRvbXNlbGVjdG9ycy5jb21wb25lbnQudG9tc2VsZWN0LnRzZGVsZXQpO1xuICAgICAgICAgICAgICAgIGlmIChlbCAhPT0gbnVsbCkgaW5pdF9jYW5jZWx0YWcoZWwpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgYnJlYWs7Ki9cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cztcbiAgICB9IGVsc2UgY29uc29sZS5sb2coJ25vaWQnKTtcblxuICB9XG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/modules/js-tom-select.js\n")}}]);
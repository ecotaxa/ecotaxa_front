/*! For license information please see src_modules_js-tom-select_js.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([["src_modules_js-tom-select_js"],{"./node_modules/mini-css-extract-plugin/dist/loader.js??ruleSet[1].rules[2].use[1]!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/postcss-loader/dist/cjs.js!./src/css/tom-select.css":()=>{eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4vZGlzdC9sb2FkZXIuanM/P3J1bGVTZXRbMV0ucnVsZXNbMl0udXNlWzFdIS4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMV0ucnVsZXNbMl0udXNlWzJdIS4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3JjL2Nzcy90b20tc2VsZWN0LmNzcy5qcyIsIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jc3MvdG9tLXNlbGVjdC5jc3M/ZDQwMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/mini-css-extract-plugin/dist/loader.js??ruleSet[1].rules[2].use[1]!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/postcss-loader/dist/cjs.js!./src/css/tom-select.css\n")},"./src/css/tom-select.css":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleDomAPI.js */ "./node_modules/style-loader/dist/runtime/styleDomAPI.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertBySelector.js */ "./node_modules/style-loader/dist/runtime/insertBySelector.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertStyleElement.js */ "./node_modules/style-loader/dist/runtime/insertStyleElement.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleTagTransform.js */ "./node_modules/style-loader/dist/runtime/styleTagTransform.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../node_modules/mini-css-extract-plugin/dist/loader.js??ruleSet[1].rules[2].use[1]!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../node_modules/postcss-loader/dist/cjs.js!./tom-select.css */ "./node_modules/mini-css-extract-plugin/dist/loader.js??ruleSet[1].rules[2].use[1]!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/postcss-loader/dist/cjs.js!./src/css/tom-select.css");\n/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6__) if(__WEBPACK_IMPORT_KEY__ !== "default") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\n\n      options.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");\n    \noptions.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()((_node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6___default()), options);\n\n\n\n\n       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((_node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6___default()) && (_node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6___default().locals) ? (_node_modules_mini_css_extract_plugin_dist_loader_js_ruleSet_1_rules_2_use_1_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_2_use_2_node_modules_postcss_loader_dist_cjs_js_tom_select_css__WEBPACK_IMPORTED_MODULE_6___default().locals) : undefined);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY3NzL3RvbS1zZWxlY3QuY3NzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxNQUFrRztBQUNsRyxNQUF3RjtBQUN4RixNQUErRjtBQUMvRixNQUFrSDtBQUNsSCxNQUEyRztBQUMzRyxNQUEyRztBQUMzRyxNQUEyUTtBQUMzUTtBQUNBOztBQUVBOztBQUVBLDRCQUE0QixxR0FBbUI7QUFDL0Msd0JBQXdCLGtIQUFhOztBQUVyQyx1QkFBdUIsdUdBQWE7QUFDcEM7QUFDQSxpQkFBaUIsK0ZBQU07QUFDdkIsNkJBQTZCLHNHQUFrQjs7QUFFL0MsYUFBYSwwR0FBRyxDQUFDLHdPQUFPOzs7O0FBSXFOO0FBQzdPLE9BQU8saUVBQWUsd09BQU8sSUFBSSwrT0FBYyxHQUFHLCtPQUFjLFlBQVksRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jc3MvdG9tLXNlbGVjdC5jc3M/YTVlOCJdLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9taW5pLWNzcy1leHRyYWN0LXBsdWdpbi9kaXN0L2xvYWRlci5qcz8/cnVsZVNldFsxXS5ydWxlc1syXS51c2VbMV0hLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMV0ucnVsZXNbMl0udXNlWzJdIS4uLy4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3RvbS1zZWxlY3QuY3NzXCI7XG4gICAgICBcbiAgICAgIFxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtID0gc3R5bGVUYWdUcmFuc2Zvcm1Gbjtcbm9wdGlvbnMuc2V0QXR0cmlidXRlcyA9IHNldEF0dHJpYnV0ZXM7XG5cbiAgICAgIG9wdGlvbnMuaW5zZXJ0ID0gaW5zZXJ0Rm4uYmluZChudWxsLCBcImhlYWRcIik7XG4gICAgXG5vcHRpb25zLmRvbUFQSSA9IGRvbUFQSTtcbm9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50ID0gaW5zZXJ0U3R5bGVFbGVtZW50O1xuXG52YXIgdXBkYXRlID0gQVBJKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0ICogZnJvbSBcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL21pbmktY3NzLWV4dHJhY3QtcGx1Z2luL2Rpc3QvbG9hZGVyLmpzPz9ydWxlU2V0WzFdLnJ1bGVzWzJdLnVzZVsxXSEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cnVsZVNldFsxXS5ydWxlc1syXS51c2VbMl0hLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vdG9tLXNlbGVjdC5jc3NcIjtcbiAgICAgICBleHBvcnQgZGVmYXVsdCBjb250ZW50ICYmIGNvbnRlbnQubG9jYWxzID8gY29udGVudC5sb2NhbHMgOiB1bmRlZmluZWQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/css/tom-select.css\n')},"./src/modules/js-tom-select.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsTomSelect: () => (/* binding */ JsTomSelect)\n/* harmony export */ });\n/* harmony import */ var dompurify__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dompurify */ \"./node_modules/dompurify/dist/purify.js\");\n/* harmony import */ var dompurify__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dompurify__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var tom_select_dist_js_tom_select_base_min_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tom-select/dist/js/tom-select.base.min.js */ \"./node_modules/tom-select/dist/js/tom-select.base.min.js\");\n/* harmony import */ var tom_select_dist_js_tom_select_base_min_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(tom_select_dist_js_tom_select_base_min_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var tom_select_dist_js_plugins_remove_button_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tom-select/dist/js/plugins/remove_button.js */ \"./node_modules/tom-select/dist/js/plugins/remove_button.js\");\n/* harmony import */ var tom_select_dist_js_plugins_remove_button_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(tom_select_dist_js_plugins_remove_button_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var tom_select_dist_js_plugins_clear_button_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tom-select/dist/js/plugins/clear_button.js */ \"./node_modules/tom-select/dist/js/plugins/clear_button.js\");\n/* harmony import */ var tom_select_dist_js_plugins_clear_button_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(tom_select_dist_js_plugins_clear_button_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var tom_select_dist_js_plugins_caret_position_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! tom-select/dist/js/plugins/caret_position.js */ \"./node_modules/tom-select/dist/js/plugins/caret_position.js\");\n/* harmony import */ var tom_select_dist_js_plugins_caret_position_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(tom_select_dist_js_plugins_caret_position_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _css_tom_select_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../css/tom-select.css */ \"./src/css/tom-select.css\");\n/* harmony import */ var _modules_utils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../modules/utils.js */ \"./src/modules/utils.js\");\n/* harmony import */ var _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../modules/modules-config.js */ \"./src/modules/modules-config.js\");\n\n\n\n\n\ntom_select_dist_js_tom_select_base_min_js__WEBPACK_IMPORTED_MODULE_1___default().define('remove_button', (tom_select_dist_js_plugins_remove_button_js__WEBPACK_IMPORTED_MODULE_2___default()));\ntom_select_dist_js_tom_select_base_min_js__WEBPACK_IMPORTED_MODULE_1___default().define('clear_button', (tom_select_dist_js_plugins_clear_button_js__WEBPACK_IMPORTED_MODULE_3___default()));\ntom_select_dist_js_tom_select_base_min_js__WEBPACK_IMPORTED_MODULE_1___default().define('caret_position', (tom_select_dist_js_plugins_caret_position_js__WEBPACK_IMPORTED_MODULE_4___default()));\n\n\n\nlet users_list = {};\n\n// settings for autocomplete select component - users , instruments , taxons\nclass JsTomSelect {\n  applyTo(item, settings = {}, siblings = null) {\n\n    const id = item.getAttribute('id');\n    const multiple = item.hasAttribute('multiple');\n    const type = item.dataset.type;\n    let option = {\n        url: '',\n        settings: settings\n      },\n      init_canceltag = (tag) => {\n        tag.addEventListener('click', (e) => {\n          const v = e.currentTarget.closest(_modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.domselectors.component.tomselect.item).dataset.value;\n          if (v) {\n            e.stopImmediatePropagation();\n            item.tomselect.removeItem(v);\n          }\n        })\n      },\n      on_clear = function() {\n        if (item.tagName.toLowerCase() === 'select') item.selectedIndex = -1;\n      };\n\n    switch (type) {\n      case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.models.project:\n        option.url = \"/gui/prjlist/\";\n        option.settings = { ...option.settings,\n          ...{\n            valueField: 'id',\n            searchField: 'text',\n            labelField: 'text',\n            openOnFocus: false,\n            maxItems: 1,\n            allowEmptyOption: false,\n            onItemAdd: function(e) {\n              if (e != item.dataset.value) {\n                let href = window.location.href.split('/');\n                href.pop();\n                href = href.join('/') + '/' + e;\n\n                window.open(href, '_blank').focus();\n              }\n              this.removeItem(e);\n              return;\n            }\n          }\n        };\n        break;\n\n      case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.models.user:\n        option.url = \"/api/users/search?by_name=\";\n        option.settings = { ...option.settings,\n          ...{\n            valueField: 'id',\n            searchField: 'name',\n            labelField: 'name',\n            onInitialize: function() {\n              item.tomselect.items.forEach(e => {\n                users_list[e] = true;\n              });\n            },\n            onItemAdd: function(e) {\n              if (e === \"\") return;\n              if (users_list[e]) {\n                users_list[e] = false;\n                if (multiple || !this.revertSettings || this.revertSettings.tabIndex < 0 || !item.options.length) return;\n                const revert = item.options[this.revertSettings.tabIndex].value;\n                this.removeOption(e);\n                this.addItem(revert);\n              } else users_list[e] = true;\n            },\n            onItemRemove: function(e) {\n              if (users_list[e]) delete users_list[e];\n              if (multiple || !this.revertSettings || (this.revertSettings.innerHTML === '' && this.revertSettings.tabIndex === 0) || this.revertSettings.tabIndex < 0) return;\n              const revert = item.options[this.revertSettings.tabIndex].value;\n              if (users_list[revert] !== undefined) delete users_list[revert];\n\n            }\n\n          }\n        };\n        break;\n      case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.models.instr:\n        option.url = \"/search/instruments\";\n        option.settings = {\n          valueField: 'id',\n          labelField: 'text',\n          searchField: 'id',\n          maxItems: 1,\n          preload: true\n        };\n        break;\n      case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.models.taxo:\n        tom_select_dist_js_tom_select_base_min_js__WEBPACK_IMPORTED_MODULE_1___default().define('no_close', () => {\n          this.close = () => {};\n        });\n\n        option.url = \"/search/taxo\";\n        option.settings = {\n          valueField: 'id',\n          labelField: 'text',\n          searchField: 'text',\n          onInitialize: () => {\n            const wrapper = document.getElementById(id).nextElementSibling;\n            if (!wrapper.classList.contains('ts-wrapper')) return;\n            const tags = wrapper.querySelectorAll(_modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.domselectors.component.tomselect.tsdelet);\n            tags.forEach(tag => {\n              init_canceltag(tag);\n            })\n          }\n\n        }\n        break;\n    }\n    const default_settings = {\n      create: false,\n      maxOptions: null,\n      preload: false,\n      hideSelected: true,\n      duplicates: false,\n      allowEmptyOption: true,\n      closeAfterSelect: true,\n      placeholder: (item.placeholder) ? item.placeholder : ((item.dataset.placeholder) ? item.dataset.placeholder : ''),\n      onDropdownClose: function() {\n\n      },\n      shouldLoad: function(query) {\n        return query.length > 2\n      },\n      onItemRemove: function() {\n        if (this.items.length === 0) on_clear();\n      },\n      load: function(query, callback) {\n        query = dompurify__WEBPACK_IMPORTED_MODULE_0___default().sanitize(query);\n\n        const self = this;\n        if (self.loading > 10) {\n\n          callback();\n          return;\n        }\n        let url = '';\n        switch (type) {\n          case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.models.user:\n            url = option.url + encodeURIComponent('%' + query + '%');\n            break;\n          case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.models.instr:\n          case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.models.taxo:\n            url = option.url;\n            if (query) url += '?q=' + encodeURIComponent(query);\n\n            break;\n          case _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.models.project:\n            url = option.url;\n\n            if (query) url += '?filt_title=' + encodeURIComponent(query); //+ '&filt_instrum=' + encodeURIComponent(query);\n            break;\n        }\n        if (url !== null) fetch(url, (0,_modules_utils_js__WEBPACK_IMPORTED_MODULE_6__.fetchSettings)()).then(response => response.json()).then(json => {\n          if (type === _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.models.project) {\n            if (json.data && json.data.length) json = json.data.map(row => {\n              return {\n                id: row[1],\n                text: row[3][0]\n              }\n\n            });\n          }\n          if (type === _modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.models.instr && json.length) json = json.reduce((result, a, v) => {\n            a = dompurify__WEBPACK_IMPORTED_MODULE_0___default().sanitize(a);\n            let obj = {\n              id: a,\n              text: a\n            }\n            result.push(obj);\n\n            return result;\n          }, []);\n\n          if (json.length && typeof json == 'object') json = Object.entries(json);\n          return callback(json);\n\n        }).catch(err => {\n          console.log('tomselect-err', err);\n        });\n      },\n\n      render: {\n        option: function(el, escape) {\n          if (el === undefined || el === null) return ``;\n          // add optgroup\n          const optgroup = (el.hasOwnProperty('optgroup')) ? `data-optgroup=${el.optgroup}` : ``;\n          return `<div class=\"py-2 flex  ${ ((multiple)?'inline-flex':'') } \" ${optgroup} data-value=\"${el[option.settings.valueField]}\">${ escape(el[this.settings.labelField]) }</div>`;\n        },\n        item: function(el, escape) {\n          if (el === undefined || el === null) return ``; // add optgroup\n          const optgroup = (el.optgroup) ? `item-${el.optgroup}` : ``;\n          const inlist = (users_list[el[this.settings.valueField]]) ? `data-inlist` : ``;\n          // add cancel icon for multiple selections\n          //  const cancel = ((multiple) ? `<i class=\"${domselectors.component.tomselect.tsdelet.substr(1)}\"></i>` : ``);\n          // use ts plugin remove_button\n          const cancel = ``;\n          return dompurify__WEBPACK_IMPORTED_MODULE_0___default().sanitize(`<div class=\"${((multiple) ? `flex inline-flex ` : ``) } ${optgroup}\"  data-value=\"${el[this.settings.valueField]}\"  ${inlist}>${ escape(el[this.settings.labelField])} ${ cancel }</div>`);\n        },\n        no_results: function(data, escape) {\n          return dompurify__WEBPACK_IMPORTED_MODULE_0___default().sanitize('<div class=\"no-results\">' + ((item.dataset.noresults) ? item.dataset.noresults : 'No result found for ') + escape(data.input) + '</div>');\n        },\n\n      }\n    }\n    option.settings.plugins = {\n      'clear_button': {\n        title: (item.dataset.clear) ? item.dataset.clear : 'Clear all',\n        html: (data) => {\n          return `<div class=\"${data.className}\" id=\"clear-${id}\" title=\"${data.title}\"><i class=\"icon ${(multiple)?``:'p-[0.125rem]'} icon-backspace-sm\"></i></div>`;\n        }\n      }\n    }\n    option.settings.onClear = function() {\n      on_clear();\n    }\n    if (multiple) {\n      option.settings.plugins = { ...option.settings.plugins,\n        ...{\n          'remove_button': {}\n        }\n\n      };\n      option.settings.plugins = { ...option.settings.plugins,\n        ...{\n          'caret_position': {}\n        }\n\n      };\n    }\n    option.settings = Object.assign(default_settings, option.settings)\n    if (id !== null) {\n      const ts = new (tom_select_dist_js_tom_select_base_min_js__WEBPACK_IMPORTED_MODULE_1___default())('#' + id, option.settings);\n\n      ts.wrapper.classList.remove(_modules_modules_config_js__WEBPACK_IMPORTED_MODULE_7__.domselectors.component.tomselect.ident);\n      ts.wrapper.classList.remove('js');\n      // add\n      ts.wrapper.setAttribute('data-component', 'tom-select');\n      switch (type) {\n        case 'taxo':\n          ts.on('item_add', (v, el) => {\n            if (el !== null) el.classList.add('new');\n            //  el = el.querySelector('.ts-delet');\n            //  if (el !== null) init_canceltag(el);\n          });\n          break;\n          /*  case 'user':\n              if (item.dataset.priv) ts.on(\"item_add\", function(v, el) {\n                el = el.querySelector(domselectors.component.tomselect.tsdelet);\n                if (el !== null) init_canceltag(el);\n              });\n              break;*/\n      }\n      return ts;\n    } else console.log('noid');\n\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QW1CLDhCQUE4QjtBQUN2STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGtGQUFTOztBQUU5QixrQ0FBa0MsOEZBQXNDO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0EsTUFBTTs7QUFFTjtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvanMtdG9tLXNlbGVjdC5qcz9mNDAyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBET01QdXJpZnkgZnJvbSAnZG9tcHVyaWZ5JztcbmltcG9ydCBUb21TZWxlY3QgZnJvbSAndG9tLXNlbGVjdC9kaXN0L2pzL3RvbS1zZWxlY3QuYmFzZS5taW4uanMnO1xuaW1wb3J0IFRvbVNlbGVjdF9yZW1vdmVfYnV0dG9uIGZyb20gJ3RvbS1zZWxlY3QvZGlzdC9qcy9wbHVnaW5zL3JlbW92ZV9idXR0b24uanMnO1xuaW1wb3J0IFRvbVNlbGVjdF9jbGVhcl9idXR0b24gZnJvbSAndG9tLXNlbGVjdC9kaXN0L2pzL3BsdWdpbnMvY2xlYXJfYnV0dG9uLmpzJztcbmltcG9ydCBUb21TZWxlY3RfY2FyZXRfcG9zaXRpb24gZnJvbSAndG9tLXNlbGVjdC9kaXN0L2pzL3BsdWdpbnMvY2FyZXRfcG9zaXRpb24uanMnO1xuVG9tU2VsZWN0LmRlZmluZSgncmVtb3ZlX2J1dHRvbicsIFRvbVNlbGVjdF9yZW1vdmVfYnV0dG9uKTtcblRvbVNlbGVjdC5kZWZpbmUoJ2NsZWFyX2J1dHRvbicsIFRvbVNlbGVjdF9jbGVhcl9idXR0b24pO1xuVG9tU2VsZWN0LmRlZmluZSgnY2FyZXRfcG9zaXRpb24nLCBUb21TZWxlY3RfY2FyZXRfcG9zaXRpb24pO1xuaW1wb3J0IHRvbVNlbGVjdGNzcyBmcm9tIFwiLi4vY3NzL3RvbS1zZWxlY3QuY3NzXCI7XG5pbXBvcnQge1xuICBmZXRjaFNldHRpbmdzXG59IGZyb20gJy4uL21vZHVsZXMvdXRpbHMuanMnO1xuaW1wb3J0IHtcbiAgbW9kZWxzLFxuICBkb21zZWxlY3RvcnNcbn0gZnJvbSAnLi4vbW9kdWxlcy9tb2R1bGVzLWNvbmZpZy5qcyc7XG5sZXQgdXNlcnNfbGlzdCA9IHt9O1xuXG4vLyBzZXR0aW5ncyBmb3IgYXV0b2NvbXBsZXRlIHNlbGVjdCBjb21wb25lbnQgLSB1c2VycyAsIGluc3RydW1lbnRzICwgdGF4b25zXG5leHBvcnQgY2xhc3MgSnNUb21TZWxlY3Qge1xuICBhcHBseVRvKGl0ZW0sIHNldHRpbmdzID0ge30sIHNpYmxpbmdzID0gbnVsbCkge1xuXG4gICAgY29uc3QgaWQgPSBpdGVtLmdldEF0dHJpYnV0ZSgnaWQnKTtcbiAgICBjb25zdCBtdWx0aXBsZSA9IGl0ZW0uaGFzQXR0cmlidXRlKCdtdWx0aXBsZScpO1xuICAgIGNvbnN0IHR5cGUgPSBpdGVtLmRhdGFzZXQudHlwZTtcbiAgICBsZXQgb3B0aW9uID0ge1xuICAgICAgICB1cmw6ICcnLFxuICAgICAgICBzZXR0aW5nczogc2V0dGluZ3NcbiAgICAgIH0sXG4gICAgICBpbml0X2NhbmNlbHRhZyA9ICh0YWcpID0+IHtcbiAgICAgICAgdGFnLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICBjb25zdCB2ID0gZS5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoZG9tc2VsZWN0b3JzLmNvbXBvbmVudC50b21zZWxlY3QuaXRlbSkuZGF0YXNldC52YWx1ZTtcbiAgICAgICAgICBpZiAodikge1xuICAgICAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGl0ZW0udG9tc2VsZWN0LnJlbW92ZUl0ZW0odik7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIG9uX2NsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChpdGVtLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3NlbGVjdCcpIGl0ZW0uc2VsZWN0ZWRJbmRleCA9IC0xO1xuICAgICAgfTtcblxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBtb2RlbHMucHJvamVjdDpcbiAgICAgICAgb3B0aW9uLnVybCA9IFwiL2d1aS9wcmpsaXN0L1wiO1xuICAgICAgICBvcHRpb24uc2V0dGluZ3MgPSB7IC4uLm9wdGlvbi5zZXR0aW5ncyxcbiAgICAgICAgICAuLi57XG4gICAgICAgICAgICB2YWx1ZUZpZWxkOiAnaWQnLFxuICAgICAgICAgICAgc2VhcmNoRmllbGQ6ICd0ZXh0JyxcbiAgICAgICAgICAgIGxhYmVsRmllbGQ6ICd0ZXh0JyxcbiAgICAgICAgICAgIG9wZW5PbkZvY3VzOiBmYWxzZSxcbiAgICAgICAgICAgIG1heEl0ZW1zOiAxLFxuICAgICAgICAgICAgYWxsb3dFbXB0eU9wdGlvbjogZmFsc2UsXG4gICAgICAgICAgICBvbkl0ZW1BZGQ6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgaWYgKGUgIT0gaXRlbS5kYXRhc2V0LnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgbGV0IGhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgnLycpO1xuICAgICAgICAgICAgICAgIGhyZWYucG9wKCk7XG4gICAgICAgICAgICAgICAgaHJlZiA9IGhyZWYuam9pbignLycpICsgJy8nICsgZTtcblxuICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKGhyZWYsICdfYmxhbmsnKS5mb2N1cygpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRoaXMucmVtb3ZlSXRlbShlKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgbW9kZWxzLnVzZXI6XG4gICAgICAgIG9wdGlvbi51cmwgPSBcIi9hcGkvdXNlcnMvc2VhcmNoP2J5X25hbWU9XCI7XG4gICAgICAgIG9wdGlvbi5zZXR0aW5ncyA9IHsgLi4ub3B0aW9uLnNldHRpbmdzLFxuICAgICAgICAgIC4uLntcbiAgICAgICAgICAgIHZhbHVlRmllbGQ6ICdpZCcsXG4gICAgICAgICAgICBzZWFyY2hGaWVsZDogJ25hbWUnLFxuICAgICAgICAgICAgbGFiZWxGaWVsZDogJ25hbWUnLFxuICAgICAgICAgICAgb25Jbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgaXRlbS50b21zZWxlY3QuaXRlbXMuZm9yRWFjaChlID0+IHtcbiAgICAgICAgICAgICAgICB1c2Vyc19saXN0W2VdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25JdGVtQWRkOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgIGlmIChlID09PSBcIlwiKSByZXR1cm47XG4gICAgICAgICAgICAgIGlmICh1c2Vyc19saXN0W2VdKSB7XG4gICAgICAgICAgICAgICAgdXNlcnNfbGlzdFtlXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmIChtdWx0aXBsZSB8fCAhdGhpcy5yZXZlcnRTZXR0aW5ncyB8fCB0aGlzLnJldmVydFNldHRpbmdzLnRhYkluZGV4IDwgMCB8fCAhaXRlbS5vcHRpb25zLmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJldmVydCA9IGl0ZW0ub3B0aW9uc1t0aGlzLnJldmVydFNldHRpbmdzLnRhYkluZGV4XS52YWx1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZU9wdGlvbihlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEl0ZW0ocmV2ZXJ0KTtcbiAgICAgICAgICAgICAgfSBlbHNlIHVzZXJzX2xpc3RbZV0gPSB0cnVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uSXRlbVJlbW92ZTogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICBpZiAodXNlcnNfbGlzdFtlXSkgZGVsZXRlIHVzZXJzX2xpc3RbZV07XG4gICAgICAgICAgICAgIGlmIChtdWx0aXBsZSB8fCAhdGhpcy5yZXZlcnRTZXR0aW5ncyB8fCAodGhpcy5yZXZlcnRTZXR0aW5ncy5pbm5lckhUTUwgPT09ICcnICYmIHRoaXMucmV2ZXJ0U2V0dGluZ3MudGFiSW5kZXggPT09IDApIHx8IHRoaXMucmV2ZXJ0U2V0dGluZ3MudGFiSW5kZXggPCAwKSByZXR1cm47XG4gICAgICAgICAgICAgIGNvbnN0IHJldmVydCA9IGl0ZW0ub3B0aW9uc1t0aGlzLnJldmVydFNldHRpbmdzLnRhYkluZGV4XS52YWx1ZTtcbiAgICAgICAgICAgICAgaWYgKHVzZXJzX2xpc3RbcmV2ZXJ0XSAhPT0gdW5kZWZpbmVkKSBkZWxldGUgdXNlcnNfbGlzdFtyZXZlcnRdO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBtb2RlbHMuaW5zdHI6XG4gICAgICAgIG9wdGlvbi51cmwgPSBcIi9zZWFyY2gvaW5zdHJ1bWVudHNcIjtcbiAgICAgICAgb3B0aW9uLnNldHRpbmdzID0ge1xuICAgICAgICAgIHZhbHVlRmllbGQ6ICdpZCcsXG4gICAgICAgICAgbGFiZWxGaWVsZDogJ3RleHQnLFxuICAgICAgICAgIHNlYXJjaEZpZWxkOiAnaWQnLFxuICAgICAgICAgIG1heEl0ZW1zOiAxLFxuICAgICAgICAgIHByZWxvYWQ6IHRydWVcbiAgICAgICAgfTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIG1vZGVscy50YXhvOlxuICAgICAgICBUb21TZWxlY3QuZGVmaW5lKCdub19jbG9zZScsICgpID0+IHtcbiAgICAgICAgICB0aGlzLmNsb3NlID0gKCkgPT4ge307XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG9wdGlvbi51cmwgPSBcIi9zZWFyY2gvdGF4b1wiO1xuICAgICAgICBvcHRpb24uc2V0dGluZ3MgPSB7XG4gICAgICAgICAgdmFsdWVGaWVsZDogJ2lkJyxcbiAgICAgICAgICBsYWJlbEZpZWxkOiAndGV4dCcsXG4gICAgICAgICAgc2VhcmNoRmllbGQ6ICd0ZXh0JyxcbiAgICAgICAgICBvbkluaXRpYWxpemU6ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICAgICAgaWYgKCF3cmFwcGVyLmNsYXNzTGlzdC5jb250YWlucygndHMtd3JhcHBlcicpKSByZXR1cm47XG4gICAgICAgICAgICBjb25zdCB0YWdzID0gd3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKGRvbXNlbGVjdG9ycy5jb21wb25lbnQudG9tc2VsZWN0LnRzZGVsZXQpO1xuICAgICAgICAgICAgdGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgICAgICAgIGluaXRfY2FuY2VsdGFnKHRhZyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjb25zdCBkZWZhdWx0X3NldHRpbmdzID0ge1xuICAgICAgY3JlYXRlOiBmYWxzZSxcbiAgICAgIG1heE9wdGlvbnM6IG51bGwsXG4gICAgICBwcmVsb2FkOiBmYWxzZSxcbiAgICAgIGhpZGVTZWxlY3RlZDogdHJ1ZSxcbiAgICAgIGR1cGxpY2F0ZXM6IGZhbHNlLFxuICAgICAgYWxsb3dFbXB0eU9wdGlvbjogdHJ1ZSxcbiAgICAgIGNsb3NlQWZ0ZXJTZWxlY3Q6IHRydWUsXG4gICAgICBwbGFjZWhvbGRlcjogKGl0ZW0ucGxhY2Vob2xkZXIpID8gaXRlbS5wbGFjZWhvbGRlciA6ICgoaXRlbS5kYXRhc2V0LnBsYWNlaG9sZGVyKSA/IGl0ZW0uZGF0YXNldC5wbGFjZWhvbGRlciA6ICcnKSxcbiAgICAgIG9uRHJvcGRvd25DbG9zZTogZnVuY3Rpb24oKSB7XG5cbiAgICAgIH0sXG4gICAgICBzaG91bGRMb2FkOiBmdW5jdGlvbihxdWVyeSkge1xuICAgICAgICByZXR1cm4gcXVlcnkubGVuZ3RoID4gMlxuICAgICAgfSxcbiAgICAgIG9uSXRlbVJlbW92ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLml0ZW1zLmxlbmd0aCA9PT0gMCkgb25fY2xlYXIoKTtcbiAgICAgIH0sXG4gICAgICBsb2FkOiBmdW5jdGlvbihxdWVyeSwgY2FsbGJhY2spIHtcbiAgICAgICAgcXVlcnkgPSBET01QdXJpZnkuc2FuaXRpemUocXVlcnkpO1xuXG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICBpZiAoc2VsZi5sb2FkaW5nID4gMTApIHtcblxuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCB1cmwgPSAnJztcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgY2FzZSBtb2RlbHMudXNlcjpcbiAgICAgICAgICAgIHVybCA9IG9wdGlvbi51cmwgKyBlbmNvZGVVUklDb21wb25lbnQoJyUnICsgcXVlcnkgKyAnJScpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBtb2RlbHMuaW5zdHI6XG4gICAgICAgICAgY2FzZSBtb2RlbHMudGF4bzpcbiAgICAgICAgICAgIHVybCA9IG9wdGlvbi51cmw7XG4gICAgICAgICAgICBpZiAocXVlcnkpIHVybCArPSAnP3E9JyArIGVuY29kZVVSSUNvbXBvbmVudChxdWVyeSk7XG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgbW9kZWxzLnByb2plY3Q6XG4gICAgICAgICAgICB1cmwgPSBvcHRpb24udXJsO1xuXG4gICAgICAgICAgICBpZiAocXVlcnkpIHVybCArPSAnP2ZpbHRfdGl0bGU9JyArIGVuY29kZVVSSUNvbXBvbmVudChxdWVyeSk7IC8vKyAnJmZpbHRfaW5zdHJ1bT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHF1ZXJ5KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1cmwgIT09IG51bGwpIGZldGNoKHVybCwgZmV0Y2hTZXR0aW5ncygpKS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSkudGhlbihqc29uID0+IHtcbiAgICAgICAgICBpZiAodHlwZSA9PT0gbW9kZWxzLnByb2plY3QpIHtcbiAgICAgICAgICAgIGlmIChqc29uLmRhdGEgJiYganNvbi5kYXRhLmxlbmd0aCkganNvbiA9IGpzb24uZGF0YS5tYXAocm93ID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpZDogcm93WzFdLFxuICAgICAgICAgICAgICAgIHRleHQ6IHJvd1szXVswXVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodHlwZSA9PT0gbW9kZWxzLmluc3RyICYmIGpzb24ubGVuZ3RoKSBqc29uID0ganNvbi5yZWR1Y2UoKHJlc3VsdCwgYSwgdikgPT4ge1xuICAgICAgICAgICAgYSA9IERPTVB1cmlmeS5zYW5pdGl6ZShhKTtcbiAgICAgICAgICAgIGxldCBvYmogPSB7XG4gICAgICAgICAgICAgIGlkOiBhLFxuICAgICAgICAgICAgICB0ZXh0OiBhXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXN1bHQucHVzaChvYmopO1xuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgIH0sIFtdKTtcblxuICAgICAgICAgIGlmIChqc29uLmxlbmd0aCAmJiB0eXBlb2YganNvbiA9PSAnb2JqZWN0JykganNvbiA9IE9iamVjdC5lbnRyaWVzKGpzb24pO1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhqc29uKTtcblxuICAgICAgICB9KS5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCd0b21zZWxlY3QtZXJyJywgZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuXG4gICAgICByZW5kZXI6IHtcbiAgICAgICAgb3B0aW9uOiBmdW5jdGlvbihlbCwgZXNjYXBlKSB7XG4gICAgICAgICAgaWYgKGVsID09PSB1bmRlZmluZWQgfHwgZWwgPT09IG51bGwpIHJldHVybiBgYDtcbiAgICAgICAgICAvLyBhZGQgb3B0Z3JvdXBcbiAgICAgICAgICBjb25zdCBvcHRncm91cCA9IChlbC5oYXNPd25Qcm9wZXJ0eSgnb3B0Z3JvdXAnKSkgPyBgZGF0YS1vcHRncm91cD0ke2VsLm9wdGdyb3VwfWAgOiBgYDtcbiAgICAgICAgICByZXR1cm4gYDxkaXYgY2xhc3M9XCJweS0yIGZsZXggICR7ICgobXVsdGlwbGUpPydpbmxpbmUtZmxleCc6JycpIH0gXCIgJHtvcHRncm91cH0gZGF0YS12YWx1ZT1cIiR7ZWxbb3B0aW9uLnNldHRpbmdzLnZhbHVlRmllbGRdfVwiPiR7IGVzY2FwZShlbFt0aGlzLnNldHRpbmdzLmxhYmVsRmllbGRdKSB9PC9kaXY+YDtcbiAgICAgICAgfSxcbiAgICAgICAgaXRlbTogZnVuY3Rpb24oZWwsIGVzY2FwZSkge1xuICAgICAgICAgIGlmIChlbCA9PT0gdW5kZWZpbmVkIHx8IGVsID09PSBudWxsKSByZXR1cm4gYGA7IC8vIGFkZCBvcHRncm91cFxuICAgICAgICAgIGNvbnN0IG9wdGdyb3VwID0gKGVsLm9wdGdyb3VwKSA/IGBpdGVtLSR7ZWwub3B0Z3JvdXB9YCA6IGBgO1xuICAgICAgICAgIGNvbnN0IGlubGlzdCA9ICh1c2Vyc19saXN0W2VsW3RoaXMuc2V0dGluZ3MudmFsdWVGaWVsZF1dKSA/IGBkYXRhLWlubGlzdGAgOiBgYDtcbiAgICAgICAgICAvLyBhZGQgY2FuY2VsIGljb24gZm9yIG11bHRpcGxlIHNlbGVjdGlvbnNcbiAgICAgICAgICAvLyAgY29uc3QgY2FuY2VsID0gKChtdWx0aXBsZSkgPyBgPGkgY2xhc3M9XCIke2RvbXNlbGVjdG9ycy5jb21wb25lbnQudG9tc2VsZWN0LnRzZGVsZXQuc3Vic3RyKDEpfVwiPjwvaT5gIDogYGApO1xuICAgICAgICAgIC8vIHVzZSB0cyBwbHVnaW4gcmVtb3ZlX2J1dHRvblxuICAgICAgICAgIGNvbnN0IGNhbmNlbCA9IGBgO1xuICAgICAgICAgIHJldHVybiBET01QdXJpZnkuc2FuaXRpemUoYDxkaXYgY2xhc3M9XCIkeygobXVsdGlwbGUpID8gYGZsZXggaW5saW5lLWZsZXggYCA6IGBgKSB9ICR7b3B0Z3JvdXB9XCIgIGRhdGEtdmFsdWU9XCIke2VsW3RoaXMuc2V0dGluZ3MudmFsdWVGaWVsZF19XCIgICR7aW5saXN0fT4keyBlc2NhcGUoZWxbdGhpcy5zZXR0aW5ncy5sYWJlbEZpZWxkXSl9ICR7IGNhbmNlbCB9PC9kaXY+YCk7XG4gICAgICAgIH0sXG4gICAgICAgIG5vX3Jlc3VsdHM6IGZ1bmN0aW9uKGRhdGEsIGVzY2FwZSkge1xuICAgICAgICAgIHJldHVybiBET01QdXJpZnkuc2FuaXRpemUoJzxkaXYgY2xhc3M9XCJuby1yZXN1bHRzXCI+JyArICgoaXRlbS5kYXRhc2V0Lm5vcmVzdWx0cykgPyBpdGVtLmRhdGFzZXQubm9yZXN1bHRzIDogJ05vIHJlc3VsdCBmb3VuZCBmb3IgJykgKyBlc2NhcGUoZGF0YS5pbnB1dCkgKyAnPC9kaXY+Jyk7XG4gICAgICAgIH0sXG5cbiAgICAgIH1cbiAgICB9XG4gICAgb3B0aW9uLnNldHRpbmdzLnBsdWdpbnMgPSB7XG4gICAgICAnY2xlYXJfYnV0dG9uJzoge1xuICAgICAgICB0aXRsZTogKGl0ZW0uZGF0YXNldC5jbGVhcikgPyBpdGVtLmRhdGFzZXQuY2xlYXIgOiAnQ2xlYXIgYWxsJyxcbiAgICAgICAgaHRtbDogKGRhdGEpID0+IHtcbiAgICAgICAgICByZXR1cm4gYDxkaXYgY2xhc3M9XCIke2RhdGEuY2xhc3NOYW1lfVwiIGlkPVwiY2xlYXItJHtpZH1cIiB0aXRsZT1cIiR7ZGF0YS50aXRsZX1cIj48aSBjbGFzcz1cImljb24gJHsobXVsdGlwbGUpP2BgOidwLVswLjEyNXJlbV0nfSBpY29uLWJhY2tzcGFjZS1zbVwiPjwvaT48L2Rpdj5gO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIG9wdGlvbi5zZXR0aW5ncy5vbkNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgICBvbl9jbGVhcigpO1xuICAgIH1cbiAgICBpZiAobXVsdGlwbGUpIHtcbiAgICAgIG9wdGlvbi5zZXR0aW5ncy5wbHVnaW5zID0geyAuLi5vcHRpb24uc2V0dGluZ3MucGx1Z2lucyxcbiAgICAgICAgLi4ue1xuICAgICAgICAgICdyZW1vdmVfYnV0dG9uJzoge31cbiAgICAgICAgfVxuXG4gICAgICB9O1xuICAgICAgb3B0aW9uLnNldHRpbmdzLnBsdWdpbnMgPSB7IC4uLm9wdGlvbi5zZXR0aW5ncy5wbHVnaW5zLFxuICAgICAgICAuLi57XG4gICAgICAgICAgJ2NhcmV0X3Bvc2l0aW9uJzoge31cbiAgICAgICAgfVxuXG4gICAgICB9O1xuICAgIH1cbiAgICBvcHRpb24uc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKGRlZmF1bHRfc2V0dGluZ3MsIG9wdGlvbi5zZXR0aW5ncylcbiAgICBpZiAoaWQgIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IHRzID0gbmV3IFRvbVNlbGVjdCgnIycgKyBpZCwgb3B0aW9uLnNldHRpbmdzKTtcblxuICAgICAgdHMud3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKGRvbXNlbGVjdG9ycy5jb21wb25lbnQudG9tc2VsZWN0LmlkZW50KTtcbiAgICAgIHRzLndyYXBwZXIuY2xhc3NMaXN0LnJlbW92ZSgnanMnKTtcbiAgICAgIC8vIGFkZFxuICAgICAgdHMud3JhcHBlci5zZXRBdHRyaWJ1dGUoJ2RhdGEtY29tcG9uZW50JywgJ3RvbS1zZWxlY3QnKTtcbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlICd0YXhvJzpcbiAgICAgICAgICB0cy5vbignaXRlbV9hZGQnLCAodiwgZWwpID0+IHtcbiAgICAgICAgICAgIGlmIChlbCAhPT0gbnVsbCkgZWwuY2xhc3NMaXN0LmFkZCgnbmV3Jyk7XG4gICAgICAgICAgICAvLyAgZWwgPSBlbC5xdWVyeVNlbGVjdG9yKCcudHMtZGVsZXQnKTtcbiAgICAgICAgICAgIC8vICBpZiAoZWwgIT09IG51bGwpIGluaXRfY2FuY2VsdGFnKGVsKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgICAvKiAgY2FzZSAndXNlcic6XG4gICAgICAgICAgICAgIGlmIChpdGVtLmRhdGFzZXQucHJpdikgdHMub24oXCJpdGVtX2FkZFwiLCBmdW5jdGlvbih2LCBlbCkge1xuICAgICAgICAgICAgICAgIGVsID0gZWwucXVlcnlTZWxlY3Rvcihkb21zZWxlY3RvcnMuY29tcG9uZW50LnRvbXNlbGVjdC50c2RlbGV0KTtcbiAgICAgICAgICAgICAgICBpZiAoZWwgIT09IG51bGwpIGluaXRfY2FuY2VsdGFnKGVsKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGJyZWFrOyovXG4gICAgICB9XG4gICAgICByZXR1cm4gdHM7XG4gICAgfSBlbHNlIGNvbnNvbGUubG9nKCdub2lkJyk7XG5cbiAgfVxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/modules/js-tom-select.js\n")}}]);
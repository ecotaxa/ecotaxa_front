{%-macro display_menu(menuitems,level=0)-%}
{%if menuitems is iterable%}
{% if level==0-%}
  <!-- project nav  and secondary classif nav and filters -->
<div id="menu-burger" class="burger">
<div id="bar1" class="bar"></div>
<div id="bar2" class="bar"></div>
<div id="bar3" class="bar"></div>
</div><ul id="navbar-menu" class="admin-menu">
{%-else-%}<ul aria-expanded=false>
{%-endif%}

{%for key,menuitem in menuitems.items()-%}
<li ><a href="{{menuitem.url if menuitem.url else '#'+key}}" class="{{ 'uppercase' if level==0 else 'capitalize'}} text-stone-100 hover:text-stone-50">{{menuitem.label}}</a>
{%if menuitem.links -%}
{{display_menu(menuitem.links,level+1)}}
{%-endif%}
</li>
{%-endfor%}
</ul>
{%endif%}
{%-endmacro-%}
<!DOCTYPE html>
<html lang="{{lang if lang !='' else 'en'}}">
<head>
  {% set ecotaxa_version = GetEcotaxaVersionText().split(' ')[0] if GetEcotaxaVersionText is defined else '2.6.8'%}
<link rel=stylesheet rel="preload" type=text/css href="{{ url_for('static', filename='gui/css/main.css') }}?v={{ ecotaxa_version  }}">
 <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='/gui/images/apple-touch-icon.png') }}">
<link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='/gui/images/favicon-32x32.png')}}">
<link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='/gui/images/favicon-16x16.png')}}">
<link rel="manifest" href="{{ url_for('static', filename='/gui/images/site.webmanifest')}}">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1" user-scalable="no">
  <meta http-equiv="refresh">
  <title>Ecotaxa 3.0 {{ target_proj.title if target_proj and target_proj.projid else ''}}</title>
</head>
<body>
  <div id="layout" class="w-full min-h-screen {{ 'overflow-hidden' if bg }} flex flex-col">
      <header class="bg-gradient-to-r from-stone-800 to-stone-600 h-12 p-1 pt-3.5 mb-4">
        <div class="flex flex-wrap  pl-2 md:pl-2 pr-4 w-full justify-between">
          <div class="order-1 ">
              <a href="/gui/prj"  class="text-secondblue-300 fill-secondblue-200"  title="{{_('back to Ecotaxa')}}"><img src="{{ url_for('static',filename='gui/images/logo_ecotaxa_ico.png') }}" class="object-scale-down h-8 py-0.5 mb-1" id="ecotaxa-logo" alt="Logo Ecotaxa 3.0" /></a>
          </div>
          <div class="pl-2 text-sm order-3 uppercase md:order-2">
      <a class="lg:pl-3 pr-0 pt-0.5 static top-0 " href="/admin/"><i class="icon-lg icon-admin invert align-text-bottom"></i> <span class="text-base font-bold text-secondblue-50">Home</span></a></div>
        <div class="flex items-center md:flex-row flex-grow md:basis-6/12  md:flex-nowrap text-stone-50 md:justify-center py-2 md:py-0 order-4 md:order-3 text-sm md:text-base lg:text-lg">
                  <nav class="js js-nav block w-auto mx-auto h-full -mt-[9px]">{{ display_menu(admin_menu(),0)}}</nav>
              </div>
          <div class="flex items-right order-2  md:order-4">
                <div id="aside-nav-item">
                  <a href="/notifications/"><span class="hidden md:show block mb-1">
                      Notifications </span></a>
                    <div class="flex flex-row flex-nowrap align-text-bottom mt-0.5 mr-1 js js-notifications">
                    </div>
                  </div>
                  <div id="user-nav-item"><div class="ident"><i class="icon icon-user-sm align-text-bottom mx-1 invert" title="{{ current_user.name }}"></i><span class="text-xs text-secondblue-50 " >{{ current_user.name }}</span></div>
                <!-- user profile and sign-out -->
                <ul id="user-menu"  role="menu" aria-orientation="vertical" aria-labelledby="user-nav-item" aria-expanded=false tabindex="-1" >
          <li><a href="/gui/me/"  tabindex="-1" role="menuitem"><i class="icon icon-user" class="p-1 opacity-80" title="{{_('logout')}}"></i> {{ _('Profile') }}</a></li>
            <li><a href="/gui/me/files/" tabindex="-1" role="menuitem"><i class="icon icon-document-text" class="p-1 opacity-80" title="{{_('My Files')}}"></i> {{ _('Files') }}</a></li>
            <li class="separ"><a href="/logout" tabindex="-1"  role="menuitem"><i class="icon icon-arrow-right-on-rectangle-sm" class="opacity-80" title="{{_('logout')}}"></i> {{ _('Logout') }}</a></li>
              </div>
          </div>
        </div>

  </header>
    <main {{ ' style="--bg-image:url(\''| safe + url_for('static',filename='gui/images/montage_plankton.jpg') + '\')" class="bg-image" '| safe if bg }}>
       {% if not mask_alert  %}
       <div id="top-alerts" class="w-full px-2 group-alert-top">
       {% from "./v2/macros/macros.html" import topalerts with context%}
         {{ topalerts() }}
       </div>
         {% endif %}
      <div class="w-full">
        {% block body %}{% endblock %}
        {% block bodycontent%} {% endblock %}
      </div>
        <a class="up pageup js js-scrollpy" data-threshold="hscreen" data-action="gotop"></a>
    </main>
    <footer class="fixed block w-screen bottom-0 z-40 background-bottom pt-1 pb-2">{% include './v2/partials/_footer.html' %}</footer>
  </div>
  <!--<script  src="{{ url_for('static', filename='gui/vendors.js') }}?v={{ ecotaxa_version }}"></script>
  <script src="{{ url_for('static', filename='gui/runtime.js') }}?v={{ ecotaxa_version }}"></script>-->
<script  src="{{ url_for('static', filename='gui/main.js') }}?v={{ ecotaxa_version }}"></script>
</body>
</html>
